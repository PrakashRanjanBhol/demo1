import React, { useState } from 'react';
import styles from './ChatImageStrip.module.css';
import { Dialog } from 'primereact/dialog';

const ChatImageStrip = ({ images }) => {
  const [showDialog, setShowDialog] = useState(false);

  const previewLimit = 3;
  const extraCount = images.length - previewLimit;

  return (
    <div className={styles.container}>
      <div className={styles.imageRow}>
        {images.slice(0, previewLimit).map((img, index) => (
          <img
            key={index}
            src={`data:image/jpeg;base64,${img.base64Image}`}
            alt={img.fileName || `img-${index}`}
            className={styles.thumbnail}
          />
        ))}
        {extraCount > 0 && (
          <div className={styles.extraCount} onClick={() => setShowDialog(true)}>
            +{extraCount} Images
          </div>
        )}
      </div>

      <Dialog
        header="Uploaded Images"
        visible={showDialog}
        onHide={() => setShowDialog(false)}
        className={styles.dialog}
        breakpoints={{ '960px': '90vw' }}
        style={{ width: '50vw' }}
      >
        <div className={styles.dialogContent}>
          {images.map((img, index) => (
            <img
              key={index}
              src={`data:image/jpeg;base64,${img.base64Image}`}
              alt={img.fileName || `preview-${index}`}
              className={styles.dialogImage}
            />
          ))}
        </div>
      </Dialog>
    </div>
  );
};

export default ChatImageStrip;





.container {
  display: flex;
  flex-direction: column;
}

.imageRow {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding: 0.5rem 0;
}

.thumbnail {
  width: 60px;
  height: 60px;
  object-fit: cover;
  border-radius: 6px;
  border: 1px solid #333;
}

.extraCount {
  background-color: #333;
  color: #ffffffcc;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  cursor: pointer;
  white-space: nowrap;
  font-size: 0.85rem;
  transition: background 0.3s;
}

.extraCount:hover {
  background-color: #444;
}

.dialog {
  background-color: #181818;
  color: #fff;
}

.dialogContent {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
  justify-content: center;
  padding-top: 1rem;
}

.dialogImage {
  max-width: 150px;
  height: auto;
  border-radius: 6px;
  border: 1px solid #444;
  object-fit: cover;
}




const imageResponse = [
  {
    fileName: 'cat.jpg',
    base64Image: 'iVBORw0KGgoAAAANSUhEUgAA...' // (example base64)
  },
  {
    fileName: 'dog.jpg',
    base64Image: 'iVBORw0KGgoAAAANSUhEUgAA...'
  },
  // more...
];

<ChatImageStrip images={imageResponse} />
