<div class="previous-files-header">
  <label class="previous-files-label">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776" />
    </svg>
    Select One File from Previously Uploaded
  </label>
</div>

<!-- Add Date Range Selector with Refresh Button -->
<div class="date-range-selector">
  <div class="date-input-group">
    <label class="date-label">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
      </svg>
      From
    </label>
    <input type="date" class="date-input" 
      [ngModel]="getFormattedDate(selectedStartDate)"
      (ngModelChange)="selectedStartDate = $event" 
      [disabled]="isLoadingFiles">
  </div>
  <div class="date-separator">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 8.25L21 12m0 0l-3.75 3.75M21 12H3" />
    </svg>
  </div>
  <div class="date-input-group">
    <label class="date-label">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
        stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
      </svg>
      To
    </label>
    <input type="date" class="date-input" 
      [ngModel]="getFormattedDate(selectedEndDate)"
      (ngModelChange)="selectedEndDate = $event" 
      [disabled]="isLoadingFiles">
  </div>
  <button class="refresh-btn-inline" (click)="refreshPreviousFiles()" [disabled]="isLoadingFiles" title="Apply Date Filter">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round"
        d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
    </svg>
  </button>
</div>














// Remove onDateRangeChange() method completely

// Keep only getFormattedDate method
getFormattedDate(date: Date): string {
  if (!date) return '';
  const year = date.getFullYear();
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const day = String(date.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
}

// refreshPreviousFiles method remains the same - it will use the selected dates
refreshPreviousFiles(): void {
  // Convert string dates back to Date objects if needed
  if (typeof this.selectedStartDate === 'string') {
    this.selectedStartDate = new Date(this.selectedStartDate);
  }
  if (typeof this.selectedEndDate === 'string') {
    this.selectedEndDate = new Date(this.selectedEndDate);
  }
  
  this.filesLoaded = false;
  this.loadPreviousFiles();
}
















/* Date Range Selector - Updated */
.date-range-selector {
  display: flex;
  align-items: flex-end;
  gap: 12px;
  padding: 12px;
  background-color: var(--footer-bg);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  margin-bottom: 12px;
}

.date-input-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.date-label {
  font-size: 11px;
  font-weight: 600;
  color: var(--text-color);
  opacity: 0.7;
  display: flex;
  align-items: center;
  gap: 4px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.date-label svg {
  width: 14px;
  height: 14px;
  stroke: var(--primary-color);
}

.date-input {
  padding: 8px 12px;
  background-color: var(--bg-color);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  font-size: 13px;
  color: var(--text-color);
  font-weight: 500;
  transition: all 0.2s ease;
  cursor: pointer;
}

.date-input:hover:not(:disabled) {
  border-color: var(--primary-color);
}

.date-input:focus {
  outline: none;
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.date-input:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.date-separator {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 4px;
}

.date-separator svg {
  width: 20px;
  height: 20px;
  stroke: var(--text-color);
  opacity: 0.4;
}

/* Refresh Button Inline - New Style */
.refresh-btn-inline {
  width: 40px;
  height: 40px;
  background: linear-gradient(135deg, var(--primary-color), #a78bfa);
  border: none;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
}

.refresh-btn-inline:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.refresh-btn-inline:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.refresh-btn-inline svg {
  width: 20px;
  height: 20px;
  stroke: white;
}

/* Calendar icon styling for date input */
.date-input::-webkit-calendar-picker-indicator {
  cursor: pointer;
  filter: invert(0.5);
}

.date-input::-webkit-calendar-picker-indicator:hover {
  filter: invert(0.3);
}

/* Remove old refresh button styles - keep this for backward compatibility if needed elsewhere */
.refresh-btn {
  width: 32px;
  height: 32px;
  background-color: var(--footer-bg);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.refresh-btn:hover:not(:disabled) {
  background-color: var(--bg-color);
  border-color: var(--primary-color);
}

.refresh-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.refresh-btn svg {
  width: 18px;
  height: 18px;
  stroke: var(--text-color);
}

/* Remove spinning animation */
