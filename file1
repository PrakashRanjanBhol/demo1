onKeyDown(e: KeyboardEvent) {
  const target = e.target as HTMLTextAreaElement;
  if (!target) return;

  const scrollTop = target.scrollTop;
  const clientHeight = target.clientHeight;
  const scrollHeight = target.scrollHeight;

  const atTop = scrollTop <= 0;
  const atBottom = Math.ceil(scrollTop + clientHeight) >= scrollHeight;

  if (e.key === 'PageUp') {
    // block global scroll only when NOT at top
    if (!atTop) {
      e.stopPropagation();
    } else {
      e.preventDefault(); // avoid sidebar/global move
    }
  }

  if (e.key === 'PageDown') {
    // block global scroll only when NOT at bottom
    if (!atBottom) {
      e.stopPropagation();
    } else {
      e.preventDefault(); // avoid sidebar/global move
    }
  }
}
