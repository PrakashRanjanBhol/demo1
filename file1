import { Component, ViewChild } from '@angular/core';

@Component({
  selector: 'app-content-analytics',
  templateUrl: './content-analytics.component.html',
  styleUrls: ['./content-analytics.component.css']
})
export class ContentAnalyticsComponent {
  @ViewChild('historyComponent') historyComponent: any;

  isHeaderExpanded: boolean = false;
  selectedHistoryItem: any = null;
  resultItems: any[] = [];

  toggleHeader(): void {
    this.isHeaderExpanded = !this.isHeaderExpanded;
  }

  onGenerateComplete(data: { file: any, prompts: string, mode: string }): void {
    const newItem = {
      id: 'item' + (Date.now()),
      name: data.file.name || data.file,
      displayDate: 'Created on ' + new Date().toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      }),
      date: new Date()
    };

    // Add to history
    if (this.historyComponent) {
      this.historyComponent.addHistoryItem(newItem);
    }

    // Load results
    setTimeout(() => {
      this.selectedHistoryItem = newItem;
      this.loadResultsForItem(newItem.id);
    }, 300);
  }

  onHistoryItemSelected(itemId: string): void {
    const item = this.historyComponent?.historyItems.find((i: any) => i.id === itemId);
    if (item) {
      this.selectedHistoryItem = item;
      this.loadResultsForItem(itemId);
    }
  }

  loadResultsForItem(itemId: string): void {
    this.resultItems = this.getSampleResultItems(itemId);
  }

  getSampleResultItems(itemId: string): any[] {
    return [
      {
        id: 'result1',
        title: 'Lecture Summary',
        icon: 'document',
        content: 'This lecture covers fundamental concepts in machine learning, including supervised and unsupervised learning approaches. The instructor explains neural network architectures and demonstrates practical applications using Python libraries.',
        type: 'summary'
      },
      {
        id: 'result2',
        title: 'Keywords',
        icon: 'tag',
        content: '‚Ä¢ Neural Networks ‚Ä¢ Deep Learning ‚Ä¢ Supervised Learning ‚Ä¢ Unsupervised Learning ‚Ä¢ Backpropagation ‚Ä¢ Gradient Descent ‚Ä¢ Activation Functions ‚Ä¢ Training Data ‚Ä¢ Model Optimization',
        type: 'keywords'
      },
      {
        id: 'result3',
        title: 'Assessment Question',
        icon: 'question',
        content: 'What are the main differences between supervised and unsupervised learning? Explain the backpropagation algorithm and its role in neural networks.',
        type: 'questions'
      }
    ];
  }
}















<main>
    <!-- Page Header -->
    <div class="page-header" [class.expanded]="isHeaderExpanded">
        <div class="header-content">
            <div class="header-icon-wrapper">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="header-icon">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 9v3.75m3-6v6" />
                </svg>
            </div>
            <div class="header-text">
                <h1 class="page-title">Content Analytics</h1>
                <p class="page-subtitle">Transform your audio into actionable insights</p>
            </div>
            <button class="header-toggle-btn" (click)="toggleHeader()"
                [attr.aria-label]="isHeaderExpanded ? 'Collapse header' : 'Expand header'">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="toggle-icon">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </button>
        </div>
        <div class="header-expanded-content">
            <div class="header-stats">
                <div class="stat-item">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                        </svg>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">Lectures Processed</div>
                        <div class="stat-value">12 Audio Files</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
                        </svg>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">Summaries Generated</div>
                        <div class="stat-value">48 Summaries</div>
                    </div>
                </div>
                <div class="stat-item">
                    <div class="stat-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
                        </svg>
                    </div>
                    <div class="stat-info">
                        <div class="stat-label">Assessment Questions</div>
                        <div class="stat-value">34 Questions</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content-layout">
        <!-- Upload Section with Three Columns -->
        <div class="upload-column">
            <section class="upload-section">
                <div class="upload-content">
                    <div class="split-three-columns">
                        <!-- Upload & Generate Component -->
                        <app-upload-generate (onGenerate)="onGenerateComplete($event)">
                        </app-upload-generate>

                        <!-- History Component -->
                        <app-history #historyComponent (onItemSelect)="onHistoryItemSelected($event)">
                        </app-history>

                        <!-- Workspace Component -->
                        <app-workspace [selectedHistoryItem]="selectedHistoryItem" [resultItems]="resultItems">
                        </app-workspace>
                    </div>
                </div>
            </section>
        </div>
    </div>
</main>













/* Main Content Styles */
:host {
    display: flex;
    flex-direction: column;
    flex: 1;
    overflow: hidden;
    height: 100%;
}

main {
    flex: 1;
    width: 100%;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    height: 100%;
}

/* Page Header */
.page-header {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(167, 139, 250, 0.05));
    border-left: 4px solid var(--primary-color);
    padding: 16px 24px;
    margin: 20px 24px 0 24px;
    border-radius: 8px;
    flex-shrink: 0;
    transition: all 0.3s ease;
    overflow: hidden;
}

.page-header.expanded {
    padding-bottom: 20px;
}

.header-icon-wrapper {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border: 1px solid var(--primary-color);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.header-content {
    display: flex;
    align-items: center;
    gap: 14px;
    position: relative;
    z-index: 1;
}

.header-icon {
    width: 24px;
    height: 24px;
    stroke: var(--primary-color);
}

.header-text {
    flex: 1;
}

.page-title {
    font-size: 20px;
    font-weight: 700;
    margin: 0 0 3px 0;
    letter-spacing: -0.02em;
    color: var(--text-color);
}

.page-subtitle {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.6;
    margin: 0;
}

.header-toggle-btn {
    width: 32px;
    height: 32px;
    border-radius: 8px;
    background-color: transparent;
    border: 1px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.header-toggle-btn:hover {
    background-color: var(--footer-bg);
    border-color: var(--primary-color);
}

.header-toggle-btn .toggle-icon {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    transition: transform 0.3s ease;
}

.page-header.expanded .header-toggle-btn .toggle-icon {
    transform: rotate(180deg);
}

/* Expanded Header Content */
.header-expanded-content {
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    margin-top: 0;
}

.page-header.expanded .header-expanded-content {
    max-height: 200px;
    opacity: 1;
    margin-top: 16px;
}

.header-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
}

.stat-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    transition: all 0.2s ease;
}

.stat-item:hover {
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
}

.stat-icon {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.stat-icon svg {
    width: 18px;
    height: 18px;
    stroke: var(--primary-color);
}

.stat-info {
    flex: 1;
    min-width: 0;
}

.stat-label {
    font-size: 11px;
    color: var(--text-color);
    opacity: 0.6;
    margin-bottom: 2px;
}

.stat-value {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
}

/* Content Layout - Three Column Split */
.content-layout {
    display: flex;
    flex-direction: row;
    gap: 0;
    flex: 1;
    overflow: hidden;
    margin-top: 16px;
    position: relative;
    padding: 0 24px 24px 24px;
}

/* Modern separator design */
.content-layout::before {
    content: '';
    position: absolute;
    top: -8px;
    left: 24px;
    right: 24px;
    height: 1px;
    background: linear-gradient(90deg,
            transparent 0%,
            var(--border-color) 10%,
            var(--border-color) 90%,
            transparent 100%);
}

/* Upload Column - Full Width Container */
.upload-column {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: linear-gradient(135deg,
            var(--header-bg) 0%,
            var(--bg-color) 50%,
            var(--header-bg) 100%);
    border-radius: 8px;
    border: 1px solid var(--border-color);
}

/* Upload Section */
.upload-section {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* Upload Content */
.upload-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden; /* Change this line */
    padding: 20px 24px 24px 24px;
}

/* Three-column Split Container - FIXED ALIGNMENT */
.split-three-columns {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 16px;
    height: 100%;
    overflow: hidden; /* Keep parent hidden */
}

/* Ensure all child components take full height - MODIFIED */
.split-three-columns > * {
    min-width: 0;
    height: 100%;
    overflow-y: auto; /* ADD THIS - Enable scroll for each column */
    overflow-x: hidden;
}

/* Responsive Design */
@media (max-width: 1400px) {
    .split-three-columns {
        grid-template-columns: 1fr 1fr 1fr;
        /* Keep 3 columns on medium screens */
        gap: 12px;
    }
}

@media (max-width: 1024px) {
    .content-layout {
        flex-direction: column;
        gap: 16px;
        padding: 0 16px 16px 16px;
    }

    .upload-column {
        width: 100%;
        border-radius: 8px;
    }

    .header-stats {
        grid-template-columns: 1fr;
    }

    .split-three-columns {
        grid-template-columns: 1fr;
        /* Stack vertically on tablets */
        gap: 16px;
        height: auto;
    }

    .split-three-columns>* {
        height: auto;
        max-height: 500px;
        /* Limit height when stacked */
    }
}

@media (max-width: 768px) {
    .header-stats {
        grid-template-columns: 1fr;
    }

    .page-header {
        margin: 16px 16px 0 16px;
        padding: 14px 16px;
    }

    .split-three-columns {
        grid-template-columns: 1fr;
        /* Single column on mobile */
        gap: 16px;
    }

    .content-layout {
        padding: 0 16px 16px 16px;
    }

    .upload-content {
        padding: 16px;
    }
}

/* Scrollbar styling */
.upload-section::-webkit-scrollbar,
.upload-content::-webkit-scrollbar,
.upload-column::-webkit-scrollbar {
    width: 6px;
}

.upload-section::-webkit-scrollbar-track,
.upload-content::-webkit-scrollbar-track,
.upload-column::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.upload-section::-webkit-scrollbar-thumb,
.upload-content::-webkit-scrollbar-thumb,
.upload-column::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.upload-section::-webkit-scrollbar-thumb:hover,
.upload-content::-webkit-scrollbar-thumb:hover,
.upload-column::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}






















import { Component, EventEmitter, Output } from '@angular/core';
import { HttpClient, HttpEventType } from '@angular/common/http';

interface UploadFile {
  id: number;
  name: string;
  uploadDate: Date;
}

interface FileWithStatus {
  file: File;
  status: 'pending' | 'uploading' | 'uploaded' | 'error';
  progress?: number;
}

@Component({
  selector: 'app-upload-generate',
  templateUrl: './upload-generate.component.html',
  styleUrls: ['./upload-generate.component.css']
})
export class UploadGenerateComponent {
  @Output() onGenerate = new EventEmitter<{ file: any, prompts: string, mode: 'new' | 'previous' }>();

  // API endpoint - replace with your actual API URL
  private uploadApiUrl = 'https://your-api-endpoint.com/api/upload';

  isDragging: boolean = false;
  optionalPrompts: string = '';
  isProcessing: boolean = false;
  processingProgress: number = 0;
  processingFileName: string = '';

  currentStep: number = 1;
  uploadedFilesWithStatus: FileWithStatus[] = [];
  selectedUploadFile: File | null = null;

  uploadMode: 'new' | 'previous' = 'new';
  allUploadedFiles: UploadFile[] = [
    { id: 1, name: 'Machine Learning Lecture 01.mp3', uploadDate: new Date('2026-01-28') },
    { id: 2, name: 'Deep Learning Fundamentals.wav', uploadDate: new Date('2026-01-27') },
    { id: 3, name: 'Neural Networks Introduction.m4a', uploadDate: new Date('2026-01-26') }
  ];
  selectedPreviousFile: UploadFile | null = null;

  constructor(private http: HttpClient) { }

  onFileSelected(event: any): void {
    const files = event.target.files;
    if (files && files.length > 0) {
      for (let i = 0; i < files.length; i++) {
        const exists = this.uploadedFilesWithStatus.some(f => f.file.name === files[i].name);
        if (!exists) {
          this.uploadedFilesWithStatus.push({
            file: files[i],
            status: 'pending',
            progress: 0
          });
        }
      }
    }
  }

  onFileDrop(event: DragEvent): void {
    event.preventDefault();
    this.isDragging = false;

    const files = event.dataTransfer?.files;
    if (files && files.length > 0) {
      for (let i = 0; i < files.length; i++) {
        const exists = this.uploadedFilesWithStatus.some(f => f.file.name === files[i].name);
        if (!exists) {
          this.uploadedFilesWithStatus.push({
            file: files[i],
            status: 'pending',
            progress: 0
          });
        }
      }
    }
  }

  selectUploadFile(file: File): void {
    this.selectedUploadFile = file;
  }

  isUploadFileSelected(file: File): boolean {
    return this.selectedUploadFile === file;
  }

  removeIndividualFile(index: number): void {
    this.uploadedFilesWithStatus.splice(index, 1);
  }

  async onUpload(): Promise<void> {
    if (this.uploadedFilesWithStatus.length > 0) {
      await this.uploadFilesSequentially();
      this.currentStep = 2;
      this.selectedUploadFile = null;
    }
  }

  async uploadFilesSequentially(): Promise<void> {
    for (let i = 0; i < this.uploadedFilesWithStatus.length; i++) {
      const fileWithStatus = this.uploadedFilesWithStatus[i];

      // Set status to uploading
      fileWithStatus.status = 'uploading';
      fileWithStatus.progress = 0;

      try {
        // Make real API call
        await this.uploadFile(fileWithStatus);

        // Set status to uploaded on success
        fileWithStatus.status = 'uploaded';
        fileWithStatus.progress = 100;
      } catch (error) {
        // Set status to error on failure
        fileWithStatus.status = 'error';
        console.error(`Failed to upload ${fileWithStatus.file.name}:`, error);
      }
    }
  }

  private uploadFile(fileWithStatus: FileWithStatus): Promise<any> {
    return new Promise((resolve, reject) => {
      const formData = new FormData();
      formData.append('file', fileWithStatus.file);

      // Optional: Add additional metadata
      formData.append('fileName', fileWithStatus.file.name);
      formData.append('fileSize', fileWithStatus.file.size.toString());
      formData.append('fileType', fileWithStatus.file.type);

      // Make HTTP POST request with progress tracking
      this.http.post(this.uploadApiUrl, formData, {
        reportProgress: true,
        observe: 'events'
      }).subscribe({
        next: (event: any) => {
          if (event.type === HttpEventType.UploadProgress) {
            // Calculate upload progress
            if (event.total) {
              fileWithStatus.progress = Math.round((100 * event.loaded) / event.total);
            }
          } else if (event.type === HttpEventType.Response) {
            // Upload complete
            console.log('Upload successful:', event.body);
            resolve(event.body);
          }
        },
        error: (error) => {
          console.error('Upload error:', error);
          reject(error);
        }
      });
    });
  }

  onDragOver(event: DragEvent): void {
    event.preventDefault();
    this.isDragging = true;
  }

  onDragLeave(event: DragEvent): void {
    event.preventDefault();
    this.isDragging = false;
  }

  handleGenerate(): void {
    if (this.uploadMode === 'new' && this.selectedUploadFile) {
      this.startProcessing(this.selectedUploadFile.name);
      this.onGenerate.emit({
        file: this.selectedUploadFile,
        prompts: this.optionalPrompts,
        mode: 'new'
      });
    } else if (this.uploadMode === 'previous' && this.selectedPreviousFile) {
      this.startProcessing(this.selectedPreviousFile.name);
      this.onGenerate.emit({
        file: this.selectedPreviousFile,
        prompts: this.optionalPrompts,
        mode: 'previous'
      });
    }
  }

  startProcessing(fileName: string): void {
    this.isProcessing = true;
    this.processingProgress = 0;
    this.processingFileName = fileName;

    const interval = setInterval(() => {
      this.processingProgress += 5;

      if (this.processingProgress >= 100) {
        clearInterval(interval);
        this.processingProgress = 100;

        setTimeout(() => {
          this.completeProcessing();
        }, 500);
      }
    }, 1000);
  }

  completeProcessing(): void {
    this.isProcessing = false;
    this.processingProgress = 0;
    this.selectedUploadFile = null;
    this.uploadedFilesWithStatus = [];
    this.selectedPreviousFile = null;
    this.optionalPrompts = '';
    this.currentStep = 1;
  }

  onReset(): void {
    this.uploadedFilesWithStatus = [];
    this.selectedUploadFile = null;
    this.optionalPrompts = '';
    this.isDragging = false;
    this.currentStep = 1;
  }

  onCancel(): void {
    this.currentStep = 1;
    this.selectedUploadFile = null;
    this.optionalPrompts = '';
  }

  toggleFileSelection(file: UploadFile): void {
    if (this.selectedPreviousFile?.id === file.id) {
      this.selectedPreviousFile = null;
    } else {
      this.selectedPreviousFile = file;
    }
  }

  isFileSelected(file: UploadFile): boolean {
    return this.selectedPreviousFile?.id === file.id;
  }

  clearPreviousSelection(): void {
    this.selectedPreviousFile = null;
    this.optionalPrompts = '';
  }

  getStatusBadgeClass(status: string): string {
    return `status-badge status-${status}`;
  }

  getStatusText(status: string): string {
    const statusMap: { [key: string]: string } = {
      'pending': 'Pending',
      'uploading': 'Uploading',
      'uploaded': 'Uploaded',
      'error': 'Error'
    };
    return statusMap[status] || status;
  }
}

















<div class="upload-third">
    <div class="section-header-inline">
        <h3 class="section-inline-title">Upload & Generate</h3>
    </div>

    <!-- Mode Toggle Tabs -->
    <div class="mode-toggle-tabs">
        <button class="mode-tab" [class.active]="uploadMode === 'new'" (click)="uploadMode = 'new'; currentStep = 1">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
            </svg>
            <span>New Upload</span>
        </button>
        <button class="mode-tab" [class.active]="uploadMode === 'previous'" (click)="uploadMode = 'previous'">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>Previous Files</span>
        </button>
    </div>

    <!-- NEW UPLOAD MODE -->
    <div *ngIf="uploadMode === 'new'">
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step-item" [class.active]="currentStep === 1" [class.completed]="currentStep > 1">
                <div class="step-number">1</div>
                <div class="step-label">Upload</div>
            </div>
            <div class="step-connector" [class.active]="currentStep > 1"></div>
            <div class="step-item" [class.active]="currentStep === 2">
                <div class="step-number">2</div>
                <div class="step-label">Generate</div>
            </div>
        </div>

        <!-- STEP 1: Upload -->
        <div class="upload-content-wrapper" *ngIf="currentStep === 1">
            <div class="upload-fields-container">
                <!-- File Upload Area -->
                <div class="upload-area-wrapper">
                    <label class="upload-area-label">Lecture / Related file or folder</label>
                    <div class="file-upload-zone" [class.drag-over]="isDragging" (drop)="onFileDrop($event)"
                        (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)">
                        <div class="upload-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M12 16.5V9.75m0 0l3 3m-3-3l-3 3M6.75 19.5a4.5 4.5 0 01-1.41-8.775 5.25 5.25 0 0110.233-2.33 3 3 0 013.758 3.848A3.752 3.752 0 0118 19.5H6.75z" />
                            </svg>
                        </div>
                        <h3 class="upload-title">Drop your audio file here</h3>
                        <p class="upload-subtitle">or</p>
                        <div class="upload-btn-wrapper">
                            <button class="browse-btn" (click)="fileInput.click()">Browse
                                Files</button>
                        </div>
                        <input #fileInput type="file" class="file-input-hidden" multiple
                            (change)="onFileSelected($event)">
                        <p class="upload-info">Supported formats: MP3, WAV, M4A, FLAC</p>
                    </div>
                </div>

                <!-- Uploaded Files List -->
                <!-- Uploaded Files List -->
                <div class="selected-files-list" *ngIf="uploadedFilesWithStatus.length > 0">
                    <div class="selected-files-header">
                        <span class="selected-files-count">{{ uploadedFilesWithStatus.length }} file(s) uploaded</span>
                    </div>
                    <div class="selected-file" *ngFor="let fileWithStatus of uploadedFilesWithStatus; let i = index">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                        </svg>
                        <span class="file-name-display">{{ fileWithStatus.file.name }}</span>
                        <span class="file-size">({{ (fileWithStatus.file.size / 1024 / 1024).toFixed(2) }} MB)</span>
                        <span [className]="getStatusBadgeClass(fileWithStatus.status)">
                            {{ getStatusText(fileWithStatus.status) }}
                        </span>
                        <button class="remove-file-btn" (click)="removeIndividualFile(i)"
                            [disabled]="fileWithStatus.status === 'uploading'">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Step 1 Action Buttons -->
            <div class="action-buttons">
                <button class="generate-btn" [disabled]="uploadedFilesWithStatus.length === 0" (click)="onUpload()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
                    </svg>
                    Continue
                </button>
                <button class="reset-btn" (click)="onReset()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg>
                    Reset
                </button>
            </div>
        </div>

        <!-- STEP 2: Generate (New Upload) -->
        <div class="upload-content-wrapper" *ngIf="currentStep === 2">
            <div class="upload-fields-container">
                <!-- Uploaded Files with Radio Selection -->
                <div class="uploaded-files-summary">
                    <label class="summary-label">Select One File to Generate</label>
                    <div class="summary-files-list radio-selection">
                        <div class="summary-file-item radio-select"
                            *ngFor="let fileWithStatus of uploadedFilesWithStatus"
                            [class.selected]="isUploadFileSelected(fileWithStatus.file)"
                            (click)="selectUploadFile(fileWithStatus.file)">
                            <div class="file-radio">
                                <div class="radio-dot" *ngIf="isUploadFileSelected(fileWithStatus.file)"></div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                            </svg>
                            <span class="file-name-truncate">{{ fileWithStatus.file.name }}</span>
                        </div>
                    </div>
                </div>

                <!-- Optional Prompts -->
                <div class="prompts-area">
                    <label class="prompts-label">Optional Prompts (Notes)</label>
                    <textarea class="prompts-textarea" [(ngModel)]="optionalPrompts" name="prompts"
                        placeholder="Enter any specific instructions or notes for the AI analysis...&#10;&#10;Example:&#10;- Focus on extracting key topics&#10;- Identify speakers&#10;- Summarize main points"
                        rows="8"></textarea>
                    <p class="prompts-hint">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                        </svg>
                        Add custom instructions to guide the AI analysis
                    </p>
                </div>

                <!-- Processing Progress Bar -->
                <div class="processing-container" *ngIf="isProcessing">
                    <div class="processing-header">
                        <div class="processing-icon-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="processing-icon">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                            </svg>
                        </div>
                        <div class="processing-info">
                            <h4 class="processing-title">Processing Your File</h4>
                            <p class="processing-filename">{{ processingFileName }}</p>
                        </div>
                        <span class="processing-percentage">{{ processingProgress }}%</span>
                    </div>

                    <div class="progress-bar-container">
                        <div class="progress-bar-track">
                            <div class="progress-bar-fill" [style.width.%]="processingProgress">
                                <div class="progress-bar-shimmer"></div>
                            </div>
                        </div>
                    </div>

                    <p class="processing-message">
                        Analyzing audio content, extracting insights, and generating results...
                    </p>
                </div>
            </div>

            <!-- Step 2 Action Buttons -->
            <div class="action-buttons">
                <button class="generate-btn" [disabled]="!selectedUploadFile || isProcessing"
                    (click)="handleGenerate()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
                    </svg>
                    {{ isProcessing ? 'Processing...' : 'Generate' }}
                </button>
                <button class="reset-btn" [disabled]="isProcessing" (click)="onCancel()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
                    </svg>
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- PREVIOUS FILES MODE -->
    <div *ngIf="uploadMode === 'previous'">
        <div class="upload-content-wrapper">
            <div class="upload-fields-container">
                <!-- Previous Files Selection -->
                <div class="previous-files-section">
                    <label class="previous-files-label">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776" />
                        </svg>
                        Select One File from Previously Uploaded
                    </label>

                    <div class="previous-files-list" *ngIf="allUploadedFiles.length > 0">
                        <div class="previous-file-item" *ngFor="let file of allUploadedFiles"
                            [class.selected]="isFileSelected(file)" (click)="toggleFileSelection(file)">
                            <div class="file-radio">
                                <div class="radio-dot" *ngIf="isFileSelected(file)"></div>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="file-icon">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                            </svg>
                            <div class="file-details">
                                <span class="file-name">{{ file.name }}</span>
                                <span class="file-date">{{ file.uploadDate | date: 'MMM d, y'
                                    }}</span>
                            </div>
                        </div>
                    </div>

                    <div class="no-previous-files" *ngIf="allUploadedFiles.length === 0">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H6.911a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661z" />
                        </svg>
                        <p>No previously uploaded files</p>
                        <small>Upload new files to see them here</small>
                    </div>
                </div>

                <!-- Optional Prompts -->
                <div class="prompts-area">
                    <label class="prompts-label">Optional Prompts (Notes)</label>
                    <textarea class="prompts-textarea" [(ngModel)]="optionalPrompts" name="prompts"
                        placeholder="Enter any specific instructions or notes for the AI analysis...&#10;&#10;Example:&#10;- Focus on extracting key topics&#10;- Identify speakers&#10;- Summarize main points"
                        rows="8"></textarea>
                    <p class="prompts-hint">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z" />
                        </svg>
                        Add custom instructions to guide the AI analysis
                    </p>
                </div>

                <!-- Processing Progress Bar -->
                <div class="processing-container" *ngIf="isProcessing">
                    <div class="processing-header">
                        <div class="processing-icon-wrapper">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="processing-icon">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                            </svg>
                        </div>
                        <div class="processing-info">
                            <h4 class="processing-title">Processing Your File</h4>
                            <p class="processing-filename">{{ processingFileName }}</p>
                        </div>
                        <span class="processing-percentage">{{ processingProgress }}%</span>
                    </div>

                    <div class="progress-bar-container">
                        <div class="progress-bar-track">
                            <div class="progress-bar-fill" [style.width.%]="processingProgress">
                                <div class="progress-bar-shimmer"></div>
                            </div>
                        </div>
                    </div>

                    <p class="processing-message">
                        Analyzing audio content, extracting insights, and generating results...
                    </p>
                </div>
            </div>

            <!-- Previous Files Action Buttons -->
            <div class="action-buttons">
                <button class="generate-btn" [disabled]="!selectedPreviousFile || isProcessing"
                    (click)="handleGenerate()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z" />
                    </svg>
                    {{ isProcessing ? 'Processing...' : 'Generate' }}
                </button>
                <button class="reset-btn" [disabled]="isProcessing" (click)="clearPreviousSelection()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg>
                    Clear
                </button>
            </div>
        </div>
    </div>
</div>
















/* Upload Third Column - MODIFIED */
/* Upload Third Column - MODIFIED */
.upload-third {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 20px;
    padding-right: 16px;
    border-right: 1px solid var(--border-color);
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 100%;
    min-height: 100%;
    /* ADD THIS - Forces border to full height */
}

.upload-third::-webkit-scrollbar {
    width: 6px;
}

.upload-third::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.upload-third::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.upload-third::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}

/* Section Header Inline */
.section-header-inline {
    position: sticky;
    top: 0;
    z-index: 10;
    padding: 16px 0;
    border-bottom: 2px solid transparent;
    border-image: linear-gradient(90deg, transparent, var(--primary-color), transparent) 1;
    flex-shrink: 0;
    margin-bottom: 16px;
    background: var(--bg-color);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.section-inline-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0;
    position: relative;
    padding-left: 16px;
}

.section-inline-title::before {
    content: '';
    position: absolute;
    left: 0;
    width: 3px;
    height: 20px;
    background: linear-gradient(180deg, var(--primary-color), #a78bfa);
    border-radius: 2px;
}

/* Mode Toggle Tabs */
.mode-toggle-tabs {
    display: flex;
    gap: 8px;
    padding: 0;
    margin-bottom: 16px;
}

.mode-tab {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    background-color: var(--footer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.3s ease;
    opacity: 0.6;
}

.mode-tab svg {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    transition: all 0.3s ease;
}

.mode-tab:hover {
    opacity: 1;
    border-color: var(--primary-color);
    background-color: var(--bg-color);
}

.mode-tab.active {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-color: var(--primary-color);
    color: white;
    opacity: 1;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.mode-tab.active svg {
    stroke: white;
}

/* Step Indicator */
.step-indicator {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 16px;
    padding: 16px 0;
    margin-bottom: 20px;
}

.step-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
    opacity: 0.4;
    transition: all 0.3s ease;
}

.step-item.active,
.step-item.completed {
    opacity: 1;
}

.step-number {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: var(--footer-bg);
    border: 2px solid var(--border-color);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    transition: all 0.3s ease;
}

.step-item.active .step-number {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-color: var(--primary-color);
    color: white;
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.step-item.completed .step-number {
    background: linear-gradient(135deg, #10b981, #059669);
    border-color: #10b981;
    color: white;
}

.step-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-color);
}

.step-connector {
    flex: 1;
    height: 2px;
    background-color: var(--border-color);
    max-width: 60px;
    transition: all 0.3s ease;
}

.step-connector.active {
    background: linear-gradient(90deg, #10b981, var(--primary-color));
}

/* Upload Content Wrapper */
.upload-content-wrapper {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.upload-fields-container {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

/* File Upload Area */
.upload-area-wrapper {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.upload-area-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 8px;
}

.upload-area-label::before {
    content: 'üìÅ';
    font-size: 15px;
}

.file-upload-zone {
    border: 2px dashed var(--border-color);
    border-radius: 12px;
    padding: 30px 24px;
    text-align: center;
    background-color: var(--bg-color);
    transition: all 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.file-upload-zone.drag-over {
    border-color: var(--primary-color);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(167, 139, 250, 0.05));
}

.file-upload-zone:hover {
    border-color: var(--primary-color);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.02), rgba(167, 139, 250, 0.02));
}

.upload-icon {
    width: 48px;
    height: 48px;
    margin: 0 auto 12px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.upload-icon svg {
    width: 24px;
    height: 24px;
    stroke: var(--primary-color);
}

.upload-title {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    margin: 0 0 6px 0;
}

.upload-subtitle {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.5;
    margin: 0 0 12px 0;
}

.upload-btn-wrapper {
    display: flex;
    justify-content: center;
    position: relative;
    z-index: 1;
}

.browse-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px 20px;
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
}

.browse-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.browse-btn:active {
    transform: translateY(0);
}

.file-input-hidden {
    display: none;
}

.upload-info {
    font-size: 11px;
    color: var(--text-color);
    opacity: 0.5;
    margin: 12px 0 0 0;
}

/* Selected Files List */
.selected-files-list {
    margin-top: 16px;
    padding: 16px;
    background-color: var(--footer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

.selected-files-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid var(--border-color);
}

.selected-files-count {
    font-size: 13px;
    font-weight: 600;
    color: var(--primary-color);
}

.selected-file {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    margin-bottom: 8px;
    transition: all 0.2s ease;
}

.selected-file:last-child {
    margin-bottom: 0;
}

.selected-file svg {
    width: 20px;
    height: 20px;
    stroke: var(--primary-color);
    flex-shrink: 0;
}

.file-name-display {
    flex: 1;
    font-size: 13px;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    font-weight: 500;
}

.file-size {
    font-size: 11px;
    color: var(--text-color);
    opacity: 0.6;
    flex-shrink: 0;
}

.remove-file-btn {
    width: 24px;
    height: 24px;
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s ease;
}

.remove-file-btn:hover {
    background-color: rgba(239, 68, 68, 0.1);
}

.remove-file-btn svg {
    width: 16px;
    height: 16px;
    stroke: #ef4444;
}

/* Uploaded Files Summary */
.uploaded-files-summary {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.summary-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 8px;
}

.summary-label::before {
    content: '‚úÖ';
    font-size: 15px;
}

.summary-files-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
    background-color: var(--footer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

.summary-files-list.radio-selection {
    max-height: 300px;
    overflow-y: auto;
}

.summary-files-list.radio-selection::-webkit-scrollbar {
    width: 6px;
}

.summary-files-list.radio-selection::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.summary-files-list.radio-selection::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.summary-file-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 8px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
}

.summary-file-item.radio-select {
    cursor: pointer;
    transition: all 0.2s ease;
}

.summary-file-item.radio-select:hover {
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.15);
}

.summary-file-item.radio-select.selected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(167, 139, 250, 0.12));
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
}

.summary-file-item svg {
    width: 18px;
    height: 18px;
    stroke: var(--primary-color);
    flex-shrink: 0;
}

.file-name-truncate {
    flex: 1;
    font-size: 13px;
    font-weight: 500;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.summary-file-item.radio-select.selected .file-name-truncate {
    font-weight: 600;
    color: var(--primary-color);
}

/* Radio Button */
.file-radio {
    width: 20px;
    height: 20px;
    border: 2px solid var(--border-color);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.summary-file-item.radio-select.selected .file-radio,
.previous-file-item.selected .file-radio {
    border-color: var(--primary-color);
    background: white;
}

.radio-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    animation: radioPop 0.2s ease;
}

@keyframes radioPop {
    0% {
        transform: scale(0);
    }

    50% {
        transform: scale(1.2);
    }

    100% {
        transform: scale(1);
    }
}

/* Prompts Area */
.prompts-area {
    display: flex;
    flex-direction: column;
}

.prompts-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 8px;
}

.prompts-label::before {
    content: '‚úçÔ∏è';
    font-size: 15px;
}

.prompts-textarea {
    padding: 14px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 14px;
    color: var(--text-color);
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    resize: vertical;
    min-height: 120px;
    transition: all 0.2s ease;
}

.prompts-textarea:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.prompts-textarea::placeholder {
    color: var(--text-color);
    opacity: 0.4;
}

.prompts-hint {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 11px;
    color: var(--text-color);
    opacity: 0.6;
    margin-top: 8px;
}

.prompts-hint svg {
    width: 14px;
    height: 14px;
    flex-shrink: 0;
}

/* Processing Container */
.processing-container {
    padding: 20px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.08), rgba(167, 139, 250, 0.08));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 12px;
    margin-top: 20px;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.processing-header {
    display: flex;
    align-items: center;
    gap: 14px;
    margin-bottom: 16px;
}

.processing-icon-wrapper {
    width: 44px;
    height: 44px;
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {

    0%,
    100% {
        opacity: 1;
        transform: scale(1);
    }

    50% {
        opacity: 0.8;
        transform: scale(1.05);
    }
}

.processing-icon {
    width: 24px;
    height: 24px;
    stroke: white;
    animation: rotate 2s linear infinite;
}

@keyframes rotate {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

.processing-info {
    flex: 1;
    min-width: 0;
}

.processing-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0 0 4px 0;
}

.processing-filename {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.7;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.processing-percentage {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary-color);
    flex-shrink: 0;
}

.progress-bar-container {
    margin-bottom: 12px;
}

.progress-bar-track {
    width: 100%;
    height: 8px;
    background-color: rgba(139, 92, 246, 0.15);
    border-radius: 4px;
    overflow: hidden;
}

.progress-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary-color), #a78bfa, var(--primary-color));
    background-size: 200% 100%;
    border-radius: 4px;
    transition: width 0.3s ease;
    position: relative;
    animation: gradientShift 2s ease infinite;
}

@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.progress-bar-shimmer {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 1.5s infinite;
}

@keyframes shimmer {
    0% {
        left: -100%;
    }

    100% {
        left: 100%;
    }
}

.processing-message {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.7;
    margin: 0;
    text-align: center;
}

/* Action Buttons */
.action-buttons {
    display: flex;
    gap: 12px;
    padding-top: 8px;
}

.generate-btn,
.reset-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}

.generate-btn {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    color: white;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
}

.generate-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
}

.generate-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

.generate-btn svg,
.reset-btn svg {
    width: 16px;
    height: 16px;
}

.reset-btn {
    background-color: var(--footer-bg);
    color: var(--text-color);
    border: 1px solid var(--border-color);
}

.reset-btn:hover {
    background-color: var(--bg-color);
    border-color: var(--primary-color);
}

/* Previous Files Section */
.previous-files-section {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.previous-files-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 8px;
}

.previous-files-label svg {
    width: 18px;
    height: 18px;
    stroke: var(--primary-color);
}

.previous-files-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 300px;
    overflow-y: auto;
    padding: 12px;
    background-color: var(--footer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
}

.previous-files-list::-webkit-scrollbar {
    width: 6px;
}

.previous-files-list::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.previous-files-list::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.previous-file-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
}

.previous-file-item:hover {
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
}

.previous-file-item.selected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(167, 139, 250, 0.12));
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
}

.file-icon {
    width: 18px;
    height: 18px;
    stroke: var(--primary-color);
    flex-shrink: 0;
}

.file-details {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 4px;
    min-width: 0;
}

.file-details .file-name {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.file-details .file-date {
    font-size: 11px;
    color: var(--text-color);
    opacity: 0.6;
}

.no-previous-files {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
    text-align: center;
    background-color: var(--footer-bg);
    border: 1px dashed var(--border-color);
    border-radius: 8px;
}

.no-previous-files svg {
    width: 48px;
    height: 48px;
    stroke: var(--text-color);
    opacity: 0.3;
    margin-bottom: 12px;
}

.no-previous-files p {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    margin: 0 0 4px 0;
}

.no-previous-files small {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.6;
}

/* Status Badge */
.status-badge {
    padding: 2px 6px;
    border-radius: 8px;
    font-size: 9px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.2px;
    flex-shrink: 0;
    transition: all 0.3s ease;
    line-height: 1.2;
}

.status-pending {
    background-color: rgba(156, 163, 175, 0.15);
    color: #6b7280;
    border: 1px solid rgba(156, 163, 175, 0.3);
}

.status-uploading {
    background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(37, 99, 235, 0.15));
    color: #3b82f6;
    border: 1px solid rgba(59, 130, 246, 0.4);
    animation: pulse 1.5s ease-in-out infinite;
}

.status-uploaded {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(5, 150, 105, 0.15));
    color: #10b981;
    border: 1px solid rgba(16, 185, 129, 0.4);
}

.status-error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(220, 38, 38, 0.15));
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.4);
}

.selected-file .remove-file-btn:disabled {
    opacity: 0.3;
    cursor: not-allowed;
}




















import { Component, EventEmitter, Output } from '@angular/core';

interface HistoryItem {
  id: string;
  name: string;
  displayDate: string;
  date: Date;
}

@Component({
  selector: 'app-history',
  templateUrl: './history.component.html',
  styleUrls: ['./history.component.css']
})
export class HistoryComponent {
  @Output() onItemSelect = new EventEmitter<string>();

  showSearchFilter: boolean = false;
  showDateFilter: boolean = false;
  searchQuery: string = '';
  dateFrom: string = '';
  dateTo: string = '';
  selectedHistoryItem: HistoryItem | null = null;

  historyItems: HistoryItem[] = [
    {
      id: 'item1',
      name: 'Machine Learning Lecture 01.mp3',
      displayDate: 'Created on January 28, 2026 at 2:30 PM',
      date: new Date('2026-01-28')
    },
    {
      id: 'item2',
      name: 'Deep Learning Fundamentals.wav',
      displayDate: 'Created on January 27, 2026 at 10:15 AM',
      date: new Date('2026-01-27')
    },
    {
      id: 'item3',
      name: 'Neural Networks Introduction.m4a',
      displayDate: 'Created on January 26, 2026 at 4:45 PM',
      date: new Date('2026-01-26')
    }
  ];

  filteredHistory: HistoryItem[] = [...this.historyItems];

  onHistoryItemClick(itemId: string): void {
    const item = this.historyItems.find(i => i.id === itemId);
    if (item) {
      this.selectedHistoryItem = item;
      this.onItemSelect.emit(itemId);
    }
  }

  filterHistory(): void {
    this.filteredHistory = this.historyItems.filter(item => {
      const matchesSearch = !this.searchQuery ||
        item.name.toLowerCase().includes(this.searchQuery.toLowerCase());

      let matchesDate = true;
      if (this.dateFrom) {
        const fromDate = new Date(this.dateFrom);
        matchesDate = matchesDate && item.date >= fromDate;
      }
      if (this.dateTo) {
        const toDate = new Date(this.dateTo);
        toDate.setHours(23, 59, 59, 999);
        matchesDate = matchesDate && item.date <= toDate;
      }

      return matchesSearch && matchesDate;
    });
  }

  toggleSearchFilter(): void {
    this.showSearchFilter = !this.showSearchFilter;
    if (!this.showSearchFilter) {
      this.clearSearch();
    }
  }

  toggleDateFilter(): void {
    this.showDateFilter = !this.showDateFilter;
    if (!this.showDateFilter) {
      this.clearDateFilter();
    }
  }

  clearSearch(): void {
    this.searchQuery = '';
    this.filterHistory();
  }

  clearDateFilter(): void {
    this.dateFrom = '';
    this.dateTo = '';
    this.filterHistory();
  }

  clearSelection(): void {
    this.selectedHistoryItem = null;
  }

  addHistoryItem(item: HistoryItem): void {
    this.historyItems.unshift(item);
    this.filteredHistory = [...this.historyItems];
  }
}















<div class="history-third">
    <div class="section-header-inline">
        <h3 class="section-inline-title">History</h3>
    </div>
    <div class="history-content-wrapper">
        <div class="filter-section-header">
            <div class="filter-header-left">
                <div class="filter-header-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 01-.659 1.591l-5.432 5.432a2.25 2.25 0 00-.659 1.591v2.927a2.25 2.25 0 01-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 00-.659-1.591L3.659 7.409A2.25 2.25 0 013 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0112 3z" />
                    </svg>
                </div>
                <h3 class="filter-header-title">Filters</h3>
            </div>

            <div class="filter-header-actions">
                <button class="filter-toggle-btn" [class.active]="showSearchFilter" (click)="toggleSearchFilter()"
                    title="Search">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                    </svg>
                    <span>Search</span>
                </button>

                <button class="filter-toggle-btn" [class.active]="showDateFilter" (click)="toggleDateFilter()"
                    title="Date Range">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
                    </svg>
                    <span>Date Range</span>
                </button>
            </div>
        </div>

        <!-- Collapsible Search Filter -->
        <div class="filter-panel" *ngIf="showSearchFilter">
            <div class="search-box">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="search-icon">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                </svg>
                <input type="text" class="search-input" placeholder="Search files..." [(ngModel)]="searchQuery"
                    (input)="filterHistory()">
                <button class="clear-search-btn" *ngIf="searchQuery" (click)="clearSearch()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Collapsible Date Range Filter -->
        <div class="filter-panel" *ngIf="showDateFilter">
            <div class="date-filters-inline">
                <div class="date-input-wrapper">
                    <label class="date-label">From</label>
                    <input type="date" class="date-input" [(ngModel)]="dateFrom" (change)="filterHistory()">
                </div>
                <div class="date-input-wrapper">
                    <label class="date-label">To</label>
                    <input type="date" class="date-input" [(ngModel)]="dateTo" (change)="filterHistory()">
                </div>
                <button class="clear-filter-btn" *ngIf="dateFrom || dateTo" (click)="clearDateFilter()"
                    title="Clear date filter">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                    </svg>
                </button>
            </div>
        </div>

        <div class="content-section-header">
            <div class="content-header-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
                </svg>
            </div>
            <h3 class="content-header-title">History Records</h3>
            <span class="content-count">{{ filteredHistory.length }} files</span>
        </div>

        <!-- History Content -->
        <div class="history-content">
            <div class="no-results" *ngIf="filteredHistory.length === 0">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                </svg>
                <p>No files found matching your criteria</p>
            </div>

            <div class="history-item" *ngFor="let item of filteredHistory"
                [class.selected]="selectedHistoryItem?.id === item.id" (click)="onHistoryItemClick(item.id)">
                <div class="history-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                    </svg>
                </div>
                <div class="history-item-details">
                    <h4 class="history-item-name">{{ item.name }}</h4>
                    <p class="history-item-date">{{ item.displayDate }}</p>
                </div>
                <div class="history-item-checkmark" *ngIf="selectedHistoryItem?.id === item.id">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                    </svg>
                </div>
                <button class="history-item-action" *ngIf="selectedHistoryItem?.id !== item.id"
                    (click)="$event.stopPropagation()">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>

















/* History Third Column */
.history-third {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 0 16px;
    border-right: 1px solid var(--border-color);
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 100%;
    min-height: 100%;
    /* ADD THIS - Forces border to full height */
}

.history-third::-webkit-scrollbar {
    width: 6px;
}

.history-third::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.history-third::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.history-third::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}

/* Section Header Inline */
.section-header-inline {
    position: sticky;
    top: 0;
    z-index: 10;
    padding: 16px 0;
    border-bottom: 2px solid transparent;
    border-image: linear-gradient(90deg, transparent, var(--primary-color), transparent) 1;
    flex-shrink: 0;
    margin-bottom: 16px;
    background: var(--bg-color);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.section-inline-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0;
    position: relative;
    padding-left: 16px;
}

.section-inline-title::before {
    content: '';
    position: absolute;
    left: 0;
    width: 3px;
    height: 20px;
    background: linear-gradient(180deg, var(--primary-color), #a78bfa);
    border-radius: 2px;
}

/* History Content Wrapper */
.history-content-wrapper {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Filter Section Header */
.filter-section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 12px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.06), rgba(167, 139, 250, 0.06));
    border: 1px solid rgba(139, 92, 246, 0.12);
    border-radius: 8px;
    margin-bottom: 12px;
}

.filter-header-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.filter-header-icon {
    width: 28px;
    height: 28px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(167, 139, 250, 0.12));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.filter-header-icon svg {
    width: 14px;
    height: 14px;
    stroke: var(--primary-color);
}

.filter-header-title {
    font-size: 12px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Filter Header Actions */
.filter-header-actions {
    display: flex;
    gap: 6px;
    flex-shrink: 0;
}

.filter-toggle-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 6px;
    font-size: 11px;
    font-weight: 600;
    color: var(--text-color);
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
    white-space: nowrap;
}

.filter-toggle-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
    transition: left 0.5s ease;
}

.filter-toggle-btn:hover {
    border-color: var(--primary-color);
    background-color: var(--footer-bg);
    transform: translateY(-1px);
    box-shadow: 0 2px 6px rgba(139, 92, 246, 0.15);
}

.filter-toggle-btn:hover::before {
    left: 100%;
}

.filter-toggle-btn.active {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    color: white;
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
}

.filter-toggle-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--text-color);
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.filter-toggle-btn.active svg {
    stroke: white;
}

.filter-toggle-btn span {
    font-size: 11px;
    letter-spacing: 0.3px;
}

/* Filter Panel */
.filter-panel {
    margin-bottom: 12px;
    animation: slideDown 0.3s ease;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Search Box */
.search-box {
    position: relative;
    display: flex;
    align-items: center;
}

.search-icon {
    position: absolute;
    left: 12px;
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
    opacity: 0.5;
    pointer-events: none;
}

.search-input {
    width: 100%;
    padding: 10px 40px 10px 40px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 14px;
    color: var(--text-color);
    transition: all 0.2s ease;
}

.search-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.search-input::placeholder {
    color: var(--text-color);
    opacity: 0.4;
}

.clear-search-btn {
    position: absolute;
    right: 8px;
    width: 24px;
    height: 24px;
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
}

.clear-search-btn:hover {
    background-color: var(--footer-bg);
}

.clear-search-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--text-color);
    opacity: 0.6;
}

/* Date Filters Inline */
.date-filters-inline {
    display: flex;
    gap: 8px;
    align-items: flex-end;
}

.date-input-wrapper {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.date-label {
    font-size: 12px;
    font-weight: 600;
    color: var(--text-color);
    opacity: 0.7;
}

.date-input {
    padding: 10px 12px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    font-size: 13px;
    color: var(--text-color);
    transition: all 0.2s ease;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
}

.date-input:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

.date-input::-webkit-calendar-picker-indicator {
    cursor: pointer;
    opacity: 0.6;
    transition: opacity 0.2s ease;
}

.date-input::-webkit-calendar-picker-indicator:hover {
    opacity: 1;
}

.clear-filter-btn {
    width: 40px;
    height: 40px;
    background-color: var(--footer-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.clear-filter-btn:hover {
    background-color: var(--bg-color);
    border-color: var(--primary-color);
}

.clear-filter-btn svg {
    width: 18px;
    height: 18px;
    stroke: var(--text-color);
}

/* Content Section Header */
.content-section-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 16px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.05), rgba(167, 139, 250, 0.05));
    border-left: 3px solid var(--primary-color);
    border-radius: 4px;
    margin-top: 16px;
    margin-bottom: 12px;
}

.content-header-icon {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.content-header-icon svg {
    width: 18px;
    height: 18px;
    stroke: var(--primary-color);
    opacity: 0.8;
}

.content-header-title {
    font-size: 13px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0;
    flex: 1;
}

.content-count {
    font-size: 11px;
    font-weight: 600;
    color: var(--text-color);
    opacity: 0.6;
    padding: 4px 10px;
    background-color: rgba(139, 92, 246, 0.1);
    border-radius: 12px;
}

/* History Content */
.history-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* No Results */
.no-results {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 48px 24px;
    text-align: center;
}

.no-results svg {
    width: 48px;
    height: 48px;
    stroke: var(--text-color);
    opacity: 0.3;
    margin-bottom: 16px;
}

.no-results p {
    font-size: 14px;
    color: var(--text-color);
    opacity: 0.6;
    margin: 0;
}

/* History Item */
.history-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 14px 16px;
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    transition: all 0.2s ease;
    cursor: pointer;
}

.history-item:hover {
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
}

.history-item.selected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(167, 139, 250, 0.12));
    border-color: var(--primary-color);
    box-shadow: 0 4px 16px rgba(139, 92, 246, 0.2);
    transform: translateX(4px);
}

.history-item-icon {
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.history-item.selected .history-item-icon {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-color: var(--primary-color);
}

.history-item-icon svg {
    width: 20px;
    height: 20px;
    stroke: var(--primary-color);
    transition: stroke 0.2s ease;
}

.history-item.selected .history-item-icon svg {
    stroke: white;
}

.history-item-details {
    flex: 1;
    min-width: 0;
}

.history-item-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    margin: 0 0 4px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    transition: color 0.2s ease, font-weight 0.2s ease;
}

.history-item.selected .history-item-name {
    color: var(--primary-color);
    font-weight: 700;
}

.history-item-date {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.6;
    margin: 0;
}

.history-item-checkmark {
    width: 32px;
    height: 32px;
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    animation: scaleIn 0.3s ease;
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);
}

.history-item-checkmark svg {
    width: 18px;
    height: 18px;
    stroke: white;
}

@keyframes scaleIn {
    from {
        opacity: 0;
        transform: scale(0.5);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

.history-item-action {
    width: 32px;
    height: 32px;
    background-color: transparent;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.history-item-action:hover {
    background-color: var(--primary-color);
    border-color: var(--primary-color);
}

.history-item-action svg {
    width: 16px;
    height: 16px;
    stroke: var(--text-color);
    transition: stroke 0.2s ease;
}

.history-item-action:hover svg {
    stroke: white;
}


















import { Component, Input } from '@angular/core';
import { DomSanitizer, SafeHtml } from '@angular/platform-browser';
import { marked } from 'marked';

interface ResultItem {
  id: string;
  title: string;
  icon: string;
  content: string;
  type: 'summary' | 'keywords' | 'questions' | 'custom';
}

interface HistoryItem {
  id: string;
  name: string;
  displayDate: string;
  date: Date;
}

@Component({
  selector: 'app-workspace',
  templateUrl: './workspace.component.html',
  styleUrls: ['./workspace.component.css']
})
export class WorkspaceComponent {
  @Input() selectedHistoryItem: HistoryItem | null = null;
  @Input() resultItems: ResultItem[] = [];

  isDetailOpen = false;
  selectedItemName = '';
  selectedItemDate = '';
  selectedItemContent: SafeHtml = '';
  selectedResultItemId: string = '';

  sampleContent = `
# Machine Learning Fundamentals: A Comprehensive Overview

## Introduction to Machine Learning

Machine learning is a subset of artificial intelligence that focuses on building systems that can **learn from data** and improve their performance over time without being explicitly programmed. This revolutionary approach has transformed various industries and continues to shape our digital future.

### Key Concepts

Machine learning algorithms can be broadly categorized into three main types:

1. **Supervised Learning** - Learning from labeled data
2. **Unsupervised Learning** - Finding patterns in unlabeled data
3. **Reinforcement Learning** - Learning through interaction and feedback

---

## Supervised Learning

Supervised learning is the most common type of machine learning. In this approach, the algorithm learns from a training dataset that includes both input features and corresponding output labels.

### Popular Algorithms

- **Linear Regression** - For predicting continuous values
- **Logistic Regression** - For binary classification problems
- **Decision Trees** - For both regression and classification
- **Random Forests** - Ensemble method using multiple decision trees
- **Support Vector Machines (SVM)** - For classification and regression tasks
- **Neural Networks** - Deep learning models with multiple layers

### Real-World Applications

> "Machine learning is the future of technology, and supervised learning forms the foundation of most practical applications we see today."

Some practical applications include:

- Email spam detection and filtering
- Image recognition and classification
- Medical diagnosis and disease prediction
- Credit risk assessment in banking
- Customer churn prediction
- Fraud detection systems

---

## Conclusion

Machine learning is a powerful tool that continues to evolve and expand its capabilities. Understanding the fundamentals‚Äîfrom basic algorithms to advanced deep learning techniques‚Äîis crucial for developing effective solutions to real-world problems.

*Last Updated: January 28, 2026*

**Remember:** The journey of mastering machine learning is continuous. Keep learning, experimenting, and building!
`;

  constructor(private sanitizer: DomSanitizer) { }

  openDetail(item: ResultItem): void {
    this.selectedItemName = item.title;
    this.selectedItemDate = this.selectedHistoryItem?.displayDate || '';
    this.selectedResultItemId = item.id;

    const htmlContent: any = marked(this.sampleContent);
    this.selectedItemContent = this.sanitizer.bypassSecurityTrustHtml(htmlContent);

    this.isDetailOpen = true;
  }

  closeDetail(): void {
    this.isDetailOpen = false;
    this.selectedResultItemId = '';
  }

  getIconPath(iconType: string): string {
    const icons: { [key: string]: string } = {
      'document': 'M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z',
      'tag': 'M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z M6 6h.008v.008H6V6z',
      'question': 'M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z',
      'lightbulb': 'M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18'
    };
    return icons[iconType] || icons['document'];
  }

  copyToClipboard(content: string): void {
    navigator.clipboard.writeText(content).then(() => {
      console.log('Content copied to clipboard');
    });
  }

  downloadContent(item: ResultItem): void {
    const blob = new Blob([item.content], { type: 'text/plain' });
    const url = window.URL.createObjectURL(blob);
    const link = document.createElement('a');
    link.href = url;
    link.download = `${item.title.replace(/\s+/g, '_')}.txt`;
    link.click();
    window.URL.revokeObjectURL(url);
  }
}

















<div class="workspace-third">
    <div class="workspace-header-inline">
        <div class="workspace-header-content">
            <h3 class="workspace-inline-title">Workspace Result</h3>
            <!-- Selected File Info -->
            <div class="selected-file-info" *ngIf="selectedHistoryItem">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="file-info-icon">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                </svg>
                <span class="file-name">{{ selectedHistoryItem.name }}</span>
                <span class="file-separator">‚Ä¢</span>
                <span class="file-date">{{ selectedHistoryItem.displayDate }}</span>
            </div>
        </div>
    </div>

    <div class="workspace-content-inline">
        <!-- Empty State -->
        <div class="workspace-empty-state" *ngIf="!selectedHistoryItem">
            <div class="empty-state-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
                </svg>
            </div>
            <h3 class="empty-state-title">No Analysis Selected</h3>
            <p class="empty-state-message">
                Select a file from the history to view its analysis results
            </p>
        </div>

        <!-- Dynamic Result Content -->
        <div class="result-content" *ngIf="selectedHistoryItem && resultItems.length > 0">
            <!-- Result Items -->
            <div class="result-item" *ngFor="let item of resultItems"
                [class.selected]="selectedResultItemId === item.id">
                <div class="result-item-header">
                    <div class="result-item-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="getIconPath(item.icon)" />
                        </svg>
                    </div>
                    <div class="result-item-title-section">
                        <h4 class="result-item-title">{{ item.title }}</h4>
                    </div>
                    <!-- Viewing Badge -->
                    <div class="viewing-badge" *ngIf="selectedResultItemId === item.id">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round"
                                d="M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z" />
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>Viewing</span>
                    </div>
                    <div class="result-actions">
                        <button class="result-action-icon-btn" title="Expand" (click)="openDetail(item)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M15.75 4.5H19.5v3.75M19.5 4.5l-5.25 5.25M8.25 19.5H4.5v-3.75M4.5 19.5l5.25-5.25" />
                            </svg>
                        </button>
                        <button class="result-action-icon-btn" title="Copy" (click)="copyToClipboard(item.content)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75" />
                            </svg>
                        </button>
                        <button class="result-action-icon-btn" title="Download" (click)="downloadContent(item)">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round"
                                    d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="result-item-content">
                    <p class="result-text">{{ item.content }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Detail Overlay & Sidebar -->
    <div class="detail-overlay" [class.active]="isDetailOpen" (click)="closeDetail()"></div>
    <div class="detail-sidebar" [class.active]="isDetailOpen">
        <div class="detail-sidebar-header">
            <div class="detail-sidebar-title-section">
                <h3 class="detail-sidebar-title">{{ selectedItemName }}</h3>
                <p class="detail-sidebar-meta">{{ selectedItemDate }}</p>
            </div>
            <button class="detail-close-btn" (click)="closeDetail()">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
        </div>
        <div class="detail-sidebar-content">
            <div class="markdown-content" [innerHTML]="selectedItemContent"></div>
        </div>
    </div>
</div>














/* Workspace Third Column */
.workspace-third {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0;
    padding-left: 16px;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 100%;
    min-height: 100%;
}

.workspace-third::-webkit-scrollbar {
    width: 6px;
}

.workspace-third::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.workspace-third::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.workspace-third::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}

/* Workspace Header Inline */
.workspace-header-inline {
    position: sticky;
    top: 0;
    z-index: 10;
    padding: 16px 0;
    border-bottom: 2px solid transparent;
    border-image: linear-gradient(90deg, transparent, var(--primary-color), transparent) 1;
    flex-shrink: 0;
    margin-bottom: 16px;
    background: var(--bg-color);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.workspace-header-content {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.workspace-inline-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0;
    position: relative;
    padding-left: 16px;
}

.workspace-inline-title::before {
    content: '';
    position: absolute;
    left: 0;
    width: 3px;
    height: 20px;
    background: linear-gradient(180deg, var(--primary-color), #a78bfa);
    border-radius: 2px;
}

/* Selected File Info */
.selected-file-info {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-muted);
    margin-top: 12px;
    padding: 8px 12px;
    background: rgba(139, 92, 246, 0.05);
    border-radius: 8px;
    border: 1px solid rgba(139, 92, 246, 0.1);
}

.file-info-icon {
    width: 14px;
    height: 14px;
    color: var(--primary-color);
    flex-shrink: 0;
}

.file-name {
    font-weight: 600;
    color: var(--text-color);
    max-width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.file-separator {
    color: var(--primary-color);
    font-weight: 600;
}

.file-date {
    color: var(--text-muted);
    font-size: 11px;
}

/* Workspace Content Inline */
.workspace-content-inline {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    /* CHANGE from overflow: visible */
    overflow-x: hidden;
    min-height: 0;
    /* ADD THIS - Allows proper flex shrinking */
}

/* Workspace Empty State */
.workspace-empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    padding: 40px 40px 40px 40px;
    text-align: center;
    min-height: auto;
    max-width: 500px;
    margin: 0 auto;
}

.empty-state-icon {
    width: 80px;
    height: 80px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border: 2px solid rgba(139, 92, 246, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 20px;
    animation: float 3s ease-in-out infinite;
}

.empty-state-icon svg {
    width: 40px;
    height: 40px;
    stroke: var(--primary-color);
    opacity: 0.7;
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0px);
    }

    50% {
        transform: translateY(-10px);
    }
}

.empty-state-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0 0 10px 0;
}

.empty-state-message {
    font-size: 14px;
    color: var(--text-color);
    opacity: 0.7;
    margin: 0 0 20px 0;
    max-width: 320px;
    line-height: 1.6;
}

/* Result Content */
.result-content {
    display: flex;
    flex-direction: column;
    gap: 12px;
    animation: fadeInUp 0.4s ease-out;
    min-height: min-content;
    /* ADD THIS - Prevents unnecessary scrollbar */
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Result Item */
.result-item {
    background-color: var(--bg-color);
    border: 1px solid var(--border-color);
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.2s ease;
}

.result-item:hover {
    border-color: var(--primary-color);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.1);
}

.result-item.selected {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.12), rgba(167, 139, 250, 0.12));
    border-color: var(--primary-color);
    box-shadow: 0 4px 16px rgba(139, 92, 246, 0.2);
    transform: translateX(4px);
}

.result-item.selected .result-item-icon {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-color: var(--primary-color);
}

.result-item.selected .result-item-icon svg {
    stroke: white;
}

.result-item.selected .result-item-title {
    color: var(--primary-color);
    font-weight: 700;
}

.result-item-header {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 14px;
}

.result-item-icon {
    width: 34px;
    height: 34px;
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border: 1px solid rgba(139, 92, 246, 0.2);
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.result-item-icon svg {
    width: 17px;
    height: 17px;
    stroke: var(--primary-color);
    transition: stroke 0.2s ease;
}

.result-item-title-section {
    flex: 1;
    min-width: 0;
}

.result-item-title {
    font-size: 13px;
    font-weight: 600;
    color: var(--text-color);
    margin: 0;
    transition: color 0.2s ease, font-weight 0.2s ease;
}

/* Viewing Badge */
.viewing-badge {
    display: inline-flex;
    align-items: center;
    gap: 5px;
    padding: 3px 10px;
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    color: white;
    box-shadow: 0 2px 6px rgba(139, 92, 246, 0.3);
    animation: fadeInScale 0.3s ease;
    white-space: nowrap;
    flex-shrink: 0;
}

.viewing-badge svg {
    width: 12px;
    height: 12px;
    stroke: white;
    animation: pulseIcon 1.5s ease-in-out infinite;
}

@keyframes fadeInScale {
    from {
        opacity: 0;
        transform: scale(0.8);
    }

    to {
        opacity: 1;
        transform: scale(1);
    }
}

@keyframes pulseIcon {

    0%,
    100% {
        transform: scale(1);
        opacity: 1;
    }

    50% {
        transform: scale(1.15);
        opacity: 0.9;
    }
}

/* Result Actions */
.result-actions {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
}

.result-action-icon-btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.result-action-icon-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.2), transparent);
    transition: left 0.5s ease;
}

.result-action-icon-btn:hover::before {
    left: 100%;
}

.result-action-icon-btn:hover {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(167, 139, 250, 0.1));
    border-color: var(--primary-color);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(139, 92, 246, 0.2);
}

.result-action-icon-btn svg {
    width: 15px;
    height: 15px;
    stroke: var(--text-color);
    opacity: 0.7;
    transition: all 0.3s ease;
}

.result-action-icon-btn:hover svg {
    stroke: var(--primary-color);
    opacity: 1;
    transform: scale(1.1);
}

.result-action-icon-btn:nth-child(1):hover {
    border-color: #3b82f6;
}

.result-action-icon-btn:nth-child(1):hover svg {
    stroke: #3b82f6;
}

.result-action-icon-btn:nth-child(2):hover {
    border-color: #8b5cf6;
}

.result-action-icon-btn:nth-child(2):hover svg {
    stroke: #8b5cf6;
}

.result-action-icon-btn:nth-child(3):hover {
    border-color: #10b981;
}

.result-action-icon-btn:nth-child(3):hover svg {
    stroke: #10b981;
}

.result-item.selected .result-action-icon-btn:first-child {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    border-color: var(--primary-color);
}

.result-item.selected .result-action-icon-btn:first-child svg {
    stroke: white;
    opacity: 1;
}

.result-item-content {
    padding: 6px 14px 12px 60px;
}

.result-text {
    font-size: 13px;
    line-height: 1.6;
    color: var(--text-color);
    margin: 0;
}

/* Detail Overlay & Sidebar */
.detail-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease, visibility 0.3s ease;
}

.detail-overlay.active {
    opacity: 1;
    visibility: visible;
}

.detail-sidebar {
    position: fixed;
    top: 114px;
    left: 84px;
    width: 0;
    height: calc(100vh - 155px);
    background-color: var(--bg-color);
    box-shadow: 4px 0 20px var(--shadow-color);
    z-index: 1001;
    overflow: hidden;
    transition: width 0.3s ease;
    display: flex;
    flex-direction: column;
    border-radius: 8px;
}

.detail-sidebar.active {
    width: calc(50% - 62px);
}

.detail-sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 20px 24px;
    border-bottom: 1px solid var(--border-color);
    background-color: var(--header-bg);
    flex-shrink: 0;
}

.detail-sidebar-title-section {
    flex: 1;
    min-width: 0;
    padding-right: 16px;
}

.detail-sidebar-title {
    font-size: 16px;
    font-weight: 700;
    color: var(--text-color);
    margin: 0 0 4px 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.detail-sidebar-meta {
    font-size: 12px;
    color: var(--text-color);
    opacity: 0.6;
    margin: 0;
}

.detail-close-btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: transparent;
    border: 1px solid var(--border-color);
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.detail-close-btn:hover {
    background-color: var(--footer-bg);
    border-color: var(--primary-color);
}

.detail-close-btn svg {
    width: 16px;
    height: 16px;
    stroke: var(--text-color);
}

.detail-sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: 24px;
}

.detail-sidebar-content::-webkit-scrollbar {
    width: 6px;
}

.detail-sidebar-content::-webkit-scrollbar-track {
    background: rgba(139, 92, 246, 0.05);
    border-radius: 3px;
}

.detail-sidebar-content::-webkit-scrollbar-thumb {
    background-color: rgba(139, 92, 246, 0.3);
    border-radius: 3px;
}

.detail-sidebar-content::-webkit-scrollbar-thumb:hover {
    background-color: var(--primary-color);
}

/* Markdown Content Styles */
.markdown-content {
    line-height: 1.6;
    color: var(--text-color);
}

.markdown-content h1 {
    font-size: 24px;
    font-weight: 700;
    margin: 24px 0 16px 0;
    color: var(--text-color);
    border-bottom: 2px solid var(--border-color);
    padding-bottom: 8px;
}

.markdown-content h2 {
    font-size: 20px;
    font-weight: 700;
    margin: 20px 0 12px 0;
    color: var(--text-color);
}

.markdown-content h3 {
    font-size: 16px;
    font-weight: 700;
    margin: 16px 0 8px 0;
    color: var(--text-color);
}

.markdown-content p {
    margin: 12px 0;
    line-height: 1.6;
}

.markdown-content ul,
.markdown-content ol {
    margin: 12px 0;
    padding-left: 24px;
}

.markdown-content li {
    margin: 6px 0;
}

.markdown-content strong {
    font-weight: 700;
    color: var(--primary-color);
}

.markdown-content em {
    font-style: italic;
}

.markdown-content blockquote {
    border-left: 4px solid var(--primary-color);
    padding-left: 16px;
    margin: 16px 0;
    font-style: italic;
    opacity: 0.8;
}

.markdown-content hr {
    border: none;
    border-top: 1px solid var(--border-color);
    margin: 24px 0;
}

.markdown-content code {
    background-color: var(--footer-bg);
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 0.9em;
    font-family: 'Courier New', monospace;
}

.markdown-content pre {
    background-color: var(--footer-bg);
    padding: 12px;
    border-radius: 8px;
    overflow-x: auto;
    margin: 16px 0;
}

.markdown-content pre code {
    background-color: transparent;
    padding: 0;
}

