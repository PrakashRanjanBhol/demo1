<!-- Approval View - MODIFIED structure -->
<div 
  class="vibe-coding-approval-view" 
  [hidden]="!showApproval"
  @fadeIn>
  
  <!-- Fixed Header -->
  <div class="vibe-coding-approval-header">
    <div class="vibe-coding-approval-title">
      <span class="vibe-coding-approval-icon">{{ getExt(getFileName()) }}</span>
      <div class="vibe-coding-approval-info">
        <h3>{{ getFileName() }}</h3>
        <p *ngIf="getFilePath()">{{ getFilePath() }}</p>
      </div>
      <span class="vibe-coding-approval-badge">{{ approvalData?.tool }}</span>
    </div>
  </div>

  <!-- Scrollable Content Area - NEW wrapper -->
  <div class="vibe-coding-approval-scrollable">
    <div *ngIf="getReason()" class="vibe-coding-reasoning">
      <h4>Reasoning</h4>
      <p>{{ getReason() }}</p>
    </div>

    <div class="vibe-coding-diff-container">
      <div class="vibe-coding-diff-header">
        <span>Changes in {{ getFileName() }}</span>
      </div>
      <div class="vibe-coding-diff-content">
        <pre><code [innerHTML]="diffHtml"></code></pre>
      </div>
    </div>
  </div>

  <!-- Fixed Actions -->
  <div class="vibe-coding-approval-actions">
    <button class="vibe-coding-btn vibe-coding-btn-reject" (click)="reject()" [disabled]="isApproving">✕ Reject</button>
    <button class="vibe-coding-btn vibe-coding-btn-accept" (click)="accept()" [disabled]="isApproving">
      <span *ngIf="!isApproving">✓ Accept & Continue</span>
      <span *ngIf="isApproving" class="vibe-coding-accepting">
        <span class="vibe-coding-spinner-small"></span>
        Accepting...
      </span>
    </button>
  </div>
</div>












/* Approval View - MODIFIED for fixed header/footer */
.vibe-coding-approval-view {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.vibe-coding-approval-header {
  background: var(--vibe-bg-secondary);
  padding: 20px 30px;
  border-bottom: 1px solid var(--vibe-border);
  flex-shrink: 0; /* Fixed - won't scroll */
}

/* NEW: Scrollable wrapper for reasoning + diff */
.vibe-coding-approval-scrollable {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
}

.vibe-coding-approval-scrollable::-webkit-scrollbar {
  width: 8px;
}

.vibe-coding-approval-scrollable::-webkit-scrollbar-track {
  background: transparent;
}

.vibe-coding-approval-scrollable::-webkit-scrollbar-thumb {
  background: var(--vibe-border);
  border-radius: 4px;
}

.vibe-coding-reasoning {
  padding: 20px 30px;
  background: var(--vibe-bg-secondary);
  border-bottom: 1px solid var(--vibe-border);
  /* REMOVED: flex-shrink: 0; */
}

/* Diff Container - MODIFIED */
.vibe-coding-diff-container {
  /* REMOVED: flex: 1; */
  /* REMOVED: overflow: hidden; */
  /* REMOVED: display: flex; */
  /* REMOVED: flex-direction: column; */
  margin: 20px 30px;
  border: 1px solid var(--vibe-border);
  border-radius: 6px;
}

.vibe-coding-diff-header {
  background: var(--vibe-bg-secondary);
  padding: 10px 14px;
  font-weight: 600;
  border-bottom: 1px solid var(--vibe-border);
  color: var(--vibe-text-secondary);
  font-size: 0.8rem;
  /* REMOVED: flex-shrink: 0; */
}

.vibe-coding-diff-content {
  /* REMOVED: flex: 1; */
  /* REMOVED: overflow-y: auto; */
  background: var(--vibe-bg-primary);
}

/* REMOVED: scrollbar styles from diff-content */
/* .vibe-coding-diff-content::-webkit-scrollbar { ... } */

.vibe-coding-diff-content pre {
  margin: 0;
  padding: 0;
  background: transparent;
}

.vibe-coding-diff-content code {
  display: block;
  padding: 0;
  background: transparent;
}

/* Approval Actions - MODIFIED for fixed position */
.vibe-coding-approval-actions {
  display: flex;
  gap: 8px;
  padding: 12px 14px;
  background: var(--vibe-bg-secondary);
  border-top: 1px solid var(--vibe-border);
  justify-content: flex-end;
  flex-shrink: 0; /* Fixed - won't scroll */
}
