applyAccent(accent: string) {
  // Extract colors from gradient
  const colorMatches = accent.match(/#[0-9a-fA-F]{6}/g);
  if (colorMatches && colorMatches.length >= 2) {
    const color1 = colorMatches[0];
    const color2 = colorMatches[1];
    
    // Check if dark mode is active
    const isDarkMode = document.documentElement.getAttribute('data-theme') === 'dark';
    
    // Apply the primary gradient
    document.documentElement.style.setProperty('--primary-gradient', accent);
    document.documentElement.style.setProperty('--primary-gradient-animated', `linear-gradient(90deg, ${color1}, ${color2}, ${color1})`);
    document.documentElement.style.setProperty('--primary-color', color1);
    
    // Convert hex to rgba for variations
    const hexToRgba = (hex: string, alpha: number) => {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    };
    
    // Adjust alpha values based on theme
    // Dark mode uses higher opacity for better visibility
    const alphaMultiplier = isDarkMode ? 1.5 : 1;
    
    // Set gradient variations with theme-aware opacity
    document.documentElement.style.setProperty('--primary-gradient-lighter-start', hexToRgba(color1, 0.02 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-gradient-lighter-end', hexToRgba(color2, 0.02 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-gradient-light-start', hexToRgba(color1, 0.08 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-gradient-light-end', hexToRgba(color2, 0.08 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-gradient-medium-start', hexToRgba(color1, 0.15 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-gradient-medium-end', hexToRgba(color2, 0.15 * alphaMultiplier));
    
    // Set border and shadow variations with theme-aware opacity
    document.documentElement.style.setProperty('--primary-border-color', hexToRgba(color1, 0.2 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-shadow-lighter', hexToRgba(color1, 0.15 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-shadow-light', hexToRgba(color1, 0.2 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-shadow', hexToRgba(color1, 0.3 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-focus-shadow', hexToRgba(color1, 0.1 * alphaMultiplier));
    
    // Set glow effects with theme-aware opacity
    document.documentElement.style.setProperty('--primary-glow-lighter', hexToRgba(color1, 0.1 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-glow-light', hexToRgba(color1, 0.2 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-glow-medium', hexToRgba(color1, 0.3 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-glow-strong', hexToRgba(color1, 0.4 * alphaMultiplier));
    
    // Set scrollbar and progress with theme-aware opacity
    document.documentElement.style.setProperty('--scrollbar-track-bg', hexToRgba(color1, 0.05 * alphaMultiplier));
    document.documentElement.style.setProperty('--scrollbar-thumb-bg', hexToRgba(color1, 0.3 * alphaMultiplier));
    document.documentElement.style.setProperty('--primary-progress-track', hexToRgba(color1, 0.1 * alphaMultiplier));
  }
}










onToggleTheme() {
  this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', this.currentTheme);
  localStorage.setItem('theme', this.currentTheme);
  
  // Reapply accent colors with new theme-aware opacity
  if (this.selectedAccent) {
    this.applyAccent(this.selectedAccent);
  }
}
