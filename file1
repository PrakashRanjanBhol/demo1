// Update the @Output decorator section at the top of the component class:
@Output() onGenerate = new EventEmitter<{ file: any, prompts: string, mode: 'new' }>();
@Output() onFileRemoved = new EventEmitter<{ id: string | number, name: string }>();
@Output() onGenerationComplete = new EventEmitter<{ id: number, status: 'Success' | 'Failed' }>();





// Update the handleGenerationSuccess method:
private handleGenerationSuccess(): void {
  this.processingProgress = 100;
  this.generationStatus = 'success';
  
  // Emit success event to parent with the new format
  this.onGenerationComplete.emit({
    id: Number(this.processingFileId),
    status: 'Success'
  });

  // Emit the original onGenerate event for backward compatibility
  this.onGenerate.emit({
    file: {
      fileId: this.processingFileId,
      fileName: this.processingFileName
    },
    prompts: this.optionalPrompts,
    mode: 'new'
  });

  // Wait a bit to show the success state, then complete
  setTimeout(() => {
    this.completeProcessing();
  }, 2000);
}

// Update the handleGenerationError method:
private handleGenerationError(message: string): void {
  this.generationStatus = 'error';
  this.generationErrorMessage = message;
  this.isProcessing = false;
  this.processingProgress = 0;

  // Emit failure event to parent with the new format
  this.onGenerationComplete.emit({
    id: Number(this.processingFileId),
    status: 'Failed'
  });
}








// In your parent component template:
<app-upload-generate 
  [requestFile]="selectedFile"
  (onGenerate)="handleGenerate($event)"
  (onFileRemoved)="handleFileRemoved($event)"
  (onGenerationComplete)="handleGenerationComplete($event)">
</app-upload-generate>

// In your parent component class:
handleGenerationComplete(event: { id: number, status: 'Success' | 'Failed' }): void {
  console.log('Generation completed:', event);
  
  if (event.status === 'Success') {
    console.log(`File ${event.id} generated successfully`);
    // Handle success - e.g., refresh file list, show success message, etc.
  } else {
    console.log(`File ${event.id} generation failed`);
    // Handle failure - e.g., show error message, allow retry, etc.
  }
}
