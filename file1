export interface UploadResponse {
  status: string;
  data: {
    id: number;
    original_name: string;
    created_at: string;
    summary_prompt: string | null;
    faq_prompt: string | null;
  };
}




// Update the @Output decorator:
@Output() onFileUploaded = new EventEmitter<{ 
  id: number, 
  original_name: string, 
  created_at: string,
  summary_prompt: string | null,
  faq_prompt: string | null
}>();







// Update the uploadFileViaService method:
private uploadFileViaService(fileWithStatus: FileWithStatus): Promise<void> {
  return new Promise((resolve, reject) => {
    const sub = this.uploadGenerateService.uploadFile(fileWithStatus.file).subscribe({
      next: (event: any) => {
        if (event.type === HttpEventType.UploadProgress) {
          if (event.total) {
            fileWithStatus.progress = Math.round((100 * event.loaded) / event.total);
          }
        } else if (event.type === HttpEventType.Response) {
          const response = event.body as UploadResponse;
          if (response.status === 'Success') {
            fileWithStatus.uploadedFileId = response.data.id;
            fileWithStatus.uploadedFileName = response.data.original_name;
            fileWithStatus.uploadedAt = response.data.created_at;
            console.log('Upload successful:', response);
            
            // Emit upload success event to parent
            this.onFileUploaded.emit({
              id: response.data.id,
              original_name: response.data.original_name,
              created_at: response.data.created_at,
              summary_prompt: response.data.summary_prompt,
              faq_prompt: response.data.faq_prompt
            });
            
            resolve();
          } else {
            reject(new Error('Upload failed with status: ' + response.status));
          }
        }
      },
      error: (error) => {
        console.error('Upload error:', error);
        reject(error);
      }
    });
    this.subscriptions.push(sub);
  });
}









// In your parent component class:
handleFileUploaded(event: { 
  id: number, 
  original_name: string, 
  created_at: string,
  summary_prompt: string | null,
  faq_prompt: string | null
}): void {
  console.log('File uploaded successfully:', event);
  
  // Handle the uploaded file
  if (event.summary_prompt) {
    console.log('Summary prompt from upload:', event.summary_prompt);
  }
  
  if (event.faq_prompt) {
    console.log('FAQ prompt from upload:', event.faq_prompt);
  }
  
  // Add to file list, update UI, etc.
}
