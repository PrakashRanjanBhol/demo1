approveAndContinue(): void {
  if (!this.waitingForApproval || !this.currentWriteModifyTool) return;
  
  // DON'T log here - already logged in processSingleTool
  // Just execute/continue
  
  this.currentWriteModifyTool = null;
  this.waitingForApproval = false;
  this.isWaitingForUserApproval = false;
  
  this.triggerUpdate();
  this.processQueue();
}

private processSingleTool(tool: ToolCommand): void {
  try {
    if (!tool.tool) {
      console.warn('Invalid tool object:', tool);
      return;
    }

    switch (tool.tool) {
      case 'READ':
        if (this.onLogCallback) {
          this.onLogCallback(tool);
        }
        break;

      case 'WRITE':
      case 'MODIFY':
        // Log WRITE/MODIFY when detected
        if (this.onLogCallback) {
          this.onLogCallback(tool);
        }
        
        // Then wait for approval
        this.currentWriteModifyTool = tool;
        this.waitingForApproval = true;
        this.isWaitingForUserApproval = true;
        
        this.triggerUpdate();
        break;

      default:
        console.warn('Unknown tool type:', tool.tool);
    }
  } catch (error) {
    console.error('Error processing tool:', tool, error);
  }
}









private processSingleTool(tool: ToolCommand): void {
  try {
    if (!tool.tool) {
      console.warn('Invalid tool object:', tool);
      return;
    }

    switch (tool.tool) {
      case 'READ':
        // Log READ immediately
        if (this.onLogCallback) {
          this.onLogCallback(tool);
        }
        break;

      case 'WRITE':
      case 'MODIFY':
        // DON'T log here - log when user approves
        // Just store and wait for approval
        this.currentWriteModifyTool = tool;
        this.waitingForApproval = true;
        this.isWaitingForUserApproval = true;
        
        this.triggerUpdate();
        break;

      default:
        console.warn('Unknown tool type:', tool.tool);
    }
  } catch (error) {
    console.error('Error processing tool:', tool, error);
  }
}
