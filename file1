// DynamicDataTable.jsx
import React, { useState, useMemo } from 'react';
import { DataTable } from 'primereact/datatable';
import { Column } from 'primereact/column';
import { MultiSelect } from 'primereact/multiselect';
import 'primereact/resources/themes/lara-dark-indigo/theme.css'; // Dark theme
import 'primereact/resources/primereact.min.css';
import 'primeicons/primeicons.css';

const DynamicDataTable = ({ data }) => {
  const [visibleColumns, setVisibleColumns] = useState([]);

  const allColumns = useMemo(() => {
    if (!data || data.length === 0) return [];
    return Object.keys(data[0]).map((key) => ({
      field: key,
      header: key.charAt(0).toUpperCase() + key.slice(1),
    }));
  }, [data]);

  // Initialize visible columns when data is available
  useMemo(() => {
    setVisibleColumns(allColumns);
  }, [allColumns]);

  const onColumnToggle = (e) => {
    setVisibleColumns(e.value);
  };

  return (
    <div className="card" style={{ padding: '1rem' }}>
      <h3 style={{ color: 'white' }}>Dynamic Data Table</h3>

      {/* Column Toggle */}
      <MultiSelect
        value={visibleColumns}
        options={allColumns}
        optionLabel="header"
        onChange={onColumnToggle}
        placeholder="Select Columns"
        display="chip"
        className="mb-3"
      />

      {/* Data Table */}
      <DataTable
        value={data}
        paginator
        rows={5}
        scrollable
        responsiveLayout="scroll"
        stripedRows
        showGridlines
        className="p-datatable-sm"
      >
        {visibleColumns.map((col) => (
          <Column
            key={col.field}
            field={col.field}
            header={col.header}
            sortable
            filter
          />
        ))}
      </DataTable>
    </div>
  );
};

export default DynamicDataTable;




import React from 'react';
import DynamicDataTable from './DynamicDataTable';

const App = () => {
  const data = [
    { product_name: 'abc', price: 100 },
    { product_name: 'def', price: 101 },
    { product_name: 'ijk', price: 102 },
  ];

  return (
    <div style={{ background: '#181818', minHeight: '100vh', padding: '2rem' }}>
      <DynamicDataTable data={data} />
    </div>
  );
};

export default App;










.appContainer {
  background-color: #181818;
  color: #F5F5F5;
  min-height: 100vh;
  padding: 2rem;
  font-family: 'Poppins', sans-serif;
}



.dataTableWrapper :global(.p-datatable) {
  background-color: #1E1E1E;
  color: #F5F5F5;
  border: 1px solid #333333;
}

.dataTableWrapper :global(.p-datatable-thead > tr > th) {
  background-color: #252525;
  color: #F5F5F5;
}

.dataTableWrapper :global(.p-datatable-tbody > tr:hover) {
  background-color: #2A2A2A;
}

.dataTableWrapper :global(.p-datatable-tbody > tr.p-highlight) {
  background-color: #383838;
}

.dataTableWrapper :global(.p-multiselect) {
  background-color: #252525;
  color: #F5F5F5;
  border: 1px solid #333333;
}
