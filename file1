import { Component, OnInit, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';

interface FileItem {
  name: string;
  type: 'file' | 'folder';
  children?: FileItem[];
}

@Component({
  selector: 'app-file-explorer',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './file-explorer.component.html',
  styleUrls: ['./file-explorer.component.css']
})
export class FileExplorerComponent implements OnInit {
  @Input() fileStructure: FileItem[] = [];
  @Input() theme: 'light' | 'dark' = 'light';
  @Output() fileSelected = new EventEmitter<{ name: string; path: string[] }>(); // Add this

  currentPath: string[] = [];
  currentItems: FileItem[] = [];
  selectedFile: string | null = null;

  // ... existing code ...

  // Modified selectFile method
  selectFile(item: FileItem): void {
    if (item.type === 'file') {
      this.selectedFile = item.name;
      // Emit the event with file name and full path
      this.fileSelected.emit({
        name: item.name,
        path: [...this.currentPath, item.name]
      });
    }
  }

  // ... rest of the code ...
}








// In your parent component template:
<app-file-explorer 
  [fileStructure]="fileData" 
  [theme]="currentTheme"
  (fileSelected)="onFileSelected($event)">
</app-file-explorer>

// In your parent component class:
onFileSelected(fileInfo: { name: string; path: string[] }): void {
  console.log('File selected:', fileInfo.name);
  console.log('Full path:', fileInfo.path);
  // Handle the file selection here
}
