export class WorkflowSidebarComponent implements OnInit {
  // ... existing properties ...

  selectedFunctionName: string | null = null;
  selectedActiveWorkflowId: string | null = null; // Add this property
  deletingFunctionName: string | null = null;
  isDeletingInProgress: boolean = false;
  acceptingWorkflowId: number | null = null;
  rejectingWorkflowId: number | null = null;
  runningWorkflowIds: string[] = [];
  stoppingWorkflowIds: string[] = [];

  // ... existing methods ...

  // Add method to select active workflow
  selectActiveWorkflow(workflowId: string): void {
    if (this.selectedActiveWorkflowId === workflowId) {
      this.selectedActiveWorkflowId = null; // Deselect if already selected
    } else {
      this.selectedActiveWorkflowId = workflowId; // Select new workflow (auto-deselects previous)
    }
    console.log('Selected active workflow:', this.selectedActiveWorkflowId);
  }

  // Add method to check if active workflow is selected
  isActiveWorkflowSelected(workflowId: string): boolean {
    return this.selectedActiveWorkflowId === workflowId;
  }

  // ... rest of existing methods ...
}








<!-- Show this when active workflows exist -->
<div *ngIf="activeWorkflows.length > 0">
  <div *ngFor="let workflow of activeWorkflows" class="workflow-item-readonly active-workflow-item"
    (click)="selectActiveWorkflow(workflow.id)">
    <div class="active-workflow-checkbox">
      <input type="checkbox" [checked]="isActiveWorkflowSelected(workflow.id)"
        (click)="$event.stopPropagation()" (change)="selectActiveWorkflow(workflow.id)">
    </div>
    <div class="workflow-info">
      <div class="workflow-name">{{ workflow.name }}</div>
      <div class="workflow-dates">
        <div class="workflow-date">
          <span class="workflow-date-label">Created:</span>
          <span class="date-value">{{ formatDate(workflow.createdAt) }}</span>
        </div>
        <div class="workflow-date">
          <span class="workflow-date-label">Updated:</span>
          <span class="date-value">{{ formatDate(workflow.updatedAt) }}</span>
        </div>
      </div>
    </div>
    <div class="active-workflow-actions">
      <div class="workflow-status-badge running">Running</div>
      <button class="stop-workflow-btn" (click)="stopWorkflow(workflow.id, $event)" 
        title="Stop Workflow" [disabled]="isWorkflowStopping(workflow.id)">
        <!-- Show spinner when stopping -->
        <div class="stop-spinner" *ngIf="isWorkflowStopping(workflow.id)"></div>
        <!-- Show stop icon when not stopping -->
        <svg *ngIf="!isWorkflowStopping(workflow.id)" viewBox="0 0 24 24" fill="currentColor">
          <rect x="6" y="6" width="12" height="12"></rect>
        </svg>
      </button>
    </div>
  </div>
</div>










/* Active workflow item with checkbox */
.active-workflow-item {
    cursor: pointer;
}

.active-workflow-checkbox {
    display: flex;
    align-items: center;
    flex-shrink: 0;
    margin-right: 12px;
}

.active-workflow-checkbox input[type="checkbox"] {
    width: 16px;
    height: 16px;
    cursor: pointer;
    accent-color: var(--agentic-ai-workflow-bg-run-btn);
}

/* Active workflow actions */
.active-workflow-actions {
    display: flex;
    gap: 8px;
    align-items: center;
}
