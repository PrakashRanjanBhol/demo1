// Current file index for navigation
  currentFileIndex: number = 0;



goToNextFile(): void {
    if (this.currentFileIndex < this.files.length - 1) {
      this.currentFileIndex++;
      this.scrollToFile(this.currentFileIndex);
    }
  }

  goToPreviousFile(): void {
    if (this.currentFileIndex > 0) {
      this.currentFileIndex--;
      this.scrollToFile(this.currentFileIndex);
    }
  }

  hasNextFile(): boolean {
    return this.currentFileIndex < this.files.length - 1;
  }

  hasPreviousFile(): boolean {
    return this.currentFileIndex > 0;
  }

  private scrollToFile(index: number): void {
    // Scroll to the file block
    setTimeout(() => {
      const fileBlock = document.querySelectorAll('.code-rag-file-block')[index];
      if (fileBlock) {
        fileBlock.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }, 100);
  }

  setCurrentFileIndex(index: number): void {
    this.currentFileIndex = index;
  }








<!-- File Header -->
        <div class="code-rag-header">
          <div class="code-rag-file-info">
            <span class="code-rag-file-icon">ðŸ“„</span>
            <div class="code-rag-file-name-container">
              <span class="code-rag-file-name">{{ file.file_name }}</span>
              <span class="code-rag-file-badge new" *ngIf="isNewFile(i)">New File</span>
              <div class="code-rag-file-path-header">{{ file.file_path }}</div>
            </div>
          </div>
          
          <!-- File Navigation -->
          <div class="code-rag-file-navigation" *ngIf="files.length > 1">
            <button 
              class="code-rag-nav-btn code-rag-nav-prev" 
              (click)="goToPreviousFile(); setCurrentFileIndex(i)"
              [disabled]="!hasPreviousFile() || i === 0"
              *ngIf="i > 0"
              title="Previous file">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="15 18 9 12 15 6"></polyline>
              </svg>
              <span>Previous</span>
            </button>
            
            <div class="code-rag-file-counter">
              {{ i + 1 }} / {{ files.length }}
            </div>
            
            <button 
              class="code-rag-nav-btn code-rag-nav-next" 
              (click)="goToNextFile(); setCurrentFileIndex(i)"
              [disabled]="!hasNextFile() || i === files.length - 1"
              *ngIf="i < files.length - 1"
              title="Next file">
              <span>Next</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"></polyline>
              </svg>
            </button>
          </div>
          
          <div class="code-rag-stats">
            <div class="code-rag-stat-item code-rag-stat-added">
              <span>++<span>{{ getFileState(i).addedCount }}</span></span>
            </div>
            <div class="code-rag-stat-item code-rag-stat-removed" *ngIf="!isNewFile(i)">
              <span>--<span>{{ getFileState(i).removedCount }}</span></span>
            </div>
          </div>
        </div>










/* ===================================================================
   FILE NAVIGATION
   =================================================================== */

.code-rag-file-navigation {
    display: flex;
    align-items: center;
    gap: 12px;
    margin: 0 20px;
}

.code-rag-file-counter {
    font-size: 13px;
    font-weight: 600;
    color: var(--vibe-coding-text-secondary);
    padding: 0 8px;
    white-space: nowrap;
}

.code-rag-nav-btn {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 6px 12px;
    background: var(--vibe-coding-secondary-bg);
    border: 1px solid var(--vibe-coding-border-primary);
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    color: var(--vibe-coding-text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.code-rag-nav-btn svg {
    width: 14px;
    height: 14px;
    stroke: currentColor;
}

.code-rag-nav-btn:hover:not(:disabled) {
    background: var(--vibe-coding-tertiary-bg);
    border-color: var(--vibe-coding-header-border);
    color: var(--vibe-coding-header-border);
    transform: translateY(-1px);
}

.code-rag-nav-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.code-rag-nav-btn:active:not(:disabled) {
    transform: translateY(0);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .code-rag-header {
        flex-wrap: wrap;
    }

    .code-rag-file-navigation {
        order: 3;
        width: 100%;
        margin: 10px 0 0 0;
        justify-content: center;
    }

    .code-rag-stats {
        order: 2;
    }
}

@media (max-width: 480px) {
    .code-rag-nav-btn span {
        display: none;
    }

    .code-rag-nav-btn {
        padding: 6px 8px;
    }

    .code-rag-file-counter {
        font-size: 12px;
    }
}
