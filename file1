if (this.isInsideBlock && this.currentLang) {
  // Normalize all line endings to "\n"
  const safeLine = line.replace(/\r$/, '');

  switch (this.currentLang) {
    case 'html':
      this.htmlCode += safeLine + '\n';
      break;
    case 'css':
      this.cssCode += safeLine + '\n';
      break;
    case 'js':
    case 'javascript':
      this.jsCode += safeLine + '\n';
      break;
  }
}
