export class WorkflowSidebarComponent implements OnInit {
  // Rename: workflows -> myWorkflows
  myWorkflows: Workflow[] = [
    {
      id: 'workflow-1',
      name: 'Data Sync Workflow',
      description: "Sync data across platforms",
      active: false,
      isArchived: false,
      createdAt: "2024-11-15T09:30:00.000Z",
      updatedAt: "2025-12-28T14:20:15.089Z",
      triggerCount: 0,
      nodeCount: 5,
      nodes: []
    },
    {
      id: 'workflow-4',
      name: 'Slack Notifier',
      description: "Send notifications to Slack",
      active: false,
      isArchived: false,
      createdAt: "2024-12-01T13:20:00.000Z",
      updatedAt: "2025-12-26T18:45:30.089Z",
      triggerCount: 3,
      nodeCount: 4,
      nodes: []
    }
  ];

  // Rename: activeWorkflows -> sharedWorkflows
  sharedWorkflows: Workflow[] = [
    {
      id: 'workflow-2',
      name: 'Email Automation',
      description: "Automated email responses",
      active: true,
      isArchived: false,
      createdAt: "2024-10-20T16:45:30.000Z",
      updatedAt: "2025-12-27T10:15:45.089Z",
      triggerCount: 12,
      nodeCount: 8,
      nodes: []
    },
    {
      id: 'workflow-3',
      name: 'Report Generator',
      description: "Generate weekly reports",
      active: true,
      isArchived: false,
      createdAt: "2024-09-05T08:00:00.000Z",
      updatedAt: "2025-12-29T11:15:24.089Z",
      triggerCount: 45,
      nodeCount: 12,
      nodes: []
    }
  ];

  searchTerm: string = '';
  activeWorkflowId: string = '';
  myWorkflowsCollapsed: boolean = false; // Rename
  sharedWorkflowsCollapsed: boolean = true; // Rename
  isRefreshing: boolean = false;

  ngOnInit(): void {
    // Set first workflow as active by default if workflows exist
    if (this.myWorkflows.length > 0) {
      this.activeWorkflowId = this.myWorkflows[0].id;
    }
  }

  get hasWorkflows(): boolean {
    return this.myWorkflows.length > 0 || this.sharedWorkflows.length > 0;
  }

  getFilteredMyWorkflows(): Workflow[] {
    if (!this.searchTerm) {
      return this.myWorkflows;
    }
    const term = this.searchTerm.toLowerCase();
    return this.myWorkflows.filter(w => w.name.toLowerCase().includes(term));
  }

  // Update toggle method
  toggleSection(section: 'myWorkflows' | 'sharedWorkflows'): void {
    if (section === 'myWorkflows') {
      this.myWorkflowsCollapsed = !this.myWorkflowsCollapsed;
    } else {
      this.sharedWorkflowsCollapsed = !this.sharedWorkflowsCollapsed;
    }
  }

  // Add accept method
  acceptSharedWorkflow(workflowId: string, event: Event): void {
    event.stopPropagation();
    
    // Find the workflow in shared list
    const workflow = this.sharedWorkflows.find(w => w.id === workflowId);
    
    if (workflow) {
      // Remove from shared workflows
      this.sharedWorkflows = this.sharedWorkflows.filter(w => w.id !== workflowId);
      
      // Update workflow status
      workflow.active = false;
      
      // Add to my workflows
      this.myWorkflows.push(workflow);
      
      console.log(`Workflow ${workflowId} accepted and moved to My Workflows`);
      // In production: make API call to accept workflow
    }
  }

  // Add reject method
  rejectSharedWorkflow(workflowId: string, event: Event): void {
    event.stopPropagation();
    
    // Remove from shared workflows
    this.sharedWorkflows = this.sharedWorkflows.filter(w => w.id !== workflowId);
    
    console.log(`Workflow ${workflowId} rejected and removed`);
    // In production: make API call to reject workflow
  }
}















<!-- Workflows Sections -->
<ng-container *ngIf="hasWorkflows && !isRefreshing">
  <!-- My Workflows Tab -->
  <div class="workflow-section">
    <div class="section-header" (click)="toggleSection('myWorkflows')">
      <div class="section-header-left">
        <div class="section-toggle" [class.collapsed]="myWorkflowsCollapsed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </div>
        <div class="section-title">My Workflows</div>
        <div class="section-count">{{ myWorkflows.length }}</div>
      </div>
    </div>
    <div class="section-content" [class.collapsed]="myWorkflowsCollapsed">
      <div class="search-container">
        <input type="text" class="search-input" placeholder="Search workflows..." [(ngModel)]="searchTerm">
      </div>

      <div>
        <div *ngFor="let workflow of getFilteredMyWorkflows(); let i = index" class="workflow-item"
          [class.active]="workflow.id === activeWorkflowId" (click)="executeWorkflow(workflow.id)">
          <div class="workflow-info">
            <div class="workflow-name">{{ workflow.name }}</div>
            <div class="workflow-dates">
              <div class="workflow-date">
                <span class="workflow-date-label">Created:</span>
                <span class="date-value">{{ formatDate(workflow.createdAt) }}</span>
              </div>
              <div class="workflow-date">
                <span class="workflow-date-label">Updated:</span>
                <span class="date-value">{{ formatDate(workflow.updatedAt) }}</span>
              </div>
            </div>
          </div>
          <div class="workflow-actions">
            <button class="run-btn" (click)="runWorkflow(workflow.id, $event)" title="Run Workflow">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </button>
            <button class="share-btn" (click)="shareWorkflow(workflow.id, $event)" title="Share Workflow">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="18" cy="5" r="3"></circle>
                <circle cx="6" cy="12" r="3"></circle>
                <circle cx="18" cy="19" r="3"></circle>
                <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Shared Workflows Tab -->
  <div class="workflow-section">
    <div class="section-header" (click)="toggleSection('sharedWorkflows')">
      <div class="section-header-left">
        <div class="section-toggle" [class.collapsed]="sharedWorkflowsCollapsed">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round">
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </div>
        <div class="section-title">Shared Workflows</div>
        <div class="section-count">{{ sharedWorkflows.length }}</div>
      </div>
    </div>
    <div class="section-content" [class.collapsed]="sharedWorkflowsCollapsed">
      <div>
        <div *ngFor="let workflow of sharedWorkflows" class="workflow-item-readonly">
          <div class="workflow-info">
            <div class="workflow-name">{{ workflow.name }}</div>
            <div class="workflow-dates">
              <div class="workflow-date">
                <span class="workflow-date-label">Created:</span>
                <span class="date-value">{{ formatDate(workflow.createdAt) }}</span>
              </div>
              <div class="workflow-date">
                <span class="workflow-date-label">Updated:</span>
                <span class="date-value">{{ formatDate(workflow.updatedAt) }}</span>
              </div>
            </div>
          </div>
          <div class="workflow-actions">
            <button class="accept-btn" (click)="acceptSharedWorkflow(workflow.id, $event)" title="Accept Workflow">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
            </button>
            <button class="reject-btn" (click)="rejectSharedWorkflow(workflow.id, $event)" title="Reject Workflow">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>





















/* Accept button */
.accept-btn {
    padding: 4px 6px;
    background: #22c55e;
    border: none;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
}

.accept-btn:hover {
    background: #16a34a;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.3);
}

.accept-btn:active {
    transform: translateY(0);
}

.accept-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--agentic-ai-workflow-text-white);
}

/* Reject button */
.reject-btn {
    padding: 4px 6px;
    background: #ef4444;
    border: none;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
    flex-shrink: 0;
}

.reject-btn:hover {
    background: #dc2626;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
}

.reject-btn:active {
    transform: translateY(0);
}

.reject-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--agentic-ai-workflow-text-white);
}
