export interface ParserCallbacks {
  onToolDetected?: (toolData: ToolData) => void;
  onApprovalRequest?: (approvalRequest: ApprovalRequest) => void;
  onCompletion?: () => void;
  onError?: (error: string) => void;
  onFirstChunk?: () => void;  // â† NEW
}





private firstChunkReceived = false;  // â† NEW

this.firstChunkReceived = false;  // â† NEW

const chunk = decoder.decode(value, { stream: true });

// Notify when first chunk is received  â† NEW
if (!this.firstChunkReceived) {
  this.firstChunkReceived = true;
  if (this.callbacks.onFirstChunk) {
    this.callbacks.onFirstChunk();
  }
}


onFirstChunk: () => {
  this.logFirstChunkReceived();  // â† NEW
}

private logFirstChunkReceived(): void {
  console.log('ğŸ“¦ First chunk received from stream');
}
