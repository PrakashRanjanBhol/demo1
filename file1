// Add this decode method
private decodeJSON(encodedString: string): string {
  try {
    const decoded = atob(encodedString); // Decode base64
    return decoded;
  } catch (error) {
    console.error('Error decoding base64:', error);
    return encodedString; // Return original if decode fails
  }
}

// Modify addToolFromStream to decode first
addToolFromStream(input: string): void {
  // Decode the base64 encoded string first
  const decodedInput = this.decodeJSON(input);
  
  const tools = this.parseToolString(decodedInput);
  
  if (tools.length === 0) return;

  this.processingQueue.push(...tools);
  
  if (!this.isProcessing && !this.waitingForApproval) {
    this.processQueue();
  }
}
