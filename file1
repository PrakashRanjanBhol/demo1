export class ChunkedJsonParserComponent implements OnInit {
  // ... existing properties ...
  public isRejectingChanges = false; // ADD THIS

  // MODIFIED rejectChanges method with loading state
  public rejectChanges(): void {
    if (this.currentApprovalRequest && !this.isRejectingChanges) {
      console.log('❌ REJECTED:', this.currentApprovalRequest.data);
      console.log('Continuing with next operation...\n');
      
      // Set loading state
      this.isRejectingChanges = true;
      this.cdr.detectChanges();
      
      // Mark the current tool as rejected in the data
      this.currentApprovalRequest.data.rejected = true;
      
      // Add to executed items with rejected flag BEFORE resetting
      this.executedItems.push(this.currentApprovalRequest.data);
      
      // Process after showing loading state
      setTimeout(() => {
        // Reset approval state
        this.isWaitingForApproval = false;
        this.currentApprovalRequest = null;
        
        // Continue to next operation
        this.parserService.approveAndContinue();
        this.updateLists();
        
        // Reset loading state
        setTimeout(() => {
          this.isRejectingChanges = false;
          this.cdr.detectChanges();
        }, 200);
      }, 400);
    }
  }

  // ... rest of methods ...
}













<!-- Approval Actions - MODIFIED -->
<div class="vibe-coding-approval-actions">
  <button 
    class="vibe-coding-approval-btn vibe-coding-reject" 
    (click)="rejectChanges()"
    [disabled]="isApprovingChanges || isRejectingChanges">
    <span *ngIf="!isRejectingChanges">✕ Reject</span>
    <span *ngIf="isRejectingChanges" class="vibe-coding-rejecting-wrapper">
      <span class="vibe-coding-inline-spinner vibe-coding-reject-spinner"></span>
      Rejecting
    </span>
  </button>
  <button 
    class="vibe-coding-approval-btn vibe-coding-accept" 
    (click)="approveAndContinue()"
    [disabled]="isApprovingChanges || isRejectingChanges">
    <span *ngIf="!isApprovingChanges">✓ Accept & Continue</span>
    <span *ngIf="isApprovingChanges" class="vibe-coding-accepting-wrapper">
      <span class="vibe-coding-inline-spinner"></span>
      Accepting Changes
    </span>
  </button>
</div>












/* Rejecting Changes Inline Spinner */
.vibe-coding-rejecting-wrapper {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.vibe-coding-reject-spinner {
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top: 2px solid white;
}
