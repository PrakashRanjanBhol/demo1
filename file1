<div className={styles.messageWrapper}>
  {/* User Message */}
  <div className={`${styles.messageBlock} ${styles.user}`}>
    <div className={styles.innerBlock}>
      <div className={styles.header}>
        <i className={`pi pi-user ${styles.userIcon}`} />
        <span>You</span>
      </div>
      <div className={styles.messageBody}>{msg.prompt}</div>

      {msg.source && (
        <div className={styles.sourceTag}>
          <i className={`pi ${getPrimeIcon(msg.source.type)}`} />
          <span>{msg.source.name} ({msg.source.type.toUpperCase()})</span>
        </div>
      )}
    </div>
  </div>

  {/* AI Message */}
  <div className={`${styles.messageBlock} ${styles.ai}`}>
    <div className={styles.innerBlock}>
      <div className={styles.header}>
        <i className={`pi pi-robot ${styles.aiIcon}`} />
        <span>AI</span>
      </div>
      <div className={styles.messageBody}>
        {msg.response?.trim() ? (
          <div
            dangerouslySetInnerHTML={{
              __html: DOMPurify.sanitize(marked.parse(msg.response)),
            }}
          />
        ) : (
          <div className={styles.emptyResponse}>
            I couldnâ€™t generate a response
            <span className={styles.dots}><span>.</span><span>.</span><span>.</span></span>
          </div>
        )}
      </div>
    </div>
  </div>
</div>












.messageWrapper {
  display: flex;
  flex-direction: column;
  gap: 24px;
  padding: 16px 12px;
}

.messageBlock {
  max-width: 80%;
  animation: fadeSlide 0.4s ease-in-out;
  border-radius: 14px;
  box-shadow: 0 0 8px rgba(0,0,0,0.2);
}

.innerBlock {
  padding: 14px 18px;
  border-radius: 14px;
}

.user {
  align-self: flex-end;
  background-color: #0d3b7e;
  color: #fff;
}

.ai {
  align-self: flex-start;
  background-color: #242424;
  color: #e0e0e0;
}

.header {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.75rem;
  font-weight: 600;
  color: #bbb;
  margin-bottom: 6px;
}

.messageBody {
  font-size: 0.95rem;
  line-height: 1.6;
  white-space: pre-wrap;
  word-break: break-word;
}

.sourceTag {
  display: flex;
  align-items: center;
  gap: 6px;
  background: #2c2c2c;
  color: #ccc;
  font-size: 0.8rem;
  margin-top: 10px;
  padding: 6px 10px;
  border-radius: 6px;
}

.pi-user, .pi-robot {
  font-size: 1rem;
}

.userIcon {
  color: #81cfff;
}

.aiIcon {
  color: #ffcb6b;
}

.emptyResponse {
  font-style: italic;
  color: #999;
  display: flex;
  align-items: center;
  gap: 6px;
}

.dots span {
  animation: bounce 1s infinite;
  font-size: 1.2rem;
  color: #555;
}

.dots span:nth-child(2) { animation-delay: 0.2s; }
.dots span:nth-child(3) { animation-delay: 0.4s; }

@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: 0.3; }
  40% { transform: translateY(-6px); opacity: 1; }
}

@keyframes fadeSlide {
  from { opacity: 0; transform: translateY(10px) scale(0.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
