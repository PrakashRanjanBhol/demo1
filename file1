<!-- Content Section Header - Only show when not loading -->
<div class="content-section-header" *ngIf="!isLoading">
    <div class="content-header-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 010 3.75H5.625a1.875 1.875 0 010-3.75z" />
        </svg>
    </div>
    <h3 class="content-header-title">History Records</h3>
    <span class="content-count">{{ filteredHistory.length }} files</span>
</div>

<!-- History Content - Only show when not loading and no error -->
<div class="history-content" *ngIf="!isLoading && !error">
    <div class="no-results" *ngIf="filteredHistory.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
        </svg>
        <p>No files found matching your criteria</p>
    </div>

    <div class="history-item" *ngFor="let item of filteredHistory"
        [class.selected]="selectedHistoryItem?.id === item.id"
        [class.not-clickable]="!item.isClickable"
        (click)="onHistoryItemClick(item)">
        <!-- Rest of history item content remains the same -->
        <div class="history-item-icon">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
            </svg>
        </div>
        <div class="history-item-details">
            <div class="history-item-header">
                <h4 class="history-item-name">{{ item.name }}</h4>
                <span class="status-badge" [class]="'badge-' + item.status">
                    {{ item.status === 'not-generated' ? 'Not Generated' : 
                       item.status === 'in-progress' ? 'In Progress' : 'Completed' }}
                </span>
            </div>
            <p class="history-item-date">{{ item.displayDate }}</p>
        </div>
        <div class="history-item-checkmark" *ngIf="selectedHistoryItem?.id === item.id && item.isClickable">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
            </svg>
        </div>
        <button class="history-item-action" *ngIf="selectedHistoryItem?.id !== item.id && item.isClickable"
            (click)="$event.stopPropagation()">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
            </svg>
        </button>
    </div>
</div>
