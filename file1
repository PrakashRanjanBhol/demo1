<!-- Approval Actions - MODIFIED -->
<div class="vibe-coding-approval-actions">
  <button 
    class="vibe-coding-approval-btn vibe-coding-reject" 
    (click)="rejectChanges()"
    [disabled]="isApprovingChanges">
    ✕ Reject
  </button>
  <button 
    class="vibe-coding-approval-btn vibe-coding-accept" 
    (click)="approveAndContinue()"
    [disabled]="isApprovingChanges">
    <span *ngIf="!isApprovingChanges">✓ Accept & Continue</span>
    <span *ngIf="isApprovingChanges" class="vibe-coding-accepting-wrapper">
      <span class="vibe-coding-inline-spinner"></span>
      Accepting Changes
    </span>
  </button>
</div>















export class ChunkedJsonParserComponent implements OnInit {
  public isWaitingForApproval = false;
  public currentApprovalRequest: ApprovalRequest | null = null;
  public isProcessing = false;
  public executedItems: ToolData[] = [];
  public queuedItems: ToolData[] = [];
  public groupedExecutedItems: GroupedItem[] = [];
  public isApprovingChanges = false; // ADD THIS

  constructor(
    private parserService: ChunkedJsonParserService,
    private cdr: ChangeDetectorRef
  ) {}

  // ... existing methods ...

  // MODIFY approveAndContinue method
  public approveAndContinue(): void {
    if (this.currentApprovalRequest && !this.isApprovingChanges) {
      console.log('✅ APPROVED:', this.currentApprovalRequest.data);
      console.log('Continuing with next operation...\n');
      
      // Set loading state
      this.isApprovingChanges = true;
      this.cdr.detectChanges();
      
      // Simulate processing delay (if needed) or call service immediately
      // The service will handle the actual processing
      this.parserService.approveAndContinue();
      
      // Reset states after a short delay to show the "Accepting Changes" state
      setTimeout(() => {
        this.isWaitingForApproval = false;
        this.currentApprovalRequest = null;
        this.isApprovingChanges = false;
        this.updateLists();
      }, 500); // Adjust delay as needed
    }
  }

  // Keep rejectChanges as is - NO CHANGES
  public rejectChanges(): void {
    if (this.currentApprovalRequest) {
      console.log('❌ REJECTED:', this.currentApprovalRequest.data);
      console.log('Continuing with next operation...\n');
      
      // Mark as rejected and continue
      const rejectedData = { ...this.currentApprovalRequest.data, rejected: true };
      
      // Reset approval state
      this.isWaitingForApproval = false;
      this.currentApprovalRequest = null;
      
      this.parserService.approveAndContinue();
      this.updateLists();
    }
  }

  // ... rest of the methods remain the same ...
}















.vibe-coding-approval-actions {
  display: flex;
  gap: 8px; /* CHANGED: from 10px to 8px for more compact */
  padding: 12px 14px; /* CHANGED: reduced padding */
  background: var(--vibe-bg-empty);
  border-top: 1px solid var(--vibe-border-primary);
  justify-content: flex-end; /* ADDED: align buttons to right */
}

.vibe-coding-approval-btn {
  padding: 6px 14px; /* CHANGED: more compact padding */
  border: 1px solid var(--vibe-border-secondary);
  border-radius: 4px;
  font-size: 0.8rem; /* CHANGED: smaller font */
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  background: var(--vibe-bg-primary);
  color: var(--vibe-text-primary);
  white-space: nowrap; /* ADDED: prevent text wrapping */
  min-width: auto; /* CHANGED: remove min-width */
  flex: none; /* CHANGED: don't flex grow */
}

.vibe-coding-approval-btn:hover:not(:disabled) {
  background: var(--vibe-bg-hover);
  transform: translateY(-1px); /* ADDED: subtle lift on hover */
}

.vibe-coding-approval-btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.vibe-coding-approval-btn.vibe-coding-accept {
  background: var(--vibe-accent-green);
  color: white;
  border-color: var(--vibe-accent-green);
}

.vibe-coding-approval-btn.vibe-coding-accept:hover:not(:disabled) {
  background: var(--vibe-accent-green-hover);
}

.vibe-coding-approval-btn.vibe-coding-reject {
  background: var(--vibe-accent-red);
  color: white;
  border-color: var(--vibe-accent-red);
}

.vibe-coding-approval-btn.vibe-coding-reject:hover:not(:disabled) {
  background: var(--vibe-accent-red-hover);
}

/* Accepting Changes Inline Spinner */
.vibe-coding-accepting-wrapper {
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.vibe-coding-inline-spinner {
  width: 12px;
  height: 12px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top: 2px solid white;
  border-radius: 50%;
  animation: vibe-coding-spin 0.8s linear infinite;
  display: inline-block;
}

/* Mobile responsive */
@media (max-width: 768px) {
  .vibe-coding-approval-actions {
    padding: 10px 12px;
    gap: 6px;
  }

  .vibe-coding-approval-btn {
    padding: 5px 12px;
    font-size: 0.75rem;
  }
}
