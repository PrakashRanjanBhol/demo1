<div class="history-item" *ngFor="let item of filteredHistory"
    [class.selected]="selectedHistoryItem?.id === item.id"
    [class.not-clickable]="!item.isClickable"
    (click)="onHistoryItemClick(item)">
    <div class="history-item-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg>
    </div>
    <div class="history-item-details">
        <div class="history-item-header">
            <h4 class="history-item-name">{{ item.name }}</h4>
            <span class="status-badge" [class]="'badge-' + item.status">
                {{ item.status === 'not-generated' ? 'Not Generated' : 
                   item.status === 'in-progress' ? 'In Progress' : 'Completed' }}
            </span>
        </div>
        <p class="history-item-date">{{ item.displayDate }}</p>
    </div>
    
    <!-- Lock icon for non-clickable items -->
    <div class="history-item-lock" *ngIf="!item.isClickable">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round"
                d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
        </svg>
    </div>
    
    <div class="history-item-checkmark" *ngIf="selectedHistoryItem?.id === item.id && item.isClickable">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
        </svg>
    </div>
    <button class="history-item-action" *ngIf="selectedHistoryItem?.id !== item.id && item.isClickable"
        (click)="$event.stopPropagation()">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" />
        </svg>
    </button>
</div>














/* Lock icon for non-clickable items */
.history-item-lock {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.history-item-lock svg {
    width: 20px;
    height: 20px;
    stroke: var(--primary-color);
    opacity: 0.4;
}
