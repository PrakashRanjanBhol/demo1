<div class="vibe-coding-header-right">
  <button class="vibe-coding-btn vibe-coding-btn-primary" (click)="run()" [disabled]="isProcessing">RUN</button>

  <span *ngIf="isProcessing && !isCompleted" class="vibe-coding-badge vibe-coding-badge-processing">
    <span class="vibe-coding-pulse-dot"></span>
    Processing
  </span>

  <span *ngIf="isCompleted" class="vibe-coding-badge vibe-coding-badge-completed">
    <span class="vibe-coding-check-icon">âœ“</span>
    Completed
  </span>

  <!-- MODIFIED: Show spinner before first chunk, then show stop button -->
  <div *ngIf="isProcessing && !isCompleted && !hasFirstChunk" class="vibe-coding-header-spinner">
    <div class="vibe-coding-spinner-header"></div>
  </div>

  <button 
    *ngIf="isProcessing && !isCompleted && hasFirstChunk" 
    class="vibe-coding-btn-stop" 
    (click)="stop()" 
    title="Stop">
    <svg viewBox="0 0 24 24" fill="none">
      <rect x="6" y="6" width="12" height="12" fill="currentColor" rx="2"/>
    </svg>
  </button>
</div>








/* Header Spinner - Shows before first chunk */
.vibe-coding-header-spinner {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
}

.vibe-coding-spinner-header {
  width: 20px;
  height: 20px;
  border: 2px solid var(--vibe-border);
  border-top: 2px solid var(--vibe-blue);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
