switchToTab(tab: 'upload' | 'generate'): void {
    if (this.isUploading && tab === 'generate') return;
    if (this.isProcessing && tab === 'upload') return; // Prevent switching during generation

    // Don't reset if switching to generate tab with an existing file (from parent or locally selected)
    if (tab === 'generate' && (this.requestFile || this.selectedGenerateFile)) {
      this.currentTab = tab;
      return;
    }

    // Reset all data when switching tabs manually
    this.uploadedFilesWithStatus = [];
    this.selectedUploadFile = null;

    // Only reset selectedGenerateFile if not coming from parent
    if (!this.requestFile) {
      this.selectedGenerateFile = null;
    }

    // Only reset prompts if there's no active generate file to preserve
    if (!this.selectedGenerateFile) {
      this.summaryPrompt = '';
      this.faqPrompt = '';
    }
    this.isDragging = false;
    this.isDraggingGenerate = false;
    this.isProcessing = false;
    this.processingProgress = 0;
    this.processingFileName = '';
    this.generationStatus = 'idle';
    this.generationErrorMessage = '';

    this.currentTab = tab;
  }
