// Add new property:
export class AgentsSidebarComponent {
  searchTerm: string = '';
  selectedAgent: string | null = null;
  showSearch: boolean = false;
  isAdkExpanded: boolean = true;
  isArtifactsExpanded: boolean = true;
  selectedArtifact: string | null = null;
  artifactVersions: ArtifactVersion[] = [];
  loadingVersions: boolean = false;
  loadingArtifacts: boolean = false;
  downloadingVersion: number | null = null; // Add this

  // ... existing code ...

  // Update the downloadArtifact method:
  downloadArtifact(artifactName: string, version: ArtifactVersion): void {
    this.downloadingVersion = version.version;
    
    // Replace with your actual download endpoint
    const downloadUrl = `https://your-api.com/artifacts/${encodeURIComponent(artifactName)}/versions/${version.version}/download`;
    
    this.http.get(downloadUrl, { responseType: 'blob' }).subscribe({
      next: (blob) => {
        // Create a download link
        const url = window.URL.createObjectURL(blob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `${artifactName}-v${version.version}`;
        link.click();
        window.URL.revokeObjectURL(url);
        this.downloadingVersion = null;
      },
      error: (error) => {
        console.error('Error downloading artifact:', error);
        this.downloadingVersion = null;
        alert('Failed to download artifact');
      }
    });
  }
}








<!-- Update the download button section: -->
<div *ngIf="!loadingVersions && artifactVersions.length > 0" class="versions-list">
  <div class="version-item" *ngFor="let version of artifactVersions">
    <div class="version-info">
      <span class="version-name">Version {{ version.version }}</span>
    </div>
    <button 
      class="download-btn" 
      [disabled]="downloadingVersion === version.version"
      (click)="downloadArtifact(artifact, version); $event.stopPropagation()"
    >
      <div *ngIf="downloadingVersion === version.version" class="btn-spinner"></div>
      <svg *ngIf="downloadingVersion !== version.version" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
      </svg>
    </button>
  </div>
</div>












/* Update .download-btn: */
.download-btn {
    background: transparent;
    border: 1px solid var(--adk-agents-border);
    border-radius: 6px;
    padding: 6px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--adk-agents-text-primary);
    transition: all 0.2s;
}

.download-btn:disabled {
    cursor: not-allowed;
    opacity: 0.6;
}

.download-btn:not(:disabled):hover {
    background: #667eea;
    border-color: #667eea;
    color: white;
}

/* Add new style for button spinner: */
.btn-spinner {
    width: 16px;
    height: 16px;
    border: 2px solid var(--adk-agents-border);
    border-top-color: #667eea;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}
