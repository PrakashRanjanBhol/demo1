import { Request, Response, NextFunction } from 'express';  
import type { AuthenticatedRequest } from '@n8n/db';  
import { Container } from '@n8n/di';  
import { AuthService } from '@/auth/auth.service';  
  
export async function customWorkflowAuthMiddleware(  
	req: AuthenticatedRequest, // Use AuthenticatedRequest type  
	res: Response,  
	next: NextFunction,  
) {  
	const workflowId = req.params.workflowId;  
	  
	// Check if user is already authenticated  
	if (req.user) { // Now TypeScript knows req.user exists  
		return next();  
	}  
	  
	// ... rest of your logic  
}
