npm install diff



import * as Diff from 'diff';



generateDiffString(file: FileData): string {
  // Join lines with newline to create full text
  const oldText = file.old_lines.join('\n');
  const newText = file.new_lines.join('\n');
  
  // Use the diff library to generate a proper unified diff
  const patch = Diff.createPatch(
    file.file_path,
    oldText,
    newText,
    'a/' + file.file_path,
    'b/' + file.file_path
  );
  
  return patch;
}
