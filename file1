 code = code.replace(/subgraph\s+([^\n]+?)\s*\((.*?)\)/g, (match, id, label) => {
        // Generate a safe ID by removing spaces & parentheses
        const safeId = id.replace(/\s+/g, '_').replace(/[()]/g, '');
        return `subgraph ${safeId} [${id.trim()} (${label.trim()})]`;
    });
