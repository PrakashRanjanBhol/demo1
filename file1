/components
  ImagePreviewGrid.jsx
  FullImageScrollModal.jsx
/api
  imageService.js
/styles
  ImagePreviewGrid.module.css
  FullImageScrollModal.module.css



// /api/imageService.js
export const fetchImages = async (start = 0, limit = 20) => {
  await new Promise((res) => setTimeout(res, 500)); // simulate delay
  return Array.from({ length: limit }, (_, i) => ({
    img_path: `https://picsum.photos/seed/${start + i}/300/200`,
  }));
};




// /components/ImagePreviewGrid.jsx
import React, { useEffect, useState } from 'react';
import { Dialog } from 'primereact/dialog';
import { Button } from 'primereact/button';
import { fetchImages } from '../api/imageService';
import FullImageScrollModal from './FullImageScrollModal';
import styles from '../styles/ImagePreviewGrid.module.css';

const ImagePreviewGrid = () => {
  const [images, setImages] = useState([]);
  const [previewImage, setPreviewImage] = useState(null);
  const [showAll, setShowAll] = useState(false);

  useEffect(() => {
    const loadInitialImages = async () => {
      const result = await fetchImages(0, 30); // preload first 30
      setImages(result);
    };
    loadInitialImages();
  }, []);

  const firstTen = images.slice(0, 10);
  const remainingCount = images.length - 10;

  return (
    <div>
      <div className={styles.grid}>
        {firstTen.map((img, idx) => (
          <img
            key={idx}
            src={img.img_path}
            alt="img"
            className={styles.thumb}
            onClick={() => setPreviewImage(img.img_path)}
          />
        ))}
        {remainingCount > 0 && (
          <Button
            label={`+${remainingCount} More Images`}
            className={`p-button-sm p-button-secondary ${styles.moreButton}`}
            onClick={() => setShowAll(true)}
          />
        )}
      </div>

      <Dialog
        header="Image Preview"
        visible={!!previewImage}
        onHide={() => setPreviewImage(null)}
        style={{ width: '50vw' }}
        modal
      >
        <img src={previewImage} alt="preview" style={{ width: '100%' }} />
      </Dialog>

      <FullImageScrollModal
        visible={showAll}
        onHide={() => setShowAll(false)}
      />
    </div>
  );
};

export default ImagePreviewGrid;





// /components/FullImageScrollModal.jsx
import React, { useEffect, useState } from 'react';
import { Dialog } from 'primereact/dialog';
import { fetchImages } from '../api/imageService';
import styles from '../styles/FullImageScrollModal.module.css';

const FullImageScrollModal = ({ visible, onHide }) => {
  const [images, setImages] = useState([]);
  const [pagination, setPagination] = useState({ first: 0, rows: 20 });
  const [loading, setLoading] = useState(false);

  const loadImages = async () => {
    setLoading(true);
    const result = await fetchImages(pagination.first, pagination.rows);
    setImages((prev) => [...prev, ...result]);
    setLoading(false);
  };

  useEffect(() => {
    if (visible) {
      setImages([]);
      setPagination({ first: 0, rows: 20 });
    }
  }, [visible]);

  useEffect(() => {
    if (visible) loadImages();
  }, [pagination, visible]);

  const handleScroll = (e) => {
    const el = e.target;
    if (el.scrollTop + el.clientHeight >= el.scrollHeight - 20 && !loading) {
      setPagination((prev) => ({
        first: prev.first + prev.rows,
        rows: prev.rows,
      }));
    }
  };

  return (
    <Dialog
      header="All Images"
      visible={visible}
      onHide={onHide}
      modal
      style={{ width: '70vw', maxHeight: '80vh' }}
    >
      <div className={styles.scrollContainer} onScroll={handleScroll}>
        <div className={styles.grid}>
          {images.map((img, idx) => (
            <img key={idx} src={img.img_path} alt="img" className={styles.thumb} />
          ))}
        </div>
        {loading && <p className={styles.loading}>Loading more images...</p>}
      </div>
    </Dialog>
  );
};

export default FullImageScrollModal;













.grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

.thumb {
  width: 120px;
  height: 80px;
  object-fit: cover;
  border-radius: 8px;
  cursor: pointer;
}

.moreButton {
  height: 80px;
  min-width: 120px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
}





.scrollContainer {
  height: 60vh;
  overflow-y: auto;
  padding: 10px;
}

.grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.thumb {
  width: 140px;
  height: 100px;
  object-fit: cover;
  border-radius: 6px;
}

.loading {
  text-align: center;
  margin-top: 10px;
  font-style: italic;
  color: gray;
}









