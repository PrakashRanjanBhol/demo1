/* Code line wrapping - Bitbucket style */
.pr-review-container ::ng-deep .d2h-code-line-ctn,
.pr-review-container ::ng-deep .d2h-code-side-line-ctn {
    color: var(--bitbucket-file-comparator-text-primary) !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
}

/* Ensure code cells allow wrapping */
.pr-review-container ::ng-deep .d2h-code-line,
.pr-review-container ::ng-deep .d2h-code-side-line {
    background-color: var(--bitbucket-file-comparator-bg-primary) !important;
    color: var(--bitbucket-file-comparator-text-primary) !important;
    width: auto;
    overflow: visible !important;
}

/* Make line number cells stick to content */
.pr-review-container ::ng-deep .d2h-code-linenumber,
.pr-review-container ::ng-deep .d2h-code-side-linenumber {
    background-color: var(--bitbucket-file-comparator-bg-tertiary) !important;
    border-color: var(--bitbucket-file-comparator-border-primary) !important;
    color: var(--bitbucket-file-comparator-text-secondary) !important;
    width: 1%;
    min-width: 50px;
    white-space: nowrap;
    text-align: right;
    padding-right: 10px;
    vertical-align: top !important; /* Align to top when content wraps */
}

/* Remove horizontal scroll on diff wrapper */
.pr-review-container ::ng-deep .d2h-wrapper {
    border: none !important;
    overflow-x: visible !important;
    max-width: 100%;
}

/* Ensure table doesn't force horizontal scroll */
.pr-review-container ::ng-deep .d2h-diff-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: auto;
    word-break: break-word;
}

/* Handle long strings in code */
.pr-review-container ::ng-deep .d2h-code-line-ctn code,
.pr-review-container ::ng-deep .d2h-code-side-line-ctn code {
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
}

/* For very long unbreakable strings (like URLs), allow breaking anywhere */
.pr-review-container ::ng-deep .d2h-code-line-ctn,
.pr-review-container ::ng-deep .d2h-code-side-line-ctn {
    max-width: 100%;
    overflow-wrap: anywhere !important;
}

/* Side-by-side mode specific wrapping */
.pr-review-container ::ng-deep .d2h-file-side-diff .d2h-code-side-line {
    max-width: 50vw;
    overflow: visible !important;
}

.pr-review-container ::ng-deep .d2h-file-side-diff td {
    overflow: visible !important;
}

/* Maintain proper indentation when wrapping */
.pr-review-container ::ng-deep .d2h-code-line-ctn,
.pr-review-container ::ng-deep .d2h-code-side-line-ctn {
    padding-left: 8px !important;
    padding-right: 8px !important;
    text-indent: 0 !important;
    display: block;
}

/* Better wrapping for inline changes (ins/del tags) */
.pr-review-container ::ng-deep .d2h-code-line ins,
.pr-review-container ::ng-deep .d2h-code-side-line ins,
.pr-review-container ::ng-deep .d2h-code-line del,
.pr-review-container ::ng-deep .d2h-code-side-line del {
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
}

/* Preserve indentation in wrapped lines */
.pr-review-container ::ng-deep .d2h-code-line-prefix {
    display: inline;
    padding-right: 4px;
}












.diff-container {
    padding: 0;
    position: relative;
    overflow: hidden;
    width: 100%;
    max-width: 100%;
}

/* Prevent file section from creating horizontal scroll */
.file-section {
    overflow: hidden;
    width: 100%;
    max-width: 100%;
}
