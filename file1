export class WorkflowSidebarComponent implements OnInit {
  // ... existing properties ...

  selectedFunctionName: string | null = null;
  deletingFunctionName: string | null = null;
  isDeletingInProgress: boolean = false; // Add this property

  // ... existing methods ...

  // Update confirm delete method
  confirmDeleteFunction(functionName: string, event: Event): void {
    event.stopPropagation();
    
    // Set deleting in progress
    this.isDeletingInProgress = true;
    
    // Simulate API call with delay
    setTimeout(() => {
      // Remove function from array
      this.functions = this.functions.filter(f => f.function_name !== functionName);
      
      // Clear deleting state
      this.deletingFunctionName = null;
      this.isDeletingInProgress = false;
      
      // Clear selection if this function was selected
      if (this.selectedFunctionName === functionName) {
        this.selectedFunctionName = null;
      }
      
      console.log('Function deleted:', functionName);
      // In production: make API call to delete function
    }, 2000); // 2 second delay to simulate API call
  }

  // ... rest of existing methods ...
}







<!-- Delete confirmation mode: Confirm and Cancel buttons -->
<div class="function-delete-actions" *ngIf="isFunctionDeleting(func.function_name)">
  <button class="confirm-delete-btn" (click)="confirmDeleteFunction(func.function_name, $event)"
    title="Confirm Delete" [disabled]="isDeletingInProgress">
    <!-- Show spinner when deleting -->
    <div class="delete-spinner" *ngIf="isDeletingInProgress"></div>
    <!-- Show checkmark when not deleting -->
    <svg *ngIf="!isDeletingInProgress" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
      stroke-linecap="round" stroke-linejoin="round">
      <polyline points="20 6 9 17 4 12"></polyline>
    </svg>
  </button>
  <button class="cancel-delete-btn" (click)="cancelDeleteFunction($event)" title="Cancel Delete"
    [disabled]="isDeletingInProgress">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
      stroke-linejoin="round">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </button>
</div>














/* Delete confirmation actions */
.function-delete-actions {
    display: flex;
    gap: 6px;
    align-items: center;
}

.confirm-delete-btn,
.cancel-delete-btn {
    padding: 4px 6px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.confirm-delete-btn {
    background: var(--agentic-ai-workflow-bg-confirm-delete);
    border: none;
}

.confirm-delete-btn:hover:not(:disabled) {
    background: var(--agentic-ai-workflow-bg-confirm-delete-hover);
    transform: translateY(-1px);
}

.confirm-delete-btn:active:not(:disabled) {
    transform: translateY(0);
}

.confirm-delete-btn:disabled {
    cursor: not-allowed;
    opacity: 0.8;
}

.confirm-delete-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--agentic-ai-workflow-text-white);
}

.cancel-delete-btn {
    background: var(--agentic-ai-workflow-bg-button);
    border: 1px solid var(--agentic-ai-workflow-border-primary);
}

.cancel-delete-btn:hover:not(:disabled) {
    background: var(--agentic-ai-workflow-bg-button-hover);
    transform: translateY(-1px);
}

.cancel-delete-btn:active:not(:disabled) {
    transform: translateY(0);
}

.cancel-delete-btn:disabled {
    cursor: not-allowed;
    opacity: 0.5;
}

.cancel-delete-btn svg {
    width: 14px;
    height: 14px;
    stroke: var(--agentic-ai-workflow-text-secondary);
}

/* Delete spinner */
.delete-spinner {
    width: 14px;
    height: 14px;
    border: 2px solid rgba(255, 255, 255, 0.3);
    border-top: 2px solid var(--agentic-ai-workflow-text-white);
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
}

@keyframes spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}
