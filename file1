<!-- Updated Header Section - Replace the entire .header div -->

<div class="header">
  <!-- Repo Info Section -->
  <div class="repo-info-section">
    <div class="project-name">
      <svg class="project-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
      </svg>
      <span class="project-name-text">{{ projectName }}</span>
    </div>
    <div class="repo-name">
      <svg class="repo-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"></path>
      </svg>
      <span class="repo-name-text">{{ repoName }}</span>
    </div>
    <div class="date-period" *ngIf="appliedStartDate || appliedEndDate">
      <svg class="period-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      <span class="period-text">
        {{ formatDisplayDate(appliedStartDate) }} - {{ formatDisplayDate(appliedEndDate) }}
      </span>
    </div>
  </div>

  <!-- Header Top with Title and Filter Toggle -->
  <div class="header-top">
    <h2>Pull Requests</h2>
    <button class="filter-toggle-btn" (click)="toggleFilters()" [class.active]="showFilters">
      <svg class="filter-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"></path>
      </svg>
      <span>{{ showFilters ? 'Hide' : 'Show' }} Filters</span>
      <svg class="chevron-icon" [class.rotate]="showFilters" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </button>
  </div>

  <!-- Filters Container -->
  <div class="filters-container" [class.expanded]="showFilters">
    <div class="filters-content">
      <div class="search-box">
        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
        </svg>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Search PRs..." 
          [(ngModel)]="searchQuery"
          (input)="handleSearch()">
      </div>

      <!-- Date Range Picker Section -->
      <div class="date-range-section">
        <label class="filter-label">
          <svg class="label-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
          </svg>
          Date Range
        </label>
        <div class="date-range-inputs">
          <div class="date-input-wrapper">
            <input 
              type="date" 
              class="date-input" 
              [(ngModel)]="startDate"
              [max]="endDate || undefined">
          </div>
          <span class="date-separator">to</span>
          <div class="date-input-wrapper">
            <input 
              type="date" 
              class="date-input" 
              [(ngModel)]="endDate"
              [min]="startDate || undefined">
          </div>
        </div>
        <div class="date-actions">
          <button 
            class="apply-dates-btn" 
            [disabled]="!startDate && !endDate"
            (click)="applyDateFilter()">
            <svg class="apply-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            Apply
          </button>
          <button 
            class="clear-dates-btn" 
            *ngIf="startDate || endDate"
            (click)="clearDateRange()">
            <svg class="clear-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
            Clear
          </button>
        </div>
      </div>

      <div class="sort-controls">
        <div class="sort-tabs">
          <button 
            class="sort-btn"
            [class.active]="currentSort === 'status'"
            (click)="sortPRs('status')">
            <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
            <span>Status</span>
          </button>
          <button 
            class="sort-btn"
            [class.active]="currentSort === 'activity'"
            (click)="sortPRs('activity')">
            <svg class="sort-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
            </svg>
            <span>Activity</span>
          </button>
        </div>

        <div class="order-controls">
          <!-- Status Order Controls -->
          <ng-container *ngIf="currentSort === 'status'">
            <button 
              class="order-btn"
              [class.active]="currentOrder === 'open'"
              (click)="setStatusOrder('open')">
              <svg class="order-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6-2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
              </svg>
              <span>Open</span>
            </button>
            <button 
              class="order-btn"
              [class.active]="currentOrder === 'merged'"
              (click)="setStatusOrder('merged')">
              <svg class="order-icon" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
              <span>Merged</span>
            </button>
          </ng-container>

          <!-- Activity Order Controls -->
          <ng-container *ngIf="currentSort === 'activity'">
            <button 
              class="order-btn"
              [class.active]="activityOrder === 'asc'"
              (click)="setActivityOrder('asc')">
              <svg class="order-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h9m5-4v12m0 0l-4-4m4 4l4-4"></path>
              </svg>
              <span>Low → High</span>
            </button>
            <button 
              class="order-btn"
              [class.active]="activityOrder === 'desc'"
              (click)="setActivityOrder('desc')">
              <svg class="order-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12"></path>
              </svg>
              <span>High → Low</span>
            </button>
          </ng-container>
        </div>
      </div>
    </div>
  </div>
</div>












/* Updated CSS for Project Name, Repo Name and Date Range Section */

.header {
  margin-bottom: 20px;
}

/* Repo Info Section */
.repo-info-section {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 14px;
  background: var(--bitbucket-prs-bg-tertiary);
  border: 1px solid var(--bitbucket-prs-border-primary);
  border-radius: 8px;
  margin-bottom: 12px;
}

/* Project Name */
.project-name {
  display: flex;
  align-items: center;
  gap: 8px;
}

.project-icon {
  width: 20px;
  height: 20px;
  color: var(--bitbucket-prs-accent-primary);
  flex-shrink: 0;
}

.project-name-text {
  font-size: 15px;
  font-weight: 700;
  color: var(--bitbucket-prs-text-primary);
  line-height: 1.4;
  letter-spacing: 0.3px;
}

/* Repo Name */
.repo-name {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-left: 28px; /* Indent to show hierarchy */
}

.repo-icon {
  width: 16px;
  height: 16px;
  color: var(--bitbucket-prs-text-tertiary);
  flex-shrink: 0;
}

.repo-name-text {
  font-size: 13px;
  font-weight: 600;
  color: var(--bitbucket-prs-text-secondary);
  line-height: 1.4;
}

/* Date Period */
.date-period {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bitbucket-prs-bg-secondary);
  border: 1px solid var(--bitbucket-prs-border-primary);
  border-radius: 6px;
  margin-top: 2px;
}

.period-icon {
  width: 14px;
  height: 14px;
  color: var(--bitbucket-prs-text-tertiary);
  flex-shrink: 0;
}

.period-text {
  font-size: 11px;
  font-weight: 500;
  color: var(--bitbucket-prs-text-tertiary);
  font-family: monospace;
  letter-spacing: 0.3px;
}

/* Header Top */
.header-top {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.header h2 {
  font-size: 18px;
  font-weight: 600;
  color: var(--bitbucket-prs-text-primary);
  margin-bottom: 0;
}

.filter-toggle-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 12px;
  background: var(--bitbucket-prs-bg-tertiary);
  border: 1px solid var(--bitbucket-prs-border-primary);
  border-radius: 6px;
  color: var(--bitbucket-prs-text-tertiary);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  outline: none;
}

.filter-toggle-btn:hover {
  background: var(--bitbucket-prs-bg-hover);
  border-color: var(--bitbucket-prs-border-secondary);
  color: var(--bitbucket-prs-text-secondary);
}

.filter-toggle-btn.active {
  background: var(--bitbucket-prs-accent-gradient);
  border-color: transparent;
  color: #fff;
}

.filter-icon {
  width: 16px;
  height: 16px;
}

.chevron-icon {
  width: 14px;
  height: 14px;
  transition: transform 0.3s ease;
}

.chevron-icon.rotate {
  transform: rotate(180deg);
}

/* Filters Container */
.filters-container {
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  opacity: 0;
}

.filters-container.expanded {
  max-height: 500px;
  opacity: 1;
}

.filters-content {
  padding: 12px;
  background: var(--bitbucket-prs-bg-tertiary);
  border: 1px solid var(--bitbucket-prs-border-primary);
  border-radius: 8px;
  margin-bottom: 4px;
}

/* Responsive adjustments */
@media (max-width: 320px) {
  .project-name-text {
    font-size: 14px;
  }
  
  .repo-name-text {
    font-size: 12px;
  }
  
  .repo-name {
    padding-left: 24px;
  }
  
  .period-text {
    font-size: 10px;
  }
}
















// Add these properties to your component class

export class PrSidebarComponent implements OnInit {
  // ... existing properties ...
  
  // Project and Repository information
  projectName: string = 'Enterprise Platform'; // Set your project name here
  repoName: string = 'backend-api-service'; // Set your repository name here
  
  // Date range properties
  startDate: string = '';
  endDate: string = '';
  appliedStartDate: string = '';
  appliedEndDate: string = '';

  // ... existing methods ...

  ngOnInit(): void {
    // Set initial date range (3 months ago to today)
    this.initializeDateRange();
    this.updatePRList();
  }

  // Initialize date range with last 3 months
  private initializeDateRange(): void {
    const today = new Date();
    const threeMonthsAgo = new Date();
    threeMonthsAgo.setMonth(today.getMonth() - 3);

    // Format dates to YYYY-MM-DD for HTML5 date input
    this.endDate = this.formatDateToYYYYMMDD(today);
    this.startDate = this.formatDateToYYYYMMDD(threeMonthsAgo);
    
    // Apply the initial date filter
    this.appliedStartDate = this.startDate;
    this.appliedEndDate = this.endDate;
  }

  // Format date to YYYY-MM-DD
  private formatDateToYYYYMMDD(date: Date): string {
    const year = date.getFullYear();
    const month = String(date.getMonth() + 1).padStart(2, '0');
    const day = String(date.getDate()).padStart(2, '0');
    return `${year}-${month}-${day}`;
  }

  // Format date for display (DD-MM-YYYY)
  formatDisplayDate(dateString: string): string {
    if (!dateString) return '';
    const [year, month, day] = dateString.split('-');
    return `${day}-${month}-${year}`;
  }

  applyDateFilter(): void {
    this.appliedStartDate = this.startDate;
    this.appliedEndDate = this.endDate;
    this.updatePRList();
  }

  clearDateRange(): void {
    this.startDate = '';
    this.endDate = '';
    this.appliedStartDate = '';
    this.appliedEndDate = '';
    this.updatePRList();
  }

  // ... rest of the component ...
}

// Example: Dynamically set project and repo names
// If you're fetching from an API, route, or service:
/*
export class PrSidebarComponent implements OnInit {
  projectName: string = '';
  repoName: string = '';

  constructor(
    private route: ActivatedRoute,
    private repoService: RepoService
  ) {}

  ngOnInit(): void {
    // Option 1: From route parameters
    this.projectName = this.route.snapshot.params['projectName'] || 'My Project';
    this.repoName = this.route.snapshot.params['repoName'] || 'my-repo';

    // Option 2: From a service
    this.repoService.getCurrentRepo().subscribe(repo => {
      this.projectName = repo.projectName;
      this.repoName = repo.repoName;
    });

    this.initializeDateRange();
    this.updatePRList();
  }
}
*/

// Example: Set from @Input() if used as a child component
/*
export class PrSidebarComponent implements OnInit {
  @Input() projectName: string = 'My Project';
  @Input() repoName: string = 'my-repo';
  
  // ... rest of component
}
*/



