<input #fileInput type="file" class="file-input-hidden" multiple accept=".vtt,.srt"
  (change)="onFileSelected($event)">






<p class="upload-info">Supported formats: VTT, SRT</p>





// Add this method to validate file types
private isValidFileType(file: File): boolean {
  const allowedExtensions = ['.vtt', '.srt'];
  const fileName = file.name.toLowerCase();
  return allowedExtensions.some(ext => fileName.endsWith(ext));
}

// Update onFileSelected method
onFileSelected(event: any): void {
  const files = event.target.files;
  if (files && files.length > 0) {
    for (let i = 0; i < files.length; i++) {
      if (!this.isValidFileType(files[i])) {
        alert(`Invalid file type: ${files[i].name}. Only .vtt and .srt files are allowed.`);
        continue;
      }
      
      const exists = this.uploadedFilesWithStatus.some(f => f.file.name === files[i].name);
      if (!exists) {
        this.uploadedFilesWithStatus.push({
          file: files[i],
          status: 'pending',
          progress: 0
        });
      }
    }
  }
  // Reset the input value to allow selecting the same file again
  event.target.value = '';
}

// Update onFileDrop method
onFileDrop(event: DragEvent): void {
  event.preventDefault();
  this.isDragging = false;

  const files = event.dataTransfer?.files;
  if (files && files.length > 0) {
    for (let i = 0; i < files.length; i++) {
      if (!this.isValidFileType(files[i])) {
        alert(`Invalid file type: ${files[i].name}. Only .vtt and .srt files are allowed.`);
        continue;
      }
      
      const exists = this.uploadedFilesWithStatus.some(f => f.file.name === files[i].name);
      if (!exists) {
        this.uploadedFilesWithStatus.push({
          file: files[i],
          status: 'pending',
          progress: 0
        });
      }
    }
  }
}
