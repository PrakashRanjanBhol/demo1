ws.onmessage = async (event) => {  
  clearTimeout(timeout);  
  try {  
    const data = JSON.parse(event.data);  
      
    // Make additional POST API call based on WebSocket data  
    const apiResponse = await request({  
      method: 'POST',  
      baseURL: 'https://your-api-endpoint.com', // Your API base URL  
      endpoint: '/process-credentials', // Your endpoint  
      data: {  
        // Use data from WebSocket to build request  
        userId: data.userId,  
        token: data.token,  
        // any other fields needed  
      }  
    });  
      
    // Resolve with the API response instead of original WebSocket data  
    resolve(apiResponse);  
  } catch (e) {  
    reject(e);  
  }  
  ws.close();  
};
