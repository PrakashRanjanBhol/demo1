import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';

export interface Employee {
  id: number;
  name: string;
  selected: boolean;
}

@Component({
  selector: 'app-share-workflow-sidebar',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: './share-workflow-sidebar.component.html',
  styleUrls: ['./share-workflow-sidebar.component.css']
})
export class ShareWorkflowSidebarComponent implements OnInit {
  searchTerm: string = '';
  selectAll: boolean = false;
  employees: Employee[] = [
    { id: 1, name: 'John Smith', selected: false },
    { id: 2, name: 'Sarah Johnson', selected: false },
    { id: 3, name: 'Michael Chen', selected: false },
    { id: 4, name: 'Emily Davis', selected: false },
    { id: 5, name: 'David Wilson', selected: false },
    { id: 6, name: 'Jessica Martinez', selected: false },
    { id: 7, name: 'Robert Taylor', selected: false },
    { id: 8, name: 'Amanda Brown', selected: false },
    { id: 9, name: 'James Anderson', selected: false },
    { id: 10, name: 'Linda Garcia', selected: false },
    { id: 11, name: 'Christopher Lee', selected: false },
    { id: 12, name: 'Michelle White', selected: false }
  ];

  ngOnInit(): void {
    this.updateSelectAllState();
  }

  get filteredEmployees(): Employee[] {
    if (!this.searchTerm) {
      return this.employees;
    }
    return this.employees.filter(employee =>
      employee.name.toLowerCase().includes(this.searchTerm.toLowerCase())
    );
  }

  get selectedCount(): number {
    return this.filteredEmployees.filter(emp => emp.selected).length;
  }

  get totalVisible(): number {
    return this.filteredEmployees.length;
  }

  get showClearButton(): boolean {
    return this.searchTerm.length > 0;
  }

  onSearchChange(): void {
    this.updateSelectAllState();
  }

  clearSearch(): void {
    this.searchTerm = '';
    this.updateSelectAllState();
  }

  toggleSelectAll(): void {
    const filtered = this.filteredEmployees;
    const allSelected = filtered.every(emp => emp.selected);
    
    filtered.forEach(employee => {
      employee.selected = !allSelected;
    });
    
    this.updateSelectAllState();
  }

  onEmployeeToggle(): void {
    this.updateSelectAllState();
  }

  updateSelectAllState(): void {
    const filtered = this.filteredEmployees;
    if (filtered.length === 0) {
      this.selectAll = false;
      return;
    }

    const selectedCount = filtered.filter(emp => emp.selected).length;
    this.selectAll = selectedCount === filtered.length;
  }

  shareWorkflow(): void {
    const selectedEmployees = this.employees
      .filter(emp => emp.selected)
      .map(emp => emp.name);

    if (selectedEmployees.length > 0) {
      alert(`Sharing workflow with:\n${selectedEmployees.join('\n')}`);
      // Replace with your actual share logic
      console.log('Selected employees:', selectedEmployees);
    } else {
      alert('Please select at least one employee to share the workflow.');
    }
  }
}










<div class="sidebar">
  <!-- Header with Search -->
  <div class="sidebar-header">
    <h2 class="sidebar-title">Share Workflow</h2>
    <div class="search-container">
      <span class="search-icon">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </span>
      <input 
        type="text" 
        class="search-input" 
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange()"
        placeholder="Search employees..."
      >
      <span 
        class="search-clear" 
        [class.active]="showClearButton"
        (click)="clearSearch()"
      >âœ•</span>
    </div>
  </div>

  <!-- Select All -->
  <div class="select-all-container">
    <label class="checkbox-item">
      <input 
        type="checkbox" 
        [(ngModel)]="selectAll"
        (change)="toggleSelectAll()"
      >
      <span class="checkbox-label">Select All</span>
    </label>
    <div class="selected-count">{{ selectedCount }} of {{ totalVisible }} selected</div>
  </div>

  <!-- Employee List -->
  <div class="employee-list">
    <div 
      class="employee-item" 
      *ngFor="let employee of filteredEmployees"
    >
      <label class="checkbox-item">
        <input 
          type="checkbox" 
          class="employee-checkbox"
          [(ngModel)]="employee.selected"
          (change)="onEmployeeToggle()"
        >
        <span class="employee-name">{{ employee.name }}</span>
      </label>
    </div>
  </div>

  <!-- Footer with Share Button -->
  <div class="sidebar-footer">
    <button 
      class="share-button" 
      (click)="shareWorkflow()"
    >
      Share Workflow
    </button>
  </div>
</div>









/* CSS Variables for Light Mode */
:root {
  --agentic-ai-share-workflow-bg-primary: #ffffff;
  --agentic-ai-share-workflow-bg-secondary: #fafafa;
  --agentic-ai-share-workflow-bg-hover: #f8f8f8;
  --agentic-ai-share-workflow-text-primary: #1a1a1a;
  --agentic-ai-share-workflow-text-secondary: #333333;
  --agentic-ai-share-workflow-text-muted: #666666;
  --agentic-ai-share-workflow-text-placeholder: #999999;
  --agentic-ai-share-workflow-border-primary: #e5e5e5;
  --agentic-ai-share-workflow-border-secondary: #e0e0e0;
  --agentic-ai-share-workflow-accent-color: #4a90e2;
  --agentic-ai-share-workflow-accent-hover: #3a7bc8;
  --agentic-ai-share-workflow-accent-active: #2a6bb8;
  --agentic-ai-share-workflow-shadow: rgba(0, 0, 0, 0.1);
  --agentic-ai-share-workflow-focus-ring: rgba(74, 144, 226, 0.1);
  --agentic-ai-share-workflow-scrollbar-track: #f1f1f1;
  --agentic-ai-share-workflow-scrollbar-thumb: #c1c1c1;
  --agentic-ai-share-workflow-scrollbar-thumb-hover: #a1a1a1;
  --agentic-ai-share-workflow-disabled-bg: #d1d1d1;
}

/* CSS Variables for Dark Mode */
[data-theme="dark"] {
  --agentic-ai-share-workflow-bg-primary: #111113;
  --agentic-ai-share-workflow-bg-secondary: #1a1a1d;
  --agentic-ai-share-workflow-bg-hover: #252528;
  --agentic-ai-share-workflow-text-primary: #e5e5e5;
  --agentic-ai-share-workflow-text-secondary: #d1d1d1;
  --agentic-ai-share-workflow-text-muted: #999999;
  --agentic-ai-share-workflow-text-placeholder: #666666;
  --agentic-ai-share-workflow-border-primary: #2a2a2d;
  --agentic-ai-share-workflow-border-secondary: #333336;
  --agentic-ai-share-workflow-accent-color: #4a90e2;
  --agentic-ai-share-workflow-accent-hover: #3a7bc8;
  --agentic-ai-share-workflow-accent-active: #2a6bb8;
  --agentic-ai-share-workflow-shadow: rgba(0, 0, 0, 0.3);
  --agentic-ai-share-workflow-focus-ring: rgba(74, 144, 226, 0.2);
  --agentic-ai-share-workflow-scrollbar-track: #1a1a1d;
  --agentic-ai-share-workflow-scrollbar-thumb: #3a3a3d;
  --agentic-ai-share-workflow-scrollbar-thumb-hover: #4a4a4d;
  --agentic-ai-share-workflow-disabled-bg: #3a3a3d;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.sidebar {
  width: 320px;
  background-color: var(--agentic-ai-share-workflow-bg-primary);
  border-radius: 8px;
  box-shadow: 0 2px 8px var(--agentic-ai-share-workflow-shadow);
  display: flex;
  flex-direction: column;
  height: 600px;
  overflow: hidden;
}

/* Header Section */
.sidebar-header {
  padding: 20px;
  border-bottom: 1px solid var(--agentic-ai-share-workflow-border-primary);
}

.sidebar-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--agentic-ai-share-workflow-text-primary);
  margin-bottom: 16px;
}

.search-container {
  position: relative;
}

.search-input {
  width: 100%;
  padding: 11px 40px 11px 40px;
  border: 1px solid var(--agentic-ai-share-workflow-border-secondary);
  border-radius: 8px;
  font-size: 14px;
  outline: none;
  transition: all 0.2s ease;
  background-color: var(--agentic-ai-share-workflow-bg-secondary);
  color: var(--agentic-ai-share-workflow-text-primary);
}

.search-input:focus {
  border-color: var(--agentic-ai-share-workflow-accent-color);
  background-color: var(--agentic-ai-share-workflow-bg-primary);
  box-shadow: 0 0 0 3px var(--agentic-ai-share-workflow-focus-ring);
}

.search-input::placeholder {
  color: var(--agentic-ai-share-workflow-text-placeholder);
}

.search-icon {
  position: absolute;
  left: 14px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--agentic-ai-share-workflow-text-placeholder);
  pointer-events: none;
}

.search-icon svg {
  width: 16px;
  height: 16px;
  display: block;
}

.search-clear {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--agentic-ai-share-workflow-text-placeholder);
  cursor: pointer;
  padding: 4px;
  display: none;
  transition: color 0.2s;
}

.search-clear:hover {
  color: var(--agentic-ai-share-workflow-text-muted);
}

.search-clear.active {
  display: block;
}

/* Select All Section */
.select-all-container {
  padding: 16px 20px;
  border-bottom: 1px solid var(--agentic-ai-share-workflow-border-primary);
  background-color: var(--agentic-ai-share-workflow-bg-secondary);
}

.checkbox-item {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.checkbox-item input[type="checkbox"] {
  width: 18px;
  height: 18px;
  cursor: pointer;
  margin-right: 12px;
  accent-color: var(--agentic-ai-share-workflow-accent-color);
}

.checkbox-label {
  font-size: 14px;
  color: var(--agentic-ai-share-workflow-text-primary);
  font-weight: 500;
  cursor: pointer;
  user-select: none;
}

/* Employee List Section */
.employee-list {
  flex: 1;
  overflow-y: auto;
  padding: 12px 0;
}

.employee-item {
  padding: 12px 20px;
  transition: background-color 0.15s;
}

.employee-item:hover {
  background-color: var(--agentic-ai-share-workflow-bg-hover);
}

.employee-name {
  font-size: 14px;
  color: var(--agentic-ai-share-workflow-text-secondary);
}

/* Footer Section */
.sidebar-footer {
  padding: 16px 20px;
  border-top: 1px solid var(--agentic-ai-share-workflow-border-primary);
  background-color: var(--agentic-ai-share-workflow-bg-primary);
}

.share-button {
  width: 100%;
  padding: 12px;
  background-color: var(--agentic-ai-share-workflow-accent-color);
  color: #ffffff;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.share-button:hover {
  background-color: var(--agentic-ai-share-workflow-accent-hover);
}

.share-button:active {
  background-color: var(--agentic-ai-share-workflow-accent-active);
}

.share-button:disabled {
  background-color: var(--agentic-ai-share-workflow-disabled-bg);
  cursor: not-allowed;
}

/* Scrollbar Styling */
.employee-list::-webkit-scrollbar {
  width: 6px;
}

.employee-list::-webkit-scrollbar-track {
  background: var(--agentic-ai-share-workflow-scrollbar-track);
}

.employee-list::-webkit-scrollbar-thumb {
  background: var(--agentic-ai-share-workflow-scrollbar-thumb);
  border-radius: 3px;
}

.employee-list::-webkit-scrollbar-thumb:hover {
  background: var(--agentic-ai-share-workflow-scrollbar-thumb-hover);
}

/* Selected count */
.selected-count {
  font-size: 12px;
  color: var(--agentic-ai-share-workflow-text-muted);
  margin-top: 8px;
}
