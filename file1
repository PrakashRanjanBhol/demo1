@Output() onItemDeselect = new EventEmitter<void>();

if (this.selectedHistoryItem && idsToDelete.includes(this.selectedHistoryItem.id)) {
  this.onItemDeselect.emit();
  this.selectedHistoryItem = null;
}


executeDelete(): void {
  if (this.selectedForDelete.size === 0 || this.isDeleting) return;

  const idsToDelete = Array.from(this.selectedForDelete);
  const numericIds = idsToDelete.map(id => Number(id));

  this.isDeleting = true;

  this.historyService.deleteFiles(numericIds).subscribe({
    next: (response) => {
      if (response.status === 'success') {
        if (this.selectedHistoryItem && idsToDelete.includes(this.selectedHistoryItem.id)) {
          this.onItemDeselect.emit();
          this.selectedHistoryItem = null;
        }

        if (this.addedToGenerationId && idsToDelete.includes(this.addedToGenerationId)) {
          this.onRemoveFromContentGeneration.emit(this.addedToGenerationId);
          this.addedToGenerationId = null;
        }

        this.historyItems = this.historyItems.filter(item => !this.selectedForDelete.has(item.id));
        this.selectedForDelete.clear();
        this.showDeleteConfirm = false;
        this.isDeleteMode = false;
        this.isDeleting = false;
      } else {
        this.isDeleting = false;
      }
    },
    error: () => {
      this.isDeleting = false;
    }
  });
}




<app-history
  ...
  (onItemDeselect)="onHistoryItemDeselect()">
</app-history>


onHistoryItemDeselect(): void {
  this.selectedHistoryItem = null; // or whatever variable holds the selected item in the parent
}
