export interface User {
  token: string;
  is_admin: boolean;
  user_name: string;
}

export interface AuthResponse {
  token: string;
  is_admin: boolean;
  user_name: string;
}








// Perform SSO login API call
private performSSOLogin(request: any): Observable<AuthResponse> {
  return this.http.post<AuthResponse>(`${this.apiUrl}/auth/sso/login`, request, {
    withCredentials: true
  }).pipe(
    tap(response => {
      // Map response to User object
      const user: User = {
        token: response.token,
        is_admin: response.is_admin,
        user_name: response.user_name
      };
      
      // Store user in localStorage and update subject
      localStorage.setItem('currentUser', JSON.stringify(user));
      this.currentUserSubject.next(user);
    }),
    catchError(this.handleError)
  );
}










// Get user initials for avatar
getUserInitials(): string {
  if (!this.currentUser) return 'U';
  
  const name = this.currentUser.user_name || 'User';
  const parts = name.split(' ');
  
  if (parts.length >= 2) {
    return (parts[0][0] + parts[1][0]).toUpperCase();
  }
  return name.substring(0, 2).toUpperCase();
}

// Get user display name
getUserName(): string {
  if (!this.currentUser) return 'User';
  return this.currentUser.user_name || 'User';
}
