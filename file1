<!-- File Actions -->
        <div class="code-rag-file-actions">
          <button 
            class="code-rag-btn code-rag-btn-accept" 
            (click)="acceptFile(i)"
            [disabled]="isFileLoading(i) || isAnyBatchOperationLoading()">
            <span class="code-rag-spinner" *ngIf="isFileLoading(i)"></span>
            <span *ngIf="!isFileLoading(i)">✓</span>
            <span>{{ isFileLoading(i) ? 'Approving...' : 'Accept' }}</span>
          </button>
          <button 
            class="code-rag-btn code-rag-btn-reject" 
            (click)="rejectFile(i)"
            [disabled]="isFileLoading(i) || isAnyBatchOperationLoading()">
            <span class="code-rag-spinner" *ngIf="isFileLoading(i)"></span>
            <span *ngIf="!isFileLoading(i)">✗</span>
            <span>{{ isFileLoading(i) ? 'Rejecting...' : 'Reject' }}</span>
          </button>
        </div>









// Track which action is being performed per file
  fileActions: Map<number, 'accepting' | 'rejecting'> = new Map();









acceptFile(index: number): void {
    this.loadingFiles.add(index);
    this.fileActions.set(index, 'accepting');
    
    setTimeout(() => {
      console.log(`File ${index} accepted:`, this.files[index].file_name);
      console.log('File path:', this.files[index].file_path);
      console.log('Applied code:', this.files[index].modified_code);
      
      this.acceptedFiles.add(index);
      this.loadingFiles.delete(index);
      this.fileActions.delete(index);
      this.onFileAccepted.emit({ file: this.files[index], index });
    }, 1500);
  }










rejectFile(index: number): void {
    this.loadingFiles.add(index);
    this.fileActions.set(index, 'rejecting');
    
    setTimeout(() => {
      console.log(`File ${index} rejected:`, this.files[index].file_name);
      console.log('File path:', this.files[index].file_path);
      console.log('Keeping original code:', this.files[index].original_code);
      
      this.rejectedFiles.add(index);
      this.loadingFiles.delete(index);
      this.fileActions.delete(index);
      this.onFileRejected.emit({ file: this.files[index], index });
    }, 1500);
  }










getFileAction(index: number): 'accepting' | 'rejecting' | null {
    return this.fileActions.get(index) || null;
  }







<!-- File Actions -->
        <div class="code-rag-file-actions">
          <button 
            class="code-rag-btn code-rag-btn-accept" 
            (click)="acceptFile(i)"
            [disabled]="isFileLoading(i) || isAnyBatchOperationLoading()">
            <span class="code-rag-spinner" *ngIf="getFileAction(i) === 'accepting'"></span>
            <span *ngIf="getFileAction(i) !== 'accepting'">✓</span>
            <span>{{ getFileAction(i) === 'accepting' ? 'Approving...' : 'Accept' }}</span>
          </button>
          <button 
            class="code-rag-btn code-rag-btn-reject" 
            (click)="rejectFile(i)"
            [disabled]="isFileLoading(i) || isAnyBatchOperationLoading()">
            <span class="code-rag-spinner" *ngIf="getFileAction(i) === 'rejecting'"></span>
            <span *ngIf="getFileAction(i) !== 'rejecting'">✗</span>
            <span>{{ getFileAction(i) === 'rejecting' ? 'Rejecting...' : 'Reject' }}</span>
          </button>
        </div>
