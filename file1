<div class="panel">
    <div class="panel-header">
        <h3 class="panel-title">History</h3>
        <div class="date-range">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="date-icon">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
            </svg>
            <span class="date-text">{{ startDate }}</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                stroke="currentColor" class="arrow-icon">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                stroke="currentColor" class="date-icon">
                <path stroke-linecap="round" stroke-linejoin="round"
                    d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
            </svg>
            <span class="date-text">{{ endDate }}</span>
        </div>
    </div>
    <div class="panel-content">
        <!-- Pending Files Section -->
        <div class="content-section-header" (click)="togglePendingSection()">
            <div class="content-header-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h3 class="content-header-title">Pending Results</h3>
            <span class="content-count">{{ pendingFiles.length }} files</span>
            <button class="collapse-toggle-btn" [class.collapsed]="!isPendingExpanded">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </button>
        </div>

        <div class="history-content" *ngIf="isPendingExpanded">
            <div class="no-results" *ngIf="pendingFiles.length === 0">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <p>No pending files</p>
            </div>

            <div class="history-item" *ngFor="let item of pendingFiles"
                [class.selected]="selectedHistoryItem?.id === item.id" (click)="onHistoryItemClick(item.id)">
                <div class="history-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                    </svg>
                </div>
                <div class="history-item-details">
                    <h4 class="history-item-name">
                        <span class="file-id">#{{ item.id }}</span>
                        <span class="file-name">{{ item.name }}</span>
                    </h4>
                    <p class="history-item-date">{{ item.displayDate }}</p>
                </div>
                <div class="history-item-actions">
                    <div class="history-item-checkmark" *ngIf="selectedHistoryItem?.id === item.id">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                    </div>
                    <button class="add-to-generation-btn" 
                            [class.added]="isAddedToGeneration(item.id)"
                            (click)="onAddToGeneration($event, item)"
                            [title]="isAddedToGeneration(item.id) ? 'Remove from content generation' : 'Add to content generation'">
                        <div class="btn-icon-wrapper">
                            <!-- Plus Icon (default state) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="plus-icon" *ngIf="!isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                            <!-- Minus Icon (added state) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="minus-icon" *ngIf="isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                            </svg>
                            <!-- Arrow Left Icon (hover state for plus) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="arrow-left-icon" *ngIf="!isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                            </svg>
                            <!-- Arrow Right Icon (hover state for minus) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="arrow-right-icon" *ngIf="isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                            </svg>
                        </div>
                    </button>
                </div>
            </div>
        </div>

        <!-- Completed Files Section -->
        <div class="content-section-header" (click)="toggleCompletedSection()">
            <div class="content-header-icon">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h3 class="content-header-title">Completed Results</h3>
            <span class="content-count">{{ completedFiles.length }} files</span>
            <button class="collapse-toggle-btn" [class.collapsed]="!isCompletedExpanded">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
            </button>
        </div>

        <div class="history-content" *ngIf="isCompletedExpanded">
            <div class="no-results" *ngIf="completedFiles.length === 0">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z" />
                </svg>
                <p>No completed files</p>
            </div>

            <div class="history-item" *ngFor="let item of completedFiles"
                [class.selected]="selectedHistoryItem?.id === item.id" (click)="onHistoryItemClick(item.id)">
                <div class="history-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
                    </svg>
                </div>
                <div class="history-item-details">
                    <h4 class="history-item-name">
                        <span class="file-id">#{{ item.id }}</span>
                        <span class="file-name">{{ item.name }}</span>
                    </h4>
                    <p class="history-item-date">{{ item.displayDate }}</p>
                </div>
                <div class="history-item-actions">
                    <div class="history-item-checkmark" *ngIf="selectedHistoryItem?.id === item.id">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
                        </svg>
                    </div>
                    <button class="add-to-generation-btn" 
                            [class.added]="isAddedToGeneration(item.id)"
                            (click)="onAddToGeneration($event, item)"
                            [title]="isAddedToGeneration(item.id) ? 'Remove from content generation' : 'Add to content generation'">
                        <div class="btn-icon-wrapper">
                            <!-- Plus Icon (default state) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="plus-icon" *ngIf="!isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                            </svg>
                            <!-- Minus Icon (added state) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2"
                                stroke="currentColor" class="minus-icon" *ngIf="isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
                            </svg>
                            <!-- Arrow Left Icon (hover state for plus) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="arrow-left-icon" *ngIf="!isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
                            </svg>
                            <!-- Arrow Right Icon (hover state for minus) -->
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                                stroke="currentColor" class="arrow-right-icon" *ngIf="isAddedToGeneration(item.id)">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
                            </svg>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>











.history-item-name {
    font-size: 14px;
    font-weight: 600;
    color: var(--text-color);
    margin: 0 0 4px 0;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
    overflow: hidden;
    transition: color 0.2s ease, font-weight 0.2s ease;
}

.file-id {
    font-size: 12px;
    font-weight: 700;
    color: var(--primary-color);
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.15), rgba(167, 139, 250, 0.15));
    padding: 2px 8px;
    border-radius: 6px;
    border: 1px solid rgba(139, 92, 246, 0.3);
    flex-shrink: 0;
    transition: all 0.2s ease;
}

.file-name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    flex: 1;
    min-width: 0;
}

.history-item.selected .history-item-name {
    color: var(--primary-color);
    font-weight: 700;
}

.history-item.selected .file-id {
    background: linear-gradient(135deg, var(--primary-color), #a78bfa);
    color: white;
    border-color: var(--primary-color);
    box-shadow: 0 2px 6px rgba(139, 92, 246, 0.3);
}

/* Responsive adjustments */
@media screen and (max-width: 1400px) {
    .history-item-name {
        font-size: 12px;
        margin: 0 0 3px 0;
        gap: 6px;
    }

    .file-id {
        font-size: 11px;
        padding: 2px 6px;
        border-radius: 4px;
    }
}
