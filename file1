import { Component, OnInit, Input } from '@angular/core';
import { CommonModule } from '@angular/common';

interface FileItem {
  name: string;
  type: 'file' | 'folder';
  children?: FileItem[];
}

@Component({
  selector: 'app-file-explorer',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './file-explorer.component.html',
  styleUrls: ['./file-explorer.component.css']
})
export class FileExplorerComponent implements OnInit {
  @Input() fileStructure: FileItem[] = [];
  @Input() theme: 'light' | 'dark' = 'light';

  currentPath: string[] = [];
  currentItems: FileItem[] = [];

  ngOnInit(): void {
    this.currentItems = this.fileStructure;
  }

  ngOnChanges(): void {
    if (this.fileStructure && this.fileStructure.length > 0) {
      this.currentItems = this.fileStructure;
    }
  }

  navigateIntoFolder(folder: FileItem): void {
    if (folder.type === 'folder') {
      this.currentPath.push(folder.name);
      this.currentItems = folder.children || [];
    }
  }

  navigateToPath(index: number): void {
    if (index === -1) {
      // Navigate to root
      this.currentPath = [];
      this.currentItems = this.fileStructure;
    } else {
      // Navigate to specific path level
      this.currentPath = this.currentPath.slice(0, index + 1);
      let items = this.fileStructure;
      
      for (let i = 0; i <= index; i++) {
        const folderName = this.currentPath[i];
        const folder = items.find(item => item.name === folderName && item.type === 'folder');
        if (folder && folder.children) {
          items = folder.children;
        } else {
          items = [];
          break;
        }
      }
      
      this.currentItems = items;
    }
  }

  getFileIcon(filename: string): string {
    const ext = filename.split('.').pop()?.toLowerCase() || '';
    const iconMap: { [key: string]: string } = {
      'ts': 'ğŸ“˜',
      'js': 'ğŸ“œ',
      'html': 'ğŸŒ',
      'css': 'ğŸ¨',
      'scss': 'ğŸ¨',
      'json': 'ğŸ“‹',
      'md': 'ğŸ“',
      'pdf': 'ğŸ“„',
      'doc': 'ğŸ“',
      'docx': 'ğŸ“',
      'txt': 'ğŸ“',
      'pptx': 'ğŸ“Š',
      'ppt': 'ğŸ“Š',
      'xls': 'ğŸ“ˆ',
      'xlsx': 'ğŸ“ˆ',
      'jpg': 'ğŸ–¼ï¸',
      'jpeg': 'ğŸ–¼ï¸',
      'png': 'ğŸ–¼ï¸',
      'gif': 'ğŸ–¼ï¸',
      'svg': 'ğŸ–¼ï¸',
      'mp3': 'ğŸµ',
      'wav': 'ğŸµ',
      'mp4': 'ğŸ¬',
      'avi': 'ğŸ¬',
      'zip': 'ğŸ“¦',
      'rar': 'ğŸ“¦'
    };
    return iconMap[ext] || 'ğŸ“„';
  }

  trackByIndex(index: number): number {
    return index;
  }
}

















<div class="file-explorer-container" [attr.data-theme]="theme">
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">File Explorer</div>
      <div class="breadcrumb">
        <span 
          class="breadcrumb-item" 
          [class.current]="currentPath.length === 0"
          (click)="navigateToPath(-1)">
          Root
        </span>
        
        <ng-container *ngFor="let pathItem of currentPath; let i = index">
          <span class="breadcrumb-separator">/</span>
          <span 
            class="breadcrumb-item" 
            [class.current]="i === currentPath.length - 1"
            (click)="i < currentPath.length - 1 ? navigateToPath(i) : null">
            {{ pathItem }}
          </span>
        </ng-container>
      </div>
    </div>
    
    <div class="sidebar-content">
      <div *ngIf="currentItems.length === 0" class="empty-sidebar">
        No items
      </div>
      
      <div 
        *ngFor="let item of currentItems; trackBy: trackByIndex"
        class="sidebar-item"
        [class.folder]="item.type === 'folder'"
        (click)="item.type === 'folder' ? navigateIntoFolder(item) : null">
        <div class="icon">
          {{ item.type === 'folder' ? 'ğŸ“' : getFileIcon(item.name) }}
        </div>
        <div class="name">{{ item.name }}</div>
      </div>
    </div>
  </div>
</div>




















/* Light Mode Variables */
:host {
  --code-rag-documentation-bg-primary: #ffffff;
  --code-rag-documentation-bg-secondary: #f5f5f5;
  --code-rag-documentation-bg-header: #e8e8e8;
  --code-rag-documentation-bg-hover: #e0e0e0;
  --code-rag-documentation-bg-hover-breadcrumb: #d8d8d8;
  --code-rag-documentation-border: #ddd;
  --code-rag-documentation-text-primary: #333;
  --code-rag-documentation-text-secondary: #666;
  --code-rag-documentation-text-link: #0066cc;
  --code-rag-documentation-text-muted: #999;
}

/* Dark Mode Variables */
.file-explorer-container[data-theme="dark"] {
  --code-rag-documentation-bg-primary: #1a1a1c;
  --code-rag-documentation-bg-secondary: #111113;
  --code-rag-documentation-bg-header: #1e1e20;
  --code-rag-documentation-bg-hover: #2a2a2c;
  --code-rag-documentation-bg-hover-breadcrumb: #333335;
  --code-rag-documentation-border: #2a2a2c;
  --code-rag-documentation-text-primary: #e0e0e0;
  --code-rag-documentation-text-secondary: #b0b0b0;
  --code-rag-documentation-text-link: #4da6ff;
  --code-rag-documentation-text-muted: #808080;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.file-explorer-container {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  height: 100vh;
  display: flex;
  background-color: var(--code-rag-documentation-bg-primary);
}

/* Sidebar Styles */
.sidebar {
  width: 320px;
  background-color: var(--code-rag-documentation-bg-secondary);
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--code-rag-documentation-border);
}

.sidebar-header {
  padding: 16px;
  background-color: var(--code-rag-documentation-bg-header);
  border-bottom: 1px solid var(--code-rag-documentation-border);
}

.sidebar-title {
  font-weight: 600;
  font-size: 14px;
  color: var(--code-rag-documentation-text-primary);
  margin-bottom: 8px;
}

.breadcrumb {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  flex-wrap: wrap;
}

.breadcrumb-item {
  color: var(--code-rag-documentation-text-link);
  cursor: pointer;
  padding: 3px 6px;
  border-radius: 3px;
  transition: background-color 0.2s;
}

.breadcrumb-item:hover {
  background-color: var(--code-rag-documentation-bg-hover-breadcrumb);
}

.breadcrumb-item.current {
  color: var(--code-rag-documentation-text-primary);
  font-weight: 500;
  cursor: default;
}

.breadcrumb-item.current:hover {
  background-color: transparent;
}

.breadcrumb-separator {
  color: var(--code-rag-documentation-text-muted);
  font-size: 12px;
}

.sidebar-content {
  flex: 1;
  padding: 8px;
  overflow-y: auto;
}

.sidebar-item {
  padding: 10px 12px;
  cursor: pointer;
  user-select: none;
  display: flex;
  align-items: center;
  gap: 10px;
  border-radius: 4px;
  margin: 2px 0;
  transition: background-color 0.2s;
  color: var(--code-rag-documentation-text-primary);
}

.sidebar-item:hover {
  background-color: var(--code-rag-documentation-bg-hover);
}

.sidebar-item.folder {
  font-weight: 500;
}

.sidebar-item .icon {
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  flex-shrink: 0;
}

.sidebar-item .name {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.empty-sidebar {
  text-align: center;
  color: var(--code-rag-documentation-text-muted);
  padding: 40px 20px;
  font-size: 13px;
}

/* Scrollbar Styles */
.sidebar::-webkit-scrollbar,
.sidebar-content::-webkit-scrollbar {
  width: 8px;
}

.sidebar::-webkit-scrollbar-track,
.sidebar-content::-webkit-scrollbar-track {
  background: var(--code-rag-documentation-bg-secondary);
}

.sidebar::-webkit-scrollbar-thumb,
.sidebar-content::-webkit-scrollbar-thumb {
  background: var(--code-rag-documentation-text-muted);
  border-radius: 4px;
}

.sidebar::-webkit-scrollbar-thumb:hover,
.sidebar-content::-webkit-scrollbar-thumb:hover {
  background: var(--code-rag-documentation-text-secondary);
}















import { Component } from '@angular/core';
import { FileExplorerComponent } from './file-explorer/file-explorer.component';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [FileExplorerComponent],
  template: `
    <div class="app-container">
      <!-- Toggle theme button (optional) -->
      <button class="theme-toggle" (click)="toggleTheme()">
        Toggle Theme (Current: {{ currentTheme }})
      </button>
      
      <!-- File Explorer Component -->
      <app-file-explorer 
        [fileStructure]="fileData" 
        [theme]="currentTheme">
      </app-file-explorer>
    </div>
  `,
  styles: [`
    .app-container {
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    .theme-toggle {
      padding: 10px 20px;
      margin: 10px;
      cursor: pointer;
      border: none;
      background-color: #0066cc;
      color: white;
      border-radius: 4px;
      font-size: 14px;
    }
    
    .theme-toggle:hover {
      background-color: #0052a3;
    }
    
    app-file-explorer {
      flex: 1;
    }
  `]
})
export class AppComponent {
  currentTheme: 'light' | 'dark' = 'light';

  // Your file structure data
  fileData = [
    {
      name: 'src',
      type: 'folder' as const,
      children: [
        {
          name: 'app',
          type: 'folder' as const,
          children: [
            {
              name: 'components',
              type: 'folder' as const,
              children: [
                { name: 'header.component.ts', type: 'file' as const },
                { name: 'header.component.html', type: 'file' as const },
                { name: 'header.component.css', type: 'file' as const }
              ]
            },
            {
              name: 'services',
              type: 'folder' as const,
              children: [
                { name: 'data.service.ts', type: 'file' as const },
                { name: 'auth.service.ts', type: 'file' as const }
              ]
            },
            { name: 'app.component.ts', type: 'file' as const },
            { name: 'app.component.html', type: 'file' as const },
            { name: 'app.component.css', type: 'file' as const }
          ]
        },
        {
          name: 'assets',
          type: 'folder' as const,
          children: [
            { name: 'logo.png', type: 'file' as const },
            { name: 'styles.css', type: 'file' as const }
          ]
        },
        { name: 'index.html', type: 'file' as const },
        { name: 'main.ts', type: 'file' as const }
      ]
    },
    {
      name: 'package.json',
      type: 'file' as const
    },
    {
      name: 'README.md',
      type: 'file' as const
    }
  ];

  toggleTheme(): void {
    this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
  }
}
