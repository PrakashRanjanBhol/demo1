// Update toggleActionOptions - close if same, switch if different
toggleActionOptions(itemId: string, actionType: 'copy' | 'download', event: Event): void {
  event.stopPropagation();
  if (this.activeActionItem === itemId && this.activeActionType === actionType) {
    // Same button clicked again - close
    this.activeActionItem = '';
    this.activeActionType = '';
  } else {
    // Different button or different item - switch
    this.activeActionItem = itemId;
    this.activeActionType = actionType;
  }
}




openDetail(item: ResultItem): void {
  this.closeActionOptions(); // ← add this
  this.selectedItemName = item.title;
  // ... rest of existing code unchanged



openEditMode(item: ResultItem): void {
  this.closeActionOptions(); // ← add this
  if (item.type !== 'summary' && item.type !== 'keywords') {
    return;
  }
  // ... rest of existing code unchanged
