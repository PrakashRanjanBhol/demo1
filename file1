// Create message separator with scroll-to-previous functionality
function createMessageSeparator() {
    const messageSeparator = document.createElement('div');
    messageSeparator.className = 'message-separator';

    const separatorLineLeft = document.createElement('div');
    separatorLineLeft.className = 'separator-line';

    // Create clickable text with icon container
    const separatorTextContainer = document.createElement('button');
    separatorTextContainer.className = 'separator-text-btn';
    separatorTextContainer.onclick = function() {
        scrollToPreviousSibling(this.parentElement);
    };

    // Add icon
    const icon = document.createElement('span');
    icon.className = 'separator-icon';
    icon.innerHTML = `
        <svg width="14" height="14" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
        </svg>
    `;

    // Add text
    const text = document.createElement('span');
    text.textContent = 'Earlier';

    separatorTextContainer.appendChild(icon);
    separatorTextContainer.appendChild(text);

    const separatorLineRight = document.createElement('div');
    separatorLineRight.className = 'separator-line';

    messageSeparator.appendChild(separatorLineLeft);
    messageSeparator.appendChild(separatorTextContainer);
    messageSeparator.appendChild(separatorLineRight);

    return messageSeparator;
}

// Scroll to previous sibling element
function scrollToPreviousSibling(separatorElement) {
    // Get the previous sibling element
    const previousElement = separatorElement.previousElementSibling;
    
    if (previousElement) {
        previousElement.scrollIntoView({ 
            behavior: 'smooth', 
            block: 'start',
            inline: 'nearest'
        });
        
        // Optional: Add highlight effect
        previousElement.classList.add('highlight-flash');
        setTimeout(() => {
            previousElement.classList.remove('highlight-flash');
        }, 1500);
    }
}
