// Update the uploadFilesSequentially method:
async uploadFilesSequentially(): Promise<void> {
  for (let i = 0; i < this.uploadedFilesWithStatus.length; i++) {
    const fileWithStatus = this.uploadedFilesWithStatus[i];

    // Skip already uploaded files
    if (fileWithStatus.status === 'uploaded') {
      continue;
    }

    fileWithStatus.status = 'uploading';
    fileWithStatus.progress = 0;

    try {
      await this.uploadFileViaService(fileWithStatus);
      fileWithStatus.status = 'uploaded';
      fileWithStatus.progress = 100;
    } catch (error) {
      fileWithStatus.status = 'error';
      console.error(`Failed to upload ${fileWithStatus.file.name}:`, error);
    }
  }

  // Check if all files are uploaded successfully
  const allUploaded = this.uploadedFilesWithStatus.every(
    file => file.status === 'uploaded'
  );

  // Clear the list if all files uploaded successfully
  if (allUploaded && this.uploadedFilesWithStatus.length > 0) {
    // Optional: Add a small delay so users can see the "Uploaded" status
    setTimeout(() => {
      this.uploadedFilesWithStatus = [];
      this.selectedUploadFile = null;
    }, 1500); // 1.5 second delay before clearing
  }
}
