<!-- Favorites File Browser View -->
<div id="favorites-browser-view" [class.hidden]="!showFavoritesBrowserView">
    <!-- Header - Fixed -->
    <div class="view-header">
        <button class="back-button" (click)="backFromFavoritesBrowser()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
        </button>
        <div class="view-title">{{ currentRepo?.name }}</div>
    </div>
    
    <!-- Breadcrumb - Fixed -->
    <div class="breadcrumb">
        <ng-container *ngFor="let item of getBreadcrumbItems(); let isLast = last">
            <span class="breadcrumb-item" 
                  [class.active]="item.isLast"
                  (click)="!item.isLast && navigateToPath(item.index)">
                {{ item.name }}
            </span>
            <span class="breadcrumb-separator" *ngIf="!isLast">/</span>
        </ng-container>
    </div>

    <!-- Branch Selector - Fixed -->
    <div class="branch-selector">
        <div class="branch-label">Branch</div>
        <select class="branch-dropdown" [(ngModel)]="selectedBranch">
            <option *ngFor="let branch of branches" [value]="branch">{{ branch }}</option>
        </select>
    </div>

    <!-- Files List - Scrollable -->
    <div id="favorites-files-list" class="files-list-container">
        <div class="empty-state" *ngIf="loadingFiles">
            <div class="loading-spinner"></div>
            <div class="empty-state-text" style="margin-top: 16px;">Loading repository files...</div>
        </div>

        <div *ngIf="!loadingFiles">
            <div class="empty-state" *ngIf="currentFolderItems.length === 0">
                <div class="empty-state-text">Empty folder</div>
            </div>

            <div class="file-item" 
                 *ngFor="let item of currentFolderItems"
                 [class.clickable]="item.isFolder"
                 (click)="item.isFolder && openFolder(item.name)"
                 (dblclick)="!item.isFolder && handleFileDoubleClick(item.name)"
                 (contextmenu)="!item.isFolder && onFileRightClick($event, item.name)">
                <svg class="file-icon" 
                     [class.folder-icon]="item.isFolder"
                     [class.file-icon-default]="!item.isFolder"
                     viewBox="0 0 24 24" 
                     fill="none" 
                     stroke="currentColor" 
                     stroke-width="2">
                    <path *ngIf="item.isFolder" 
                          d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    <ng-container *ngIf="!item.isFolder">
                        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                        <polyline points="13 2 13 9 20 9"></polyline>
                    </ng-container>
                </svg>
                <div class="file-name">{{ item.name }}</div>
            </div>
        </div>
    </div>
</div>














/* ========================================
   File Browser Layout - Complete
   ======================================== */

/* Browser view - flex container */
#favorites-browser-view {
    display: flex;
    flex-direction: column;
    height: 100%;
    overflow: hidden;
}

/* Fixed sections - don't grow or shrink */
#favorites-browser-view .view-header,
#favorites-browser-view .breadcrumb,
#favorites-browser-view .branch-selector {
    flex-shrink: 0;
    flex-grow: 0;
}

/* Files list container - takes remaining space and scrolls */
.files-list-container {
    flex: 1 1 auto;
    overflow-y: auto;
    overflow-x: hidden;
    min-height: 0;
    padding-bottom: 8px;
}

/* Scrollbar for files list */
.files-list-container::-webkit-scrollbar {
    width: 8px;
}

.files-list-container::-webkit-scrollbar-track {
    background: var(--bitbucket-scrollbar-track);
}

.files-list-container::-webkit-scrollbar-thumb {
    background: var(--bitbucket-scrollbar-thumb);
    border-radius: 4px;
}

.files-list-container::-webkit-scrollbar-thumb:hover {
    background: var(--bitbucket-scrollbar-thumb-hover);
}

/* Light mode scrollbar */
[data-theme="light"] .files-list-container::-webkit-scrollbar-track {
    background: var(--bitbucket-scrollbar-track);
}

[data-theme="light"] .files-list-container::-webkit-scrollbar-thumb {
    background: var(--bitbucket-scrollbar-thumb);
}

[data-theme="light"] .files-list-container::-webkit-scrollbar-thumb:hover {
    background: var(--bitbucket-scrollbar-thumb-hover);
}

