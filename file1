if (this.isInsideBlock && this.currentLang) {
  // Fix: convert escaped newlines into real newlines
  const safeLine = line.replace(/\\n/g, '\n').replace(/\r/g, '');

  switch (this.currentLang) {
    case 'html':
      this.htmlCode += safeLine + '\n';
      break;
    case 'css':
      this.cssCode += safeLine + '\n';
      break;
    case 'js':
    case 'javascript':
      this.jsCode += safeLine + '\n';
      break;
  }
}
