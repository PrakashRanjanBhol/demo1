createCodeBlock(language, code) {
    const blockId = 'code-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
    
    const wrapper = document.createElement('div');
    wrapper.className = 'code-block';
    
    const header = document.createElement('div');
    header.className = 'code-block-header';
    
    // Create left side container for dots and language
    const headerLeft = document.createElement('div');
    headerLeft.className = 'code-block-header-left';
    
    // Add colored dots
    const dots = this.createColoredDots();
    
    const langLabel = document.createElement('span');
    langLabel.className = 'code-block-language';
    langLabel.textContent = language;
    
    const copyBtn = document.createElement('button');
    copyBtn.className = 'code-block-copy';
    copyBtn.textContent = 'Copy';
    copyBtn.onclick = () => this.copyCode(code, copyBtn);
    
    headerLeft.appendChild(dots);
    headerLeft.appendChild(langLabel);
    header.appendChild(headerLeft);
    header.appendChild(copyBtn);
    
    const pre = document.createElement('pre');
    const highlightedContent = hljs.highlightAuto(code).value;
    const codeElement = document.createElement('code');
    codeElement.innerHTML = highlightedContent;
    codeElement.className = `language-${language}`;
    
    pre.appendChild(codeElement);
    wrapper.appendChild(header);
    wrapper.appendChild(pre);
    
    return wrapper;
}

createLiveCodeBlock(language, code) {
    // Create a code block for streaming content (with live highlighting)
    const blockId = 'code-live-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
    
    const wrapper = document.createElement('div');
    wrapper.className = 'code-block';
    wrapper.setAttribute('data-live', 'true');
    
    const header = document.createElement('div');
    header.className = 'code-block-header';
    
    // Create left side container for dots and language
    const headerLeft = document.createElement('div');
    headerLeft.className = 'code-block-header-left';
    
    // Add colored dots
    const dots = this.createColoredDots();
    
    const langLabel = document.createElement('span');
    langLabel.className = 'code-block-language';
    langLabel.textContent = language;
    
    const copyBtn = document.createElement('button');
    copyBtn.className = 'code-block-copy';
    copyBtn.textContent = 'Copy';
    copyBtn.onclick = () => this.copyCode(code, copyBtn);
    
    headerLeft.appendChild(dots);
    headerLeft.appendChild(langLabel);
    header.appendChild(headerLeft);
    header.appendChild(copyBtn);
    
    const pre = document.createElement('pre');
    const highlightedContent = hljs.highlightAuto(code).value;
    const codeElement = document.createElement('code');
    codeElement.innerHTML = highlightedContent;
    codeElement.className = `language-${language}`;
    
    pre.appendChild(codeElement);
    wrapper.appendChild(header);
    wrapper.appendChild(pre);
    
    return wrapper;
}
