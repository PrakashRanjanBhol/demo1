// Add this method to reset all state
resetComponentState(): void {
  // Clear files and selection
  this.files = [];
  this.selectedFile = null;
  this.selectedFileIndex = -1;
  this.diffLines = [];
  this.stats = null;
  
  // Clear all comment states
  this.editingComments.clear();
  this.commentStates.clear();
  this.processingComments.clear();
  
  // Reset to default view
  this.currentView = 'unified';
}

// Call this method before loading new PR data
loadNewPRData(newFiles: DiffFile[]): void {
  // Reset everything first
  this.resetComponentState();
  
  // Load new files
  this.files = newFiles;
  
  // Optionally auto-select first file if exists
  if (this.files.length > 0) {
    this.onFileSelect(0);
  }
}
