generateDiffString(file: FileData): string {
  // Join lines with newline to create full text
  const oldText = file.old_lines.join('\n');
  const newText = file.new_lines.join('\n');
  
  // Use the diff library to generate a proper unified diff
  // Set context to a very large number to show all lines
  const patch = Diff.createPatch(
    file.file_path,
    oldText,
    newText,
    'a/' + file.file_path,
    'b/' + file.file_path,
    { context: 10000 } // Show all context lines (full file)
  );
  
  return patch;
}
