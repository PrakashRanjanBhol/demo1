// ✅ REPLACE old interfaces with this:
interface FileSystemItem {
  name: string;
  type: 'file' | 'folder';
  children?: FileSystemItem[];
}



// ✅ REPLACE
fileSystem: FileSystem = { root: { ... } };

// ✅ WITH
fileSystem: FileSystemItem[] = [];




// ✅ REPLACE the entire method with:
private calculateFolderItems(): { name: string; isFolder: boolean }[] {
  let currentItems: FileSystemItem[] = this.fileSystem;
  
  // Navigate through path (skip 'root' at index 0)
  for (let i = 1; i < this.currentPath.length; i++) {
    const folderName = this.currentPath[i];
    const folder = currentItems.find(item => item.name === folderName && item.type === 'folder');
    
    if (folder && folder.children) {
      currentItems = folder.children;
    } else {
      return [];
    }
  }
  
  return currentItems.map(item => ({
    name: item.name,
    isFolder: item.type === 'folder'
  }));
}




openRepository(repoId: string, repoName: string): void {
  this.currentRepo = { id: repoId, name: repoName };
  this.currentPath = ['root'];
  this.showFavoritesReposView = false;
  this.showFavoritesBrowserView = true;
  this.loadingFiles = true;

  // ✅ Call your actual API here
  this.http.get<FileSystemItem[]>(`your-api-url/repos/${repoId}/files`)
    .subscribe({
      next: (data) => {
        this.fileSystem = data;
        this.loadingFiles = false;
      },
      error: (error) => {
        console.error('Error:', error);
        this.fileSystem = [];
        this.loadingFiles = false;
      }
    });
}
