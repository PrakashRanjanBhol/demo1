const routes: Routes = [
  {
    path: '',
    redirectTo: 'content-analytics',
    pathMatch: 'full'
  },
  {
    path: 'content-analytics',
    component: ContentAnalyticsComponent,
    canActivate: [AuthGuard]
  },
  {
    path: 'sso-connect',
    component: SsoConnectComponent
  },
  {
    path: '**',
    redirectTo: 'content-analytics'
  }
];









canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): boolean {
  const currentUser = this.authService.currentUserValue;
  
  if (currentUser) {
    // User is authenticated
    return true;
  }

  // Not authenticated, redirect to SSO connect page without query params
  this.router.navigate(['/sso-connect']);
  return false;
}








private checkAuthentication(): void {
  this.authService.checkAuthStatus().subscribe({
    next: (response) => {
      // User is authenticated
      console.log('User authenticated:', response.user);
      this.isAuthenticated = true;
      this.currentUser = response.user;
    },
    error: (error) => {
      // Authentication failed, redirect to SSO connect
      console.log('User not authenticated, redirecting to SSO connect');
      this.isAuthenticated = false;
      this.currentUser = null;
      this.router.navigate(['/sso-connect'], { replaceUrl: true });
    }
  });
}
