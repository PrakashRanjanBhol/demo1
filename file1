<!-- Approve, Need Work, and Reject buttons -->
<button 
  class="pr-action-btn approve-btn" 
  (click)="onApprovePR()" 
  [disabled]="selectedPR.status === 'APPROVED'"
  [class.active]="selectedPR.status === 'APPROVED'"
  title="Approve PR">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <polyline points="20 6 9 17 4 12"/>
  </svg>
</button>
<button 
  class="pr-action-btn needwork-btn" 
  (click)="onNeedWorkPR()" 
  [disabled]="selectedPR.status === 'NEEDS_WORK'"
  [class.active]="selectedPR.status === 'NEEDS_WORK'"
  title="Need to Work">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
  </svg>
</button>
<button 
  class="pr-action-btn reject-btn" 
  (click)="onRejectPR()" 
  [disabled]="selectedPR.status === 'UNAPPROVED'"
  [class.active]="selectedPR.status === 'UNAPPROVED'"
  title="Reject PR">
  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
    <line x1="18" y1="6" x2="6" y2="18"/>
    <line x1="6" y1="6" x2="18" y2="18"/>
  </svg>
</button>













// Update interface to include status
interface PRInfo {
  id: number;
  title: string;
  author: string;
  status: 'APPROVED' | 'UNAPPROVED' | 'NEEDS_WORK' | 'open' | 'review'; // Added status types
  number: number;
  repository: string;
  sourceBranch: string;
  targetBranch: string;
  autoReview: boolean;
}

// Update static PR data
prs: PRInfo[] = [
  {
    id: 1,
    title: 'Add user authentication',
    author: 'johndoe',
    status: 'UNAPPROVED', // Changed to use new status
    number: 142,
    repository: 'frontend-app',
    sourceBranch: 'feature/auth',
    targetBranch: 'main',
    autoReview: true
  },
  {
    id: 2,
    title: 'Fix responsive layout',
    author: 'janedoe',
    status: 'NEEDS_WORK', // Changed to use new status
    number: 143,
    repository: 'frontend-app',
    sourceBranch: 'fix/responsive',
    targetBranch: 'develop',
    autoReview: false
  },
  {
    id: 3,
    title: 'Update dependencies',
    author: 'alice',
    status: 'APPROVED', // Changed to use new status
    number: 144,
    repository: 'backend-api',
    sourceBranch: 'chore/deps',
    targetBranch: 'main',
    autoReview: true
  }
];

// Update methods to change status
onApprovePR(): void {
  if (this.selectedPR && this.selectedPR.status !== 'APPROVED') {
    if (confirm('Are you sure you want to approve this PR?')) {
      console.log('Approving PR #' + this.selectedPR.number);
      this.selectedPR.status = 'APPROVED';
      // Add your approve PR logic here
      // Example: this.prService.approve(this.selectedPR.number);
    }
  }
}

onNeedWorkPR(): void {
  if (this.selectedPR && this.selectedPR.status !== 'NEEDS_WORK') {
    if (confirm('Mark this PR as "Need to Work"?')) {
      console.log('Marking PR #' + this.selectedPR.number + ' as need work');
      this.selectedPR.status = 'NEEDS_WORK';
      // Add your need work logic here
      // Example: this.prService.needWork(this.selectedPR.number);
    }
  }
}

onRejectPR(): void {
  if (this.selectedPR && this.selectedPR.status !== 'UNAPPROVED') {
    if (confirm('Are you sure you want to reject this PR?')) {
      console.log('Rejecting PR #' + this.selectedPR.number);
      this.selectedPR.status = 'UNAPPROVED';
      // Add your reject PR logic here
      // Example: this.prService.reject(this.selectedPR.number);
    }
  }
}













/* PR Action buttons base styles */
.pr-action-btn {
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bitbucket-file-bg-tertiary);
  border: 1px solid var(--bitbucket-file-border-primary);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.pr-action-btn svg {
  width: 18px;
  height: 18px;
}

.pr-action-btn:hover:not(:disabled) {
  transform: translateY(-1px);
}

/* Disabled state */
.pr-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.pr-action-btn:disabled:hover {
  transform: none;
  box-shadow: none;
}

/* Active state (when button status matches PR status) */
.pr-action-btn.active {
  border-width: 2px;
  opacity: 1;
}

/* Approve button */
.approve-btn {
  color: var(--bitbucket-file-status-success);
}

.approve-btn:hover:not(:disabled) {
  background: var(--bitbucket-file-status-success-bg);
  border-color: var(--bitbucket-file-status-success);
  box-shadow: 0 2px 8px var(--bitbucket-file-status-success-shadow);
}

.approve-btn.active {
  background: var(--bitbucket-file-status-success-bg);
  border-color: var(--bitbucket-file-status-success);
}

/* Need Work button */
.needwork-btn {
  color: var(--bitbucket-file-status-warning);
}

.needwork-btn:hover:not(:disabled) {
  background: var(--bitbucket-file-status-warning-bg);
  border-color: var(--bitbucket-file-status-warning);
  box-shadow: 0 2px 8px var(--bitbucket-file-status-warning-shadow);
}

.needwork-btn.active {
  background: var(--bitbucket-file-status-warning-bg);
  border-color: var(--bitbucket-file-status-warning);
}

/* Reject button */
.reject-btn {
  color: var(--bitbucket-file-status-error);
}

.reject-btn:hover:not(:disabled) {
  background: var(--bitbucket-file-status-error-bg);
  border-color: var(--bitbucket-file-status-error);
  box-shadow: 0 2px 8px var(--bitbucket-file-status-error-shadow);
}

.reject-btn.active {
  background: var(--bitbucket-file-status-error-bg);
  border-color: var(--bitbucket-file-status-error);
}


