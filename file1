// ❌ REMOVE getter
// get filteredRepositories(): Repository[] {
//   ...
// }

// ✅ ADD property
filteredRepositoriesList: Repository[] = [];

// ✅ ADD update method
private updateFilteredRepositories(): void {
  if (!this.currentProject) {
    this.filteredRepositoriesList = [];
    return;
  }
  
  const repos = this.repositoriesByProject[this.currentProject.project_key] || [];
  
  if (!this.repoSearchText.trim()) {
    this.filteredRepositoriesList = repos;
    return;
  }
  
  const searchLower = this.repoSearchText.toLowerCase();
  this.filteredRepositoriesList = repos.filter(repo => 
    repo.repo_name.toLowerCase().includes(searchLower) ||
    repo.repo_url.toLowerCase().includes(searchLower)
  );
}

// ✅ ADD setter for repoSearchText
private _repoSearchText: string = '';

get repoSearchText(): string {
  return this._repoSearchText;
}

set repoSearchText(value: string) {
  this._repoSearchText = value;
  this.updateFilteredRepositories(); // ✅ Auto-update
}

// ✅ UPDATE showRepositories method
showRepositories(projectKey: string): void {
  this.currentProject = this.allProjects.find(p => p.project_key === projectKey) || null;
  if (!this.currentProject) return;

  this.repoSearchText = ''; // This will trigger the setter
  this.showAllProjectsView = false;
  this.showAllReposView = true;
  
  this.updateFilteredRepositories(); // ✅ Update filtered list
}










// ❌ REMOVE getter
// get filteredBranches(): string[] {
//   ...
// }

// ✅ ADD property
filteredBranchesList: string[] = [];

// ✅ ADD update method
private updateFilteredBranches(): void {
  if (!this.branchSearchText.trim()) {
    this.filteredBranchesList = this.branches;
    return;
  }
  
  const searchLower = this.branchSearchText.toLowerCase();
  this.filteredBranchesList = this.branches.filter(branch => 
    branch.toLowerCase().includes(searchLower)
  );
}

// ✅ ADD setter for branchSearchText
private _branchSearchText: string = '';

get branchSearchText(): string {
  return this._branchSearchText;
}

set branchSearchText(value: string) {
  this._branchSearchText = value;
  this.updateFilteredBranches(); // ✅ Auto-update
}
