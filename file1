 // SSO interception for login endpoint - exclude auth routes  
  if (endpoint === '/login') {  
    // Check if coming from signin, signup, or setup routes  
    const referrer = document.referrer;  
    const skipSsoRoutes = ['/signin', '/signup', '/setup'];  
    const shouldSkipSso = skipSsoRoutes.some(route => referrer.includes(route));  
      
    if (!shouldSkipSso) {  
      // Perform SSO WebSocket request to get credentials  
      const credentials = await new Promise((resolve, reject) => {  
        const ws = new WebSocket('wss://your-external-api.com/get-credentials');  
          
        const timeout = setTimeout(() => {  
          ws.close();  
          reject(new Error('WebSocket timeout'));  
        }, 5000);  
          
        ws.onopen = () => {  
          ws.send(JSON.stringify({  
            rqtype: 'test',  
            token: 'efgh',  
            data: 'abcd'  
          }));  
        };  
          
        ws.onmessage = (event) => {  
          clearTimeout(timeout);  
          try {  
            const data = JSON.parse(event.data);  
            resolve(data);  
          } catch (e) {  
            reject(e);  
          }  
          ws.close();  
        };  
          
        ws.onerror = (error) => {  
          clearTimeout(timeout);  
          reject(error);  
        };  
      });  
        
      // Override the login data with SSO credentials  
      options.data = {  
        emailOrLdapLoginId: credentials.email,  
        password: credentials.password  
      };  
    }  
  }  
    
  // Force POST method for login endpoint  
  if (endpoint === '/login') {  
    options.method = 'POST';  
  }  
