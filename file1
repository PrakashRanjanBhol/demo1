/* CSS Variables for Theming */
:host {
    /* Light Theme (Default) */
    --bitbucket-file-comparator-bg-primary: #ffffff;
    --bitbucket-file-comparator-bg-secondary: #f5f5f5;
    --bitbucket-file-comparator-bg-tertiary: #fafbfc;
    --bitbucket-file-comparator-bg-overlay: #f0f7ff;
    
    --bitbucket-file-comparator-text-primary: #24292e;
    --bitbucket-file-comparator-text-secondary: #6c757d;
    --bitbucket-file-comparator-text-tertiary: #57606a;
    
    --bitbucket-file-comparator-border-primary: #e1e4e8;
    --bitbucket-file-comparator-border-secondary: #d0d7de;
    --bitbucket-file-comparator-border-tertiary: #d1d5db;
    
    --bitbucket-file-comparator-accent-primary: #0052cc;
    --bitbucket-file-comparator-accent-secondary: #0065ff;
    
    --bitbucket-file-comparator-comment-bg: #ffffff;
    --bitbucket-file-comparator-comment-border: #e0d4ff;
    --bitbucket-file-comparator-comment-shadow: rgba(0, 0, 0, 0.08);
    
    --bitbucket-file-comparator-success-bg: #f0fdf4;
    --bitbucket-file-comparator-success-border: #86efac;
    --bitbucket-file-comparator-success-text: #166534;
    --bitbucket-file-comparator-success-bg-light: #dcfce7;
    
    --bitbucket-file-comparator-error-bg: #fef2f2;
    --bitbucket-file-comparator-error-border: #fca5a5;
    --bitbucket-file-comparator-error-text: #991b1b;
    --bitbucket-file-comparator-error-bg-light: #fee2e2;
    
    --bitbucket-file-comparator-warning-bg: #fef3c7;
    --bitbucket-file-comparator-warning-text: #92400e;
    
    --bitbucket-file-comparator-info-bg: #dbeafe;
    --bitbucket-file-comparator-info-text: #1e40af;
    
    --bitbucket-file-comparator-purple-bg: #f3e8ff;
    --bitbucket-file-comparator-purple-text: #7c3aed;
    --bitbucket-file-comparator-purple-border: #7c3aed;
    
    --bitbucket-file-comparator-highlight-comment: #faf5ff;
    --bitbucket-file-comparator-highlight-accepted: #f0fdf4;
    --bitbucket-file-comparator-highlight-rejected: #fef2f2;
    
    --bitbucket-file-comparator-spinner-bg: #f3f4f6;
    --bitbucket-file-comparator-spinner-border: #e5e7eb;
    --bitbucket-file-comparator-spinner-accent: #7c3aed;
    
    --bitbucket-file-comparator-code-bg: #f6f8fa;
    --bitbucket-file-comparator-code-text: #24292e;
    
    /* Diff colors - Light theme */
    --bitbucket-file-comparator-diff-deletion-bg: rgba(220, 38, 38, 0.15);
    --bitbucket-file-comparator-diff-deletion-line-bg: rgba(220, 38, 38, 0.2);
    --bitbucket-file-comparator-diff-deletion-border: rgba(220, 38, 38, 0.3);
    --bitbucket-file-comparator-diff-deletion-change: rgba(220, 38, 38, 0.4);
    
    --bitbucket-file-comparator-diff-insertion-bg: rgba(34, 197, 94, 0.15);
    --bitbucket-file-comparator-diff-insertion-line-bg: rgba(34, 197, 94, 0.2);
    --bitbucket-file-comparator-diff-insertion-border: rgba(34, 197, 94, 0.3);
    --bitbucket-file-comparator-diff-insertion-change: rgba(34, 197, 94, 0.4);
    
    /* Syntax highlighting - Light theme */
    --bitbucket-file-comparator-syntax-keyword: #d73a49;
    --bitbucket-file-comparator-syntax-string: #032f62;
    --bitbucket-file-comparator-syntax-number: #005cc5;
    --bitbucket-file-comparator-syntax-comment: #6a737d;
    --bitbucket-file-comparator-syntax-function: #6f42c1;
    --bitbucket-file-comparator-syntax-variable: #e36209;
    --bitbucket-file-comparator-syntax-class: #22863a;
    --bitbucket-file-comparator-syntax-tag: #22863a;
    --bitbucket-file-comparator-syntax-attribute: #6f42c1;
    --bitbucket-file-comparator-syntax-operator: #d73a49;
    
    /* Text on diff backgrounds - Light theme (same as regular syntax) */
    --bitbucket-file-comparator-diff-text-primary: #24292e;
    --bitbucket-file-comparator-diff-syntax-keyword: #d73a49;
    --bitbucket-file-comparator-diff-syntax-string: #032f62;
    --bitbucket-file-comparator-diff-syntax-number: #005cc5;
    --bitbucket-file-comparator-diff-syntax-comment: #6a737d;
    --bitbucket-file-comparator-diff-syntax-function: #6f42c1;
    --bitbucket-file-comparator-diff-syntax-variable: #e36209;
    --bitbucket-file-comparator-diff-syntax-class: #22863a;
    --bitbucket-file-comparator-diff-syntax-tag: #22863a;
    --bitbucket-file-comparator-diff-syntax-attribute: #6f42c1;
    --bitbucket-file-comparator-diff-syntax-operator: #d73a49;
}

/* Dark Theme */
:host-context(.dark-theme),
:host.dark-theme {
    --bitbucket-file-comparator-bg-primary: #0a0a0b;
    --bitbucket-file-comparator-bg-secondary: #161618;
    --bitbucket-file-comparator-bg-tertiary: #1e1e20;
    --bitbucket-file-comparator-bg-overlay: #1a1d2e;
    
    --bitbucket-file-comparator-text-primary: #e6e6e6;
    --bitbucket-file-comparator-text-secondary: #9ca3af;
    --bitbucket-file-comparator-text-tertiary: #6b7280;
    
    --bitbucket-file-comparator-border-primary: #2d2d30;
    --bitbucket-file-comparator-border-secondary: #3d3d40;
    --bitbucket-file-comparator-border-tertiary: #4d4d50;
    
    --bitbucket-file-comparator-accent-primary: #3b82f6;
    --bitbucket-file-comparator-accent-secondary: #60a5fa;
    
    --bitbucket-file-comparator-comment-bg: #1e1e20;
    --bitbucket-file-comparator-comment-border: #4c1d95;
    --bitbucket-file-comparator-comment-shadow: rgba(0, 0, 0, 0.3);
    
    --bitbucket-file-comparator-success-bg: #14532d;
    --bitbucket-file-comparator-success-border: #16a34a;
    --bitbucket-file-comparator-success-text: #86efac;
    --bitbucket-file-comparator-success-bg-light: #166534;
    
    --bitbucket-file-comparator-error-bg: #450a0a;
    --bitbucket-file-comparator-error-border: #dc2626;
    --bitbucket-file-comparator-error-text: #fca5a5;
    --bitbucket-file-comparator-error-bg-light: #991b1b;
    
    --bitbucket-file-comparator-warning-bg: #451a03;
    --bitbucket-file-comparator-warning-text: #fbbf24;
    
    --bitbucket-file-comparator-info-bg: #1e3a8a;
    --bitbucket-file-comparator-info-text: #93c5fd;
    
    --bitbucket-file-comparator-purple-bg: #2e1065;
    --bitbucket-file-comparator-purple-text: #a78bfa;
    --bitbucket-file-comparator-purple-border: #7c3aed;
    
    --bitbucket-file-comparator-highlight-comment: #2e1065;
    --bitbucket-file-comparator-highlight-accepted: #14532d;
    --bitbucket-file-comparator-highlight-rejected: #450a0a;
    
    --bitbucket-file-comparator-spinner-bg: #2d2d30;
    --bitbucket-file-comparator-spinner-border: #3d3d40;
    --bitbucket-file-comparator-spinner-accent: #a78bfa;
    
    --bitbucket-file-comparator-code-bg: #1e1e20;
    --bitbucket-file-comparator-code-text: #e6e6e6;
    
    /* Diff colors - Dark theme */
    --bitbucket-file-comparator-diff-deletion-bg: rgba(220, 38, 38, 0.2);
    --bitbucket-file-comparator-diff-deletion-line-bg: rgba(220, 38, 38, 0.25);
    --bitbucket-file-comparator-diff-deletion-border: rgba(220, 38, 38, 0.35);
    --bitbucket-file-comparator-diff-deletion-change: rgba(220, 38, 38, 0.5);
    
    --bitbucket-file-comparator-diff-insertion-bg: rgba(34, 197, 94, 0.2);
    --bitbucket-file-comparator-diff-insertion-line-bg: rgba(34, 197, 94, 0.25);
    --bitbucket-file-comparator-diff-insertion-border: rgba(34, 197, 94, 0.35);
    --bitbucket-file-comparator-diff-insertion-change: rgba(34, 197, 94, 0.5);
    
    /* Syntax highlighting - Dark theme (Material Theme Palenight) */
    --bitbucket-file-comparator-syntax-keyword: #c792ea;
    --bitbucket-file-comparator-syntax-string: #c3e88d;
    --bitbucket-file-comparator-syntax-number: #f78c6c;
    --bitbucket-file-comparator-syntax-comment: #676e95;
    --bitbucket-file-comparator-syntax-function: #82aaff;
    --bitbucket-file-comparator-syntax-variable: #f07178;
    --bitbucket-file-comparator-syntax-class: #ffcb6b;
    --bitbucket-file-comparator-syntax-tag: #f07178;
    --bitbucket-file-comparator-syntax-attribute: #c792ea;
    --bitbucket-file-comparator-syntax-operator: #89ddff;
    
    /* Text on diff backgrounds - Dark theme (brighter/more contrasting colors) */
    --bitbucket-file-comparator-diff-text-primary: #ffffff;
    --bitbucket-file-comparator-diff-syntax-keyword: #e0b0ff;
    --bitbucket-file-comparator-diff-syntax-string: #d4f1b8;
    --bitbucket-file-comparator-diff-syntax-number: #ffad87;
    --bitbucket-file-comparator-diff-syntax-comment: #8891b0;
    --bitbucket-file-comparator-diff-syntax-function: #a3c5ff;
    --bitbucket-file-comparator-diff-syntax-variable: #ff9099;
    --bitbucket-file-comparator-diff-syntax-class: #ffe28c;
    --bitbucket-file-comparator-diff-syntax-tag: #ff9099;
    --bitbucket-file-comparator-diff-syntax-attribute: #e0b0ff;
    --bitbucket-file-comparator-diff-syntax-operator: #a4f0ff;
}










/* Syntax highlighting - Regular lines (unchanged context) */
.pr-review-container ::ng-deep .d2h-code-line-ctn .hljs,
.pr-review-container ::ng-deep .d2h-code-side-line-ctn .hljs,
.pr-review-container ::ng-deep .hljs {
    background-color: transparent !important;
    color: var(--bitbucket-file-comparator-text-primary) !important;
}

/* Regular syntax highlighting (for unchanged lines) */
.pr-review-container ::ng-deep .d2h-cntx .hljs-keyword,
.pr-review-container ::ng-deep .d2h-cntx .hljs-selector-tag,
.pr-review-container ::ng-deep .d2h-cntx .hljs-literal {
    color: var(--bitbucket-file-comparator-syntax-keyword) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-string,
.pr-review-container ::ng-deep .d2h-cntx .hljs-doctag {
    color: var(--bitbucket-file-comparator-syntax-string) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-number,
.pr-review-container ::ng-deep .d2h-cntx .hljs-attr {
    color: var(--bitbucket-file-comparator-syntax-number) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-comment,
.pr-review-container ::ng-deep .d2h-cntx .hljs-quote {
    color: var(--bitbucket-file-comparator-syntax-comment) !important;
    font-style: italic !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-function,
.pr-review-container ::ng-deep .d2h-cntx .hljs-title {
    color: var(--bitbucket-file-comparator-syntax-function) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-variable,
.pr-review-container ::ng-deep .d2h-cntx .hljs-template-variable {
    color: var(--bitbucket-file-comparator-syntax-variable) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-class,
.pr-review-container ::ng-deep .d2h-cntx .hljs-type {
    color: var(--bitbucket-file-comparator-syntax-class) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-tag {
    color: var(--bitbucket-file-comparator-syntax-tag) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-attribute {
    color: var(--bitbucket-file-comparator-syntax-attribute) !important;
}

.pr-review-container ::ng-deep .d2h-cntx .hljs-operator,
.pr-review-container ::ng-deep .d2h-cntx .hljs-built_in {
    color: var(--bitbucket-file-comparator-syntax-operator) !important;
}

/* Syntax highlighting for INSERTION lines (added code) - Higher contrast */
.pr-review-container ::ng-deep .d2h-ins .d2h-code-line-ctn,
.pr-review-container ::ng-deep .d2h-ins .d2h-code-side-line-ctn {
    color: var(--bitbucket-file-comparator-diff-text-primary) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-keyword,
.pr-review-container ::ng-deep .d2h-ins .hljs-selector-tag,
.pr-review-container ::ng-deep .d2h-ins .hljs-literal {
    color: var(--bitbucket-file-comparator-diff-syntax-keyword) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-string,
.pr-review-container ::ng-deep .d2h-ins .hljs-doctag {
    color: var(--bitbucket-file-comparator-diff-syntax-string) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-number,
.pr-review-container ::ng-deep .d2h-ins .hljs-attr {
    color: var(--bitbucket-file-comparator-diff-syntax-number) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-comment,
.pr-review-container ::ng-deep .d2h-ins .hljs-quote {
    color: var(--bitbucket-file-comparator-diff-syntax-comment) !important;
    font-style: italic !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-function,
.pr-review-container ::ng-deep .d2h-ins .hljs-title {
    color: var(--bitbucket-file-comparator-diff-syntax-function) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-variable,
.pr-review-container ::ng-deep .d2h-ins .hljs-template-variable {
    color: var(--bitbucket-file-comparator-diff-syntax-variable) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-class,
.pr-review-container ::ng-deep .d2h-ins .hljs-type {
    color: var(--bitbucket-file-comparator-diff-syntax-class) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-tag {
    color: var(--bitbucket-file-comparator-diff-syntax-tag) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-attribute {
    color: var(--bitbucket-file-comparator-diff-syntax-attribute) !important;
}

.pr-review-container ::ng-deep .d2h-ins .hljs-operator,
.pr-review-container ::ng-deep .d2h-ins .hljs-built_in {
    color: var(--bitbucket-file-comparator-diff-syntax-operator) !important;
}

/* Syntax highlighting for DELETION lines (removed code) - Higher contrast */
.pr-review-container ::ng-deep .d2h-del .d2h-code-line-ctn,
.pr-review-container ::ng-deep .d2h-del .d2h-code-side-line-ctn {
    color: var(--bitbucket-file-comparator-diff-text-primary) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-keyword,
.pr-review-container ::ng-deep .d2h-del .hljs-selector-tag,
.pr-review-container ::ng-deep .d2h-del .hljs-literal {
    color: var(--bitbucket-file-comparator-diff-syntax-keyword) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-string,
.pr-review-container ::ng-deep .d2h-del .hljs-doctag {
    color: var(--bitbucket-file-comparator-diff-syntax-string) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-number,
.pr-review-container ::ng-deep .d2h-del .hljs-attr {
    color: var(--bitbucket-file-comparator-diff-syntax-number) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-comment,
.pr-review-container ::ng-deep .d2h-del .hljs-quote {
    color: var(--bitbucket-file-comparator-diff-syntax-comment) !important;
    font-style: italic !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-function,
.pr-review-container ::ng-deep .d2h-del .hljs-title {
    color: var(--bitbucket-file-comparator-diff-syntax-function) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-variable,
.pr-review-container ::ng-deep .d2h-del .hljs-template-variable {
    color: var(--bitbucket-file-comparator-diff-syntax-variable) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-class,
.pr-review-container ::ng-deep .d2h-del .hljs-type {
    color: var(--bitbucket-file-comparator-diff-syntax-class) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-tag {
    color: var(--bitbucket-file-comparator-diff-syntax-tag) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-attribute {
    color: var(--bitbucket-file-comparator-diff-syntax-attribute) !important;
}

.pr-review-container ::ng-deep .d2h-del .hljs-operator,
.pr-review-container ::ng-deep .d2h-del .hljs-built_in {
    color: var(--bitbucket-file-comparator-diff-syntax-operator) !important;
}

/* Additional hljs elements */
.pr-review-container ::ng-deep .hljs-regexp,
.pr-review-container ::ng-deep .hljs-subst {
    color: var(--bitbucket-file-comparator-text-primary) !important;
}

.pr-review-container ::ng-deep .hljs-emphasis {
    font-style: italic !important;
}

.pr-review-container ::ng-deep .hljs-strong {
    font-weight: bold !important;
}
